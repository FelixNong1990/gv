/* <![CDATA[ */
var usernoiseButton = {"text":"<i class='icon-edit'><\/i>Feedback","style":"background-color: #404040; color: #FFFFFF","class":"un-left","windowUrl":"\/gv\/wp-admin\/admin-ajax.php?action=un_load_window","showButton":"1","disableOnMobiles":"1","custom_button_id":null};
/* ]]> */

// Usernoise
(function(){window.usernoise={};jQuery(function(e){var t,n,r,i,s,o;i=function(){var t;t=this;t.show=function(){var n,r,i,s,u;n=e('<a href="#" id="un-button" />').appendTo(e("body"));u=void 0;n.html(usernoiseButton.text);n.addClass(usernoiseButton["class"]);n.attr("style",usernoiseButton.style);n.click(function(e){t.showWindow();e.preventDefault();return false});if(o.msie7){if(n.is(".un-left")||n.is(".un-right")){n.css("margin-top","-"+n.width()/2+"px")}n.addClass("ie7")}else if(o.msie8){if(n.is(".un-right")){n.css("right","-"+n.outerWidth()+"px")}if(n.is(".un-left")||n.is(".un-right")){n.css("margin-top","-"+n.width()/2+"px")}n.addClass("ie8")}else{n.addClass("css3")}if(n.is(".un-bottom")||n.is(".un-top")){n.css("margin-left","-"+e("#un-button").width()/2+"px")}if(n.is(".un-left")){u="left"}else if(n.is(".un-right")){u="right"}else if(n.is(".un-bottom")){u="bottom"}else{u="top"}if(n.is(".un-left.css3")){n.css("margin-top",n.width()/2+"px")}if(n.is(".un-right.css3")){n.css("margin-top","-"+n.width()/2+"px")}s={};r={opacity:1};i={opacity:.96};s[u]="+=40px";r[u]="+=3px";i[u]="-=3px";n.animate(s).hover(function(){n.animate(r,100)},function(){n.animate(i,100)})};t.showWindow=function(){var t,n,r;r=e('<div id="un-overlay" />').prependTo(e("body"));r.fadeIn("fast");n=e('<div id="un-loading" />').prependTo(e("body"));t=e('<iframe id="un-iframe" marginheight="0" marginwidth="0" frameborder="0" allowtransparency="true" />').prependTo(e("body"));t.css("opacity",0);t.load(function(){n.fadeOut("fast",function(){n.remove()});t.css("opacity",0);t.animate({opacity:1},"fast")});t.attr("src",usernoiseButton.windowUrl)};t.hideWindow=function(){e("#un-overlay").fadeOut(function(){e("#un-overlay").remove()});e("#un-loading").remove();e("#un-iframe").fadeOut("fast",function(){e("#un-iframe").remove()})}};n=function(n){var r,i,s;r=function(){var t,n;t=e(this).parent();t.find("a").removeClass("selected");e(this).addClass("selected");n=e(this).attr("data-type");t.find("input[type=hidden]").val(n);e(document).trigger("typeselected#feedbackform#window.un",n);return false};s=function(){var t;t=n.unSerializeObject();if(window.parent.document){t.referer=window.parent.document.location.href}e(document).trigger("submitting#feedbackform#window.un",t);i.lock();n.find(".loader").show();i.errors.hide();e.post(n.attr("action"),t,function(t){n.find(".loader").hide();i.unlock();t=usernoise.helpers.parseJSON(t);if(t.success){e("#un-thankyou").height(e("#un-feedback-wrapper").height()+"px");n.find("textarea").val("").trigger("blur");e(document).trigger("sent#feedbackform#window.un")}else{i.errors.show(t.errors)}});return false};i=this;i.form=n;n.find(".text").unAutoPlaceholder();n.find(".un-types-wrapper a").click(r);n.find(".un-types-wrapper a:first-child").click();n.submit(s);e.extend(i,{unlock:function(){e(document).trigger("unlocking#feedbackform#window.un");n.find("input, select, textarea").removeAttr("disabled");n.find(".un-types-wrapper a").click(r)},lock:function(){n.find("*").unbind("click");e(document).trigger("locking#feedbackform#window.un");n.find("input, select, textarea").attr("disabled","disabled")},errors:new t(n.find(".un-feedback-errors-wrapper")),selectedType:function(){var t;t=e("#types-wrapper a.selected").attr("id");if(t){return t.replace("un-type-","")}else{return null}}});e(document).trigger("created#feedbackform#window.un",i)};t=function(t){var n,r;r=this;n=t.find(".un-errors");e.extend(r,{show:function(r){e("#window").addClass("transitionEnabled");e(r).each(function(t,r){n.append(e("<p />").text(r))});t.fadeIn("fast")},hide:function(e){n.html("");t.fadeOut("fast",function(){t.hide()})}})};r=function(){var t,n;n=this;t=t;e.extend(n,{show:function(){e("#un-thankyou").show();e("#un-feedback-close").click(function(){usernoise.window.hide();return false})}})};s=function(t){var n,i,s,u;i=function(){if(!e("#wrapper").hasClass("un")){return}e("#wrapper").addClass("un");if(o.msie7){e("#wrapper").addClass("un-ie7")}if(o.msie8){e("#wrapper").addClass("un-ie8")}};u=function(e,t){s.thankYouScreen=new r(n.find(".thank-you-screen"));s.thankYouScreen.show(t)};s=this;n=e("#window");i();e.extend(s,{hide:function(){window.parent.usernoiseButton.button.hideWindow()},adjustSize:function(){n.css({"margin-top":"-"+n.height()/2+"px","margin-left":"-"+n.width()/2+"px"})}});s.adjustSize()};o={};if(navigator&&navigator.appVersion){o.msie6=navigator.appVersion.indexOf("MSIE 6.0")!==-1;o.msie7=navigator.appVersion.indexOf("MSIE 7.0")!==-1;o.msie8=navigator.appVersion.indexOf("MSIE 8.0")!==-1}if(o.msie6||o.msie7){return}usernoise.UsernoiseButton=i;usernoise.FeedbackForm=n;usernoise.Errors=t;usernoise.ThankYouScreen=r;e.fn.unAutoPlaceholder=function(){e(this).each(function(){e(this).attr("data-default",e(this).val());e(this).focus(function(){if(e(this).val()===e(this).attr("data-default")){e(this).val("");e(this).addClass("text-normal");e(this).removeClass("text-empty")}});e(this).blur(function(){if(e(this).val()===""){e(this).val(e(this).attr("data-default"));e(this).removeClass("text-normal");e(this).addClass("text-empty")}})})};e.fn.unSerializeObject=function(){var t,n;n={};t=this.serializeArray();e.each(t,function(){if(n[this.name]){if(!n[this.name].push){n[this.name]=[n[this.name]]}n[this.name].push(this.value||"")}else{n[this.name]=this.value||""}});return n};usernoise.helpers={parseJSON:function(t){if(e.parseJSON){return e.parseJSON(t)}else{return eval_("("+t+")")}}};usernoise.Window=s})}).call(this);

// Usernoise button
(function(){jQuery(function(e){var t,n,r=this;if(navigator&&navigator.appVersion&&(navigator.appVersion.indexOf("MSIE 6.0")!==-1||navigator.appVersion.indexOf("MSIE 7.0")!==-1)){return}usernoiseButton.button=new usernoise.UsernoiseButton;usernoise.window={show:usernoiseButton.button.showWindow};e(".un-feedback-form").each(function(){new usernoise.FeedbackForm(e(this))});n=function(){return window.innerWidth<=800&&window.innerHeight<=600};if(usernoiseButton.showButton&&!(usernoiseButton.disableOnMobiles&&n())){usernoiseButton.button.show()}e(document).bind("sent#feedbackform#window.un",function(){var t,n;n=function(){e("#un-thankyou").find("a").unbind("click");e("#un-thankyou").fadeOut("fast",function(){e("#un-overlay").fadeOut("fast",function(){e("#un-overlay").remove()})})};t=e('<div id="un-overlay" />').appendTo(e("body"));e("#un-overlay").click(n).fadeIn("fast",function(){e("#un-thankyou").fadeIn("fast",function(){setTimeout(n,5e3)}).find("#un-feedback-close").click(n)})});try{e("#"+usernoiseButton.custom_button_id).click(function(){usernoise.window.show();return false})}catch(i){t=i;alert("It looks like you entere wrong HTML ID value for custom Usernoise feedback button.")}e("a[rel=usernoise]").click(function(){usernoise.window.show();return false});e("button[rel=usernoise]").click(function(){usernoise.window.show();return false});e('a[href="#usernoise"]').click(function(){usernoise.window.show();return false})})}).call(this);

// Userpro Spinner 
var Spinners={version:"3.0.0"};(function(e){function t(e){return e*Math.PI/180}function n(e){this.element=e}function r(t,n){t&&(this.element=t,u.remove(t),u.removeDetached(),this._position=0,this._state="stopped",this.setOptions(e.extend({color:"#000",dashes:12,radius:5,height:5,width:1.8,opacity:1,padding:3,rotation:700},n||{})),this.drawPosition(0),u.add(this))}var i={scroll:function(e,t){if(!t)return e;var n=e.slice(0,t);return e.slice(t,e.length).concat(n)},isElement:function(e){return e&&1==e.nodeType},element:{isAttached:function(){return function(e){for(;e&&e.parentNode;)e=e.parentNode;return!!e&&!!e.body}}()}},s={drawRoundedRectangle:function(n,r){var i=e.extend({top:0,left:0,width:0,height:0,radius:0},r||{}),s=i.left,o=i.top,u=i.width,f=i.height,i=i.radius;n.beginPath(),n.moveTo(s+i,o),n.arc(s+u-i,o+i,i,t(-90),t(0),!1),n.arc(s+u-i,o+f-i,i,t(0),t(90),!1),n.arc(s+i,o+f-i,i,t(90),t(180),!1),n.arc(s+i,o+i,i,t(-180),t(-90),!1),n.closePath(),n.fill()}},o=function(){function e(e){var n=[];0==e.indexOf("#")&&(e=e.substring(1)),e=e.toLowerCase();if(""!=e.replace(t,""))return null;3==e.length?(n[0]=e.charAt(0)+e.charAt(0),n[1]=e.charAt(1)+e.charAt(1),n[2]=e.charAt(2)+e.charAt(2)):(n[0]=e.substring(0,2),n[1]=e.substring(2,4),n[2]=e.substring(4));for(e=0;e<n.length;e++)n[e]=parseInt(n[e],16);return n.red=n[0],n.green=n[1],n.blue=n[2],n}var t=RegExp("[0123456789abcdef]","g"),n=function(){function e(e,t,n){return e=e.toString(n||10),Array(t-e.length).join("0")+e}return function(t,n,r){return"#"+e(t,2,16)+e(n,2,16)+e(r,2,16)}}();return{hex2rgb:e,hex2fill:function(t,n){"undefined"==typeof n&&(n=1);var r=n,i=e(t);return i[3]=r,i.opacity=r,"rgba("+i.join()+")"},rgb2hex:n}}();e.extend(Spinners,{enabled:!1,support:{canvas:function(){var t=e("<canvas>")[0];return!!t.getContext&&!!t.getContext("2d")}()},init:function(){if(this.support.canvas||window.G_vmlCanvasManager&&window.attachEvent&&-1===navigator.userAgent.indexOf("Opera"))window.G_vmlCanvasManager&&window.G_vmlCanvasManager.init_(document),this.enabled=!0},create:function(e,t){return n.create(e,t),this.get(e)},get:function(e){return new n(e)},play:function(e){return this.get(e).play(),this},pause:function(e){return this.get(e).pause(),this},toggle:function(e){return this.get(e).toggle(),this},stop:function(e){return this.get(e).stop(),this},remove:function(e){return this.get(e).remove(),this},removeDetached:function(){return u.removeDetached(),this},center:function(e){return this.get(e).center(),this},setOptions:function(e,t){return this.get(e).setOptions(t),this},getDimensions:function(e){return e=2*u.get(e)[0].getLayout().workspace.radius,{width:e,height:e}}});var u={spinners:[],get:function(t){if(t){var n=[];return e.each(this.spinners,function(r,s){s&&(i.isElement(t)?s.element==t:e(s.element).is(t))&&n.push(s)}),n}},add:function(e){this.spinners.push(e)},remove:function(t){e(e.map(this.spinners,function(n){if(i.isElement(t)?n.element==t:e(n.element).is(t))return n.element})).each(e.proxy(function(e,t){this.removeByElement(t)},this))},removeByElement:function(t){var n=this.get(t)[0];n&&(n.remove(),this.spinners=e.grep(this.spinners,function(e){return e.element!=t}))},removeDetached:function(){e.each(this.spinners,e.proxy(function(e,t){t&&t.element&&!i.element.isAttached(t.element)&&this.remove(t.element)},this))}};e.extend(n,{create:function(t,n){if(t){var s=n||{},o=[];return i.isElement(t)?o.push(new r(t,s)):e(t).each(function(e,t){o.push(new r(t,s))}),o}}}),e.extend(n.prototype,{items:function(){return u.get(this.element)},play:function(){return e.each(this.items(),function(e,t){t.play()}),this},stop:function(){return e.each(this.items(),function(e,t){t.stop()}),this},pause:function(){return e.each(this.items(),function(e,t){t.pause()}),this},toggle:function(){return e.each(this.items(),function(e,t){t.toggle()}),this},center:function(){return e.each(this.items(),function(e,t){t.center()}),this},setOptions:function(t){return e.each(this.items(),function(e,n){n.setOptions(t)}),this},remove:function(){return u.remove(this.element),this}}),e.extend(r.prototype,{setOptions:function(t){this.options=e.extend({},this.options,t||{}),this.options.radii&&(t=this.options.radii,this.options.radius=Math.min(t[0],t[1]),this.options.height=Math.max(t[0],t[1])-this.options.radius),this.options.dashWidth&&(this.options.width=this.options.dashWidth),this.options.speed&&(this.options.duration=1e3*this.options.speed);var t=this._state,n=this._position;this._layout=null,this.build(),n&&n>=this.options.dashes-1&&(this._position=this.options.dashes-1);switch(t){case"playing":this.play();break;case"paused":case"stopped":this.drawPosition(this._position)}this._centered&&this.center()},remove:function(){this.canvas&&(this.pause(),e(this.canvas).remove(),this.ctx=this.canvas=null)},build:function(){this.remove();var t=this.getLayout().workspace.radius;return e(document.body).append(this.canvas=e("<canvas>").attr({width:2*t,height:2*t}).css({zoom:1})),window.G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.canvas[0]),this.ctx=this.canvas[0].getContext("2d"),this.ctx.globalAlpha=this.options.opacity,e(this.element).append(this.canvas),this.ctx.translate(t,t),this},drawPosition:function(e){var n=this.getLayout().workspace,e=i.scroll(n.opacities,-1*e),r=n.radius,n=this.options.dashes,s=t(360/n);this.ctx.clearRect(-1*r,-1*r,2*r,2*r);for(r=0;r<n;r++)this.drawDash(e[r],this.options.color),this.ctx.rotate(s)},drawDash:function(e,t){this.ctx.fillStyle=o.hex2fill(t,e);var n=this.getLayout(),r=n.workspace.radius,i=n.dash.position,n=n.dash.dimensions;s.drawRoundedRectangle(this.ctx,{top:i.top-r,left:i.left-r,width:n.width,height:n.height,radius:Math.min(n.height,n.width)/2})},_nextPosition:function(){var t=this.options.rotation/this.options.dashes;this.nextPosition(),this._playTimer=window.setTimeout(e.proxy(this._nextPosition,this),t)},nextPosition:function(){this._position==this.options.dashes-1&&(this._position=-1),this._position++,this.drawPosition(this._position)},play:function(){if("playing"!=this._state){this._state="playing";var t=this.options.rotation/this.options.dashes;return this._playTimer=window.setTimeout(e.proxy(this._nextPosition,this),t),this}},pause:function(){if("paused"!=this._state)return this._pause(),this._state="paused",this},_pause:function(){this._playTimer&&(window.clearTimeout(this._playTimer),this._playTimer=null)},stop:function(){if("stopped"!=this._state)return this._pause(),this._position=0,this.drawPosition(0),this._state="stopped",this},toggle:function(){return this["playing"==this._state?"pause":"play"](),this},getLayout:function(){if(this._layout)return this._layout;for(var e=this.options,t=e.dashes,n=e.width,r=e.radius,i=e.radius+e.height,s=Math.max(n,i),s=Math.ceil(Math.max(s,Math.sqrt(i*i+n/2*(n/2)))),e=s+=e.padding,o=1/t,u=[],a=0;a<t;a++)u.push((a+1)*o);return this._layout=t={workspace:{radius:e,opacities:u},dash:{position:{top:s-i,left:s-n/2},dimensions:{width:n,height:i-r}}}},center:function(){var t=2*this.getLayout().workspace.radius;e(this.element.parentNode).css({position:"relative"}),e(this.element).css({position:"absolute",height:t+"px",width:t+"px",top:"50%",left:"50%",marginLeft:-.5*t+"px",marginTop:-.5*t+"px"}),this._centered=!0}}),Spinners.init(),Spinners.enabled||(n.create=function(){return[]})})(jQuery);

// Userpro Minified
function userpro_shortcode_template(e,t,n,r,i,s){str="action=userpro_shortcode_template&shortcode="+n;if(r){str=str+"&up_username="+r}if(s){str=str+"&post_id="+s}if(i){str=str+"&force_redirect_uri=1"}if(t.find("form").length>0){var o=t.find("form");userpro_init_load(o)}jQuery.ajax({url:userpro_ajax_url,data:str,dataType:"JSON",type:"POST",error:function(e,t,n){userpro_end_load(o);alert(n)},success:function(n){jQuery("#spinner").remove();if(e=="insert"){jQuery(t).html(n.response)}if(e=="update"){jQuery(t).replaceWith(n.response);userpro_end_load(o)}userpro_responsive();userpro_chosen();userpro_fluid_videos();userpro_ajax_picupload();jQuery(".userpro form").each(function(){userpro_collapse(jQuery(this))});userpro_overlay_center(".userpro-overlay-inner")}})}function userpro_fluid_videos(){var e=jQuery(".userpro iframe, .userpro object, .userpro embed"),t=jQuery(".userpro-input");e.each(function(){jQuery(this).attr("data-aspectRatio",this.height/this.width).removeAttr("height").removeAttr("width")});var n=t.width();e.each(function(){var e=jQuery(this);e.width(jQuery(this).parents(".userpro-input").width()).height(jQuery(this).parents(".userpro-input").width()*e.attr("data-aspectRatio"))})}function userpro_ajax_picupload(){jQuery(".userpro-pic-upload").each(function(){var e=jQuery(this).data("allowed_extensions");var t=jQuery(this).data("filetype");var n=jQuery(this).parents(".userpro").find("form");jQuery(this).uploadFile({url:userpro_upload_url,allowedTypes:e,onSubmit:function(e){var t=jQuery(".ajax-file-upload-statusbar:visible");t.parents(".userpro-input").find(".red").hide();if(t.parents(".userpro-input").find("img.default").length){t.parents(".userpro-input").find("img.default").show();t.parents(".userpro-input").find("img.modified").remove()}},onSuccess:function(e,r,i){r=jQuery.parseJSON(r);var s=jQuery(".ajax-file-upload-statusbar:visible");var o=r.target_file_uri;if(s.parents(".userpro-input").find("img.default").length){var u=s.parents(".userpro-input").find("img.default").attr("width");var a=s.parents(".userpro-input").find("img.default").attr("height")}else if(s.parents(".userpro-input").find("img.modified").length){var u=s.parents(".userpro-input").find("img.modified").attr("width");var a=s.parents(".userpro-input").find("img.modified").attr("height")}else if(s.parents(".userpro-input").find("img.avatar").length){var u=s.parents(".userpro-input").find("img.avatar").attr("width");var a=s.parents(".userpro-input").find("img.avatar").attr("height")}str="action=userpro_crop_picupload&filetype="+t+"&width="+u+"&height="+a+"&src="+o;jQuery.ajax({url:userpro_ajax_url,data:str,dataType:"JSON",type:"POST",success:function(e){s.prev().after("<input type='button' value='"+s.parents(".userpro-input").find(".userpro-pic").data("remove_text")+"' class='userpro-button red' style='display:none' />");s.prev().fadeIn(function(){if(t=="picture"){s.parents(".userpro-input").find("img").attr("src",e.response);s.parents(".userpro-input").find("img").removeClass("no_feature")}else if(t=="file"){s.parents(".userpro-input").find(".userpro-file-input").remove();s.parents(".userpro-input").prepend(e.response)}s.hide()});s.parents(".userpro-input").find("input:hidden").val(o);s.parents(".userpro-input").find(".userpro-pic-none").hide();n.find("input").each(function(){jQuery(this).trigger("blur")})}})}})})}function userpro_password_strength_meter(e){var t=e.parents(".userpro").find(".userpro-field[data-key^='passwordstrength']");var n=t.find("span.strength-text").data();var r=t.find("span.strength-text");var i=e.val();var s=/[a-z]/,o=/[A-Z]/,u=/[0-9]/,a=/[0-9].*[0-9]/,f=/[^a-zA-Z0-9]/,l=/^(.)\1+$/;var c=s.test(i),h=o.test(i.substring(0,1).toLowerCase()+i.substring(1)),p=u.test(i),d=a.test(i),v=f.test(i);if(t.length>0){if(i.length<8){t.find(".strength-plain").removeClass("fill");r.html(n["too_short"]);return 0}else if(l.test(i)){t.find(".strength-plain").removeClass("fill");t.find(".strength-plain:eq(0)").addClass("fill");r.html(n["very_weak"]);return 1}else if(c&&h&&p&&v){t.find(".strength-plain").removeClass("fill");t.find(".strength-plain").addClass("fill");r.html(n["very_strong"]);return 5}else if(c&&h&&p||c&&d||h&&d||v){t.find(".strength-plain").removeClass("fill");t.find(".strength-plain:eq(0),.strength-plain:eq(1),.strength-plain:eq(2),.strength-plain:eq(3)").addClass("fill");r.html(n["strong"]);return 4}else if(c&&h||c&&p||h&&p){t.find(".strength-plain").removeClass("fill");t.find(".strength-plain:eq(0),.strength-plain:eq(1),.strength-plain:eq(2)").addClass("fill");r.html(n["good"]);return 3}else{t.find(".strength-plain").removeClass("fill");t.find(".strength-plain:eq(0),.strength-plain:eq(1)").addClass("fill");r.html(n["weak"]);return 2}}}function userpro_chosen(){jQuery(".userpro select, .emd-filters select").removeClass("chzn-done").css("display","inline").data("chosen",null);jQuery(".userpro, .emd-filters").find("*[class*=chzn], .chosen-container").remove();jQuery(".chosen-select").chosen({disable_search_threshold:10,width:"100%"});jQuery(".chosen-select-compact").chosen({disable_search:1,width:"100%"});jQuery(".userpro-tip-fade").tipsy({offset:2,fade:true,opacity:1});jQuery("span.userpro-tip, .userpro-tip").tipsy({offset:5,fade:true,opacity:1});jQuery(".userpro-profile-badge").tipsy({offset:3,fade:true,opacity:1});jQuery(".userpro-profile-badge-right").tipsy({offset:3,fade:true,opacity:1,gravity:"w"})}function userpro_responsive(){jQuery(".userpro-is-responsive").each(function(){var e=jQuery(this);if(e.width()<=400){e.addClass("userpro-centered-c").removeClass("userpro-head");e.find("*").addClass("userpro-force-center");e.find(".userpro-profile-name").addClass("small")}else{e.removeClass("userpro-centered-c").addClass("userpro-head");e.find("*").removeClass("userpro-force-center");e.find(".userpro-profile-name").removeClass("small")}});jQuery(".userpro").each(function(){var e=jQuery(this);if(e.width()<=400&&e.width()>0&&e.data("layout")=="float"){e.removeClass("userpro-float")}else if(e.data("layout")=="float"){e.addClass("userpro-float")}if(e.width()<=400&&e.width()>0){if(e.find(".userpro-label").hasClass("iconed")){e.find(".userpro-field-icon").hide();e.find(".userpro-label").removeClass("iconed")}e.find(".userpro-submit").find("input").addClass("fullwidth-block");e.find(".userpro-social-connect").addClass("fullwidth-block-social")}else{e.find(".userpro-submit").find("input").removeClass("fullwidth-block");e.find(".userpro-social-connect").removeClass("fullwidth-block-social")}});jQuery(".userpro-users-v2").each(function(){var e=jQuery(this);if(e.width()<=700){e.find(".userpro-awsm").css({width:"40%","margin-left":"15px","margin-right":"15px"})}if(e.width()<=560){e.find(".userpro-awsm").css({width:"100%","margin-left":0,"margin-right":0})}if(e.width()>700){e.find(".userpro-awsm").css({width:"25%","margin-left":"15px","margin-right":"15px"})}equalHeight(jQuery(this).find(".userpro-awsm-bio"));equalHeight(jQuery(this).find(".userpro-awsm span.userpro-badges"));equalHeight(jQuery(this).find(".userpro-awsm-social"))});jQuery(".userpro-post-wrap").each(function(){var e=jQuery(this);if(e.width()<=700){e.find(".userpro-post:not(.userpro-post-compact)").css({width:"40%","margin-left":"10px","margin-right":"10px"})}if(e.width()<=400){e.find(".userpro-post:not(.userpro-post-compact)").css({width:"100%","margin-left":0,"margin-right":0})}if(e.width()>700){e.find(".userpro-post:not(.userpro-post-compact)").css({width:"25%","margin-left":"10px","margin-right":"10px"})}});jQuery("input[data-fieldtype=datepicker]").datepicker({dateFormat:"dd-mm-yy",changeMonth:true,changeYear:true,showOtherMonths:true,selectOtherMonths:true,dayNamesMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],yearRange:"c-65:c+0"})}function equalHeight(e){tallest=0;e.each(function(){jQuery(this).height("auto");thisHeight=jQuery(this).height();if(thisHeight>tallest){tallest=thisHeight}});e.height(tallest)}function userpro_overlay_center(e){if(e.length){jQuery(e).imagesLoaded(function(){jQuery(e).animate({top:jQuery(window).innerHeight()/2,"margin-top":"-"+jQuery(e).find(".userpro").innerHeight()/2+"px"})})}}function userpro_collapse(e){e.find(".userpro-section").each(function(){if(jQuery(this).next("div.userpro-field:not(.userpro-submit)").length==0){jQuery(this).hide()}else{}});e.find(".userpro-collapsible-1.userpro-collapsed-1").each(function(){jQuery(this).nextUntil("div.userpro-column").hide();if(jQuery(this).find("span").length==0)jQuery(this).prepend('<span><i class="userpro-icon-angle-right"></i></span>')});e.find(".userpro-collapsible-1.userpro-collapsed-0").each(function(){jQuery(this).nextUntil("div.userpro-column").show();if(jQuery(this).find("span").length==0)jQuery(this).prepend('<span><i class="userpro-icon-angle-down"></i></span>')})}function userpro_side_validate(e,t,n){str="action=userpro_side_validate&input_value="+t.replace(/&/g,"%26")+"&ajaxcheck="+n+"&element="+e;jQuery.ajax({url:userpro_ajax_url,data:str,dataType:"JSON",type:"POST",success:function(t){var n=e.parents(".userpro-input");if(t&&t.error){userpro_client_error(e,n,t.error)}else{userpro_client_valid(e,n)}userpro_overlay_center(".userpro-overlay-inner")}})}function userpro_client_error(e,t,n){if(e.data("custom-error")){n=e.data("custom-error")}if(e.attr("type")){if(e.attr("type")=="hidden"){t.find(".icon-ok").remove();if(t.find(".userpro-warning").length==0){e.addClass("warning").removeClass("ok");t.append('<div class="userpro-warning"><i class="userpro-icon-caret-up"></i>'+n+"</div>");t.find(".userpro-warning").css({top:"0px",opacity:"1"})}else{t.find(".userpro-warning").html('<i class="userpro-icon-caret-up"></i>'+n);t.find(".userpro-warning").css({top:"0px",opacity:"1"})}}else{t.find(".icon-ok").remove();if(t.find(".userpro-warning").length==0){e.addClass("warning").removeClass("ok");e.after('<div class="userpro-warning"><i class="userpro-icon-caret-up"></i>'+n+"</div>");t.find(".userpro-warning").css({top:"0px",opacity:"1"})}else{t.find(".userpro-warning").html('<i class="userpro-icon-caret-up"></i>'+n);t.find(".userpro-warning").css({top:"0px",opacity:"1"})}}}else{if(t.find(".userpro-warning").length==0){t.find(".chosen-container").after('<div class="userpro-warning"><i class="userpro-icon-caret-up"></i>'+n+"</div>");t.find(".userpro-warning").css({top:"0px",opacity:"1"})}else{t.find(".userpro-warning").html('<i class="userpro-icon-caret-up"></i>'+n);t.find(".userpro-warning").css({top:"0px",opacity:"1"})}}userpro_overlay_center(".userpro-overlay-inner")}function userpro_client_error_irregular(e,t,n){if(e!=""&&e.data("custom-error")){n=e.data("custom-error")}if(t.find(".userpro-warning").length==0){t.append('<div class="userpro-warning"><i class="userpro-icon-caret-up"></i>'+n+"</div>");t.find(".userpro-warning").css({top:"0px",opacity:"1"})}userpro_overlay_center(".userpro-overlay-inner")}function userpro_client_valid(e,t){if(e.attr("type")){if(e.attr("type")=="radio"||e.attr("type")=="checkbox"){t.find(".userpro-warning").remove();e.removeClass("warning").addClass("ok")}else{t.find(".userpro-warning").remove();e.removeClass("warning").addClass("ok");if(t.find(".icon-ok").length==0){if(e.val()!=""){t.append('<div class="icon-ok"><i class="userpro-icon-ok"></i></div>')}else{t.find(".icon-ok").remove()}}}}else{t.find(".userpro-warning").remove()}userpro_overlay_center(".userpro-overlay-inner")}function userpro_clear_form(e){e.find(".userpro-warning").remove();e.find("input,select,textarea").removeClass("warning").addClass("ok")}function userpro_clear_input(e){e.parents(".userpro-input").find(".userpro-warning").remove();e.removeClass("warning")}function userpro_init_load(e){e.find("input[type=submit],input[type=button]").attr("disabled","disabled");e.parents(".userpro").find("img.userpro-loading").show().addClass("inline")}function userpro_end_load(e){jQuery(".tipsy").remove();e.find("input[type=submit],input[type=button]").removeAttr("disabled");e.parents(".userpro").find("img.userpro-loading").hide().removeClass("inline")}function userpro_overlay_confirmation(e){if(jQuery(".userpro-modal-inner").length){jQuery(".userpro-modal-inner").remove()}jQuery("body").append('<div class="userpro-modal-inner"><i class="userpro-icon-ok"></i><i class="userpro-icon-remove"></i>'+e+"</div>");jQuery(".userpro-modal-inner").css({"margin-top":"-"+jQuery(".userpro-modal-inner").innerHeight()/2+"px",opacity:1})}(function(e){function t(e,t){return typeof e=="function"?e.call(t):e}function n(e){while(e=e.parentNode){if(e==document)return true}return false}function r(t,n){this.$element=e(t);this.options=n;this.enabled=true;this.fixTitle()}r.prototype={show:function(){var n=this.getTitle();if(n&&this.enabled){var r=this.tip();r.find(".tipsy-inner")[this.options.html?"html":"text"](n);r[0].className="tipsy";r.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var i=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});var s=r[0].offsetWidth,o=r[0].offsetHeight,u=t(this.options.gravity,this.$element[0]);var a;switch(u.charAt(0)){case"n":a={top:i.top+i.height+this.options.offset,left:i.left+i.width/2-s/2};break;case"s":a={top:i.top-o-this.options.offset,left:i.left+i.width/2-s/2};break;case"e":a={top:i.top+i.height/2-o/2,left:i.left-s-this.options.offset};break;case"w":a={top:i.top+i.height/2-o/2,left:i.left+i.width+this.options.offset};break}if(u.length==2){if(u.charAt(1)=="w"){a.left=i.left+i.width/2-15}else{a.left=i.left+i.width/2-s+15}}r.css(a).addClass("tipsy-"+u);r.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+u.charAt(0);if(this.options.className){r.addClass(t(this.options.className,this.$element[0]))}if(this.options.fade){r.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity})}else{r.css({visibility:"visible",opacity:this.options.opacity})}}},hide:function(){if(this.options.fade){this.tip().stop().fadeOut(function(){e(this).remove()})}else{this.tip().remove()}},fixTitle:function(){var e=this.$element;if(e.attr("title")||typeof e.attr("original-title")!="string"){e.attr("original-title",e.attr("title")||"").removeAttr("title")}},getTitle:function(){var e,t=this.$element,n=this.options;this.fixTitle();var e,n=this.options;if(typeof n.title=="string"){e=t.attr(n.title=="title"?"original-title":n.title)}else if(typeof n.title=="function"){e=n.title.call(t[0])}e=(""+e).replace(/(^\s*|\s*$)/,"");return e||n.fallback},tip:function(){if(!this.$tip){this.$tip=e('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>');this.$tip.data("tipsy-pointee",this.$element[0])}return this.$tip},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled}};e.fn.tipsy=function(t){function i(n){var i=e.data(n,"tipsy");if(!i){i=new r(n,e.fn.tipsy.elementOptions(n,t));e.data(n,"tipsy",i)}return i}function s(){var e=i(this);e.hoverState="in";if(t.delayIn==0){e.show()}else{e.fixTitle();setTimeout(function(){if(e.hoverState=="in")e.show()},t.delayIn)}}function o(){var e=i(this);e.hoverState="out";if(t.delayOut==0){e.hide()}else{setTimeout(function(){if(e.hoverState=="out")e.hide()},t.delayOut)}}if(t===true){return this.data("tipsy")}else if(typeof t=="string"){var n=this.data("tipsy");if(n)n[t]();return this}t=e.extend({},e.fn.tipsy.defaults,t);if(!t.live)this.each(function(){i(this)});if(t.trigger!="manual"){var u=t.live?"live":"bind",a=t.trigger=="hover"?"mouseenter":"focus",f=t.trigger=="hover"?"mouseleave":"blur";this[u](a,s)[u](f,o)}return this};e.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:false,fallback:"",gravity:"n",html:false,live:false,offset:0,opacity:.8,title:"title",trigger:"hover"};e.fn.tipsy.revalidate=function(){e(".tipsy").each(function(){var t=e.data(this,"tipsy-pointee");if(!t||!n(t)){e(this).remove()}})};e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n};e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"};e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"};e.fn.tipsy.autoBounds=function(t,n){return function(){var r={ns:n[0],ew:n.length>1?n[1]:false},i=e(document).scrollTop()+t,s=e(document).scrollLeft()+t,o=e(this);if(o.offset().top<i)r.ns="n";if(o.offset().left<s)r.ew="w";if(e(window).width()+e(document).scrollLeft()-o.offset().left<t)r.ew="e";if(e(window).height()+e(document).scrollTop()-o.offset().top<t)r.ns="s";return r.ns+(r.ew?r.ew:"")}}})(jQuery);!function(){var e,t,n,r,i,s={}.hasOwnProperty,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};r=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,n,r,i,s,o;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),children:0,disabled:e.disabled}),s=e.childNodes,o=[],r=0,i=s.length;i>r;r++)n=s[r],o.push(this.add_option(n,t,e.disabled));return o},e.prototype.add_option=function(e,t,n){return"OPTION"===e.nodeName.toUpperCase()?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:n===!0?n:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e.prototype.escapeExpression=function(e){var t,n;return null==e||e===!1?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(n,function(e){return t[e]||"&"})):e},e}(),r.select_to_array=function(e){var t,n,i,s,o;for(n=new r,o=e.childNodes,i=0,s=o.length;s>i;i++)t=o[i],n.add_node(t);return n.parsed},t=function(){function e(t,n){this.form_field=t,this.options=null!=n?n:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},e.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},e.prototype.results_option_build=function(e){var t,n,r,i,s;for(t="",s=this.results_data,r=0,i=s.length;i>r;r++)n=s[r],t+=n.group?this.result_add_group(n):this.result_add_option(n),(null!=e?e.first:void 0)&&(n.selected&&this.is_multiple?this.choice_build(n):n.selected&&!this.is_multiple&&this.single_set_selected_text(n.text));return t},e.prototype.result_add_option=function(e){var t,n;return e.search_match?this.include_option_in_results(e)?(t=[],e.disabled||e.selected&&this.is_multiple||t.push("active-result"),!e.disabled||e.selected&&this.is_multiple||t.push("disabled-result"),e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),n=""!==e.style.cssText?' style="'+e.style+'"':"",'<li class="'+t.join(" ")+'"'+n+' data-option-array-index="'+e.array_index+'">'+e.search_text+"</li>"):"":""},e.prototype.result_add_group=function(e){return e.search_match||e.group_match?e.active_options>0?'<li class="group-result">'+e.search_text+"</li>":"":""},e.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing?this.winnow_results():void 0},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h;for(this.no_results_clear(),i=0,o=this.get_search_text(),e=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),r=this.search_contains?"":"^",n=new RegExp(r+e,"i"),f=new RegExp(e,"i"),h=this.results_data,l=0,c=h.length;c>l;l++)t=h[l],t.search_match=!1,s=null,this.include_option_in_results(t)&&(t.group&&(t.group_match=!1,t.active_options=0),null!=t.group_array_index&&this.results_data[t.group_array_index]&&(s=this.results_data[t.group_array_index],0===s.active_options&&s.search_match&&(i+=1),s.active_options+=1),(!t.group||this.group_search)&&(t.search_text=t.group?t.label:t.html,t.search_match=this.search_string_match(t.search_text,n),t.search_match&&!t.group&&(i+=1),t.search_match?(o.length&&(u=t.search_text.search(f),a=t.search_text.substr(0,u+o.length)+"</em>"+t.search_text.substr(u+o.length),t.search_text=a.substr(0,u)+"<em>"+a.substr(u)),null!=s&&(s.group_match=!0)):null!=t.group_array_index&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)));return this.result_clear_highlight(),1>i&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.search_string_match=function(e,t){var n,r,i,s;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||0===e.indexOf("["))&&(r=e.replace(/\[|\]/g,"").split(" "),r.length))for(i=0,s=r.length;s>i;i++)if(n=r[i],t.test(n))return!0},e.prototype.choices_count=function(){var e,t,n,r;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,r=this.form_field.options,t=0,n=r.length;n>t;t++)e=r[t],e.selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){return e.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},e.prototype.keyup_checker=function(e){var t,n;switch(t=null!=(n=e.which)?n:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return this.is_multiple&&!this.display_selected_options&&e.selected?!1:!this.display_disabled_options&&e.disabled?!1:e.empty?!1:!0},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),e=jQuery,e.fn.extend({chosen:function(r){return t.browser_is_supported()?this.each(function(){var t,i;t=e(this),i=t.data("chosen"),"destroy"===r&&i?i.destroy():i||t.data("chosen",new n(this,r))}):this}}),n=function(t){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,t),n.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},n.prototype.set_up_html=function(){var t,n;return t=["chosen-container"],t.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),n={"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(n.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",n),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},n.prototype.register_observers=function(){var e=this;return this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){e.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)}),this.search_field.bind("blur.chosen",function(t){e.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)}),this.search_field.bind("keydown.chosen",function(t){e.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){e.input_focus(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(e){e.preventDefault()})},n.prototype.destroy=function(){return e(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},n.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},n.prototype.container_mousedown=function(t){return this.is_disabled||(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null!=t&&e(t.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},n.prototype.container_mouseup=function(e){return"ABBR"!==e.target.nodeName||this.is_disabled?void 0:this.results_reset(e)},n.prototype.search_results_mousewheel=function(e){var t,n,r;return t=-(null!=(n=e.originalEvent)?n.wheelDelta:void 0)||(null!=(r=e.originialEvent)?r.detail:void 0),null!=t?(e.preventDefault(),"DOMMouseScroll"===e.type&&(t=40*t),this.search_results.scrollTop(t+this.search_results.scrollTop())):void 0},n.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},n.prototype.close_field=function(){return e(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(t){return this.container.is(e(t.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=r.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},n.prototype.result_do_highlight=function(e){var t,n,r,i,s;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),r=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),i=r+s,n=this.result_highlight.position().top+this.search_results.scrollTop(),t=n+this.result_highlight.outerHeight(),t>=i)return this.search_results.scrollTop(t-r>0?t-r:0);if(s>n)return this.search_results.scrollTop(n)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},n.prototype.update_results_content=function(e){return this.search_results.html(e)},n.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},n.prototype.set_tab_index=function(){var e;return this.form_field.tabIndex?(e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e):void 0},n.prototype.set_label_behavior=function(){var t=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}):void 0},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(t){var n;return n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),n.length?(this.result_highlight=n,this.result_select(t),this.search_field.focus()):void 0},n.prototype.search_results_mouseover=function(t){var n;return n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),n?this.result_do_highlight(n):void 0},n.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},n.prototype.choice_build=function(t){var n,r,i=this;return n=e("<li />",{"class":"search-choice"}).html("<span>"+t.html+"</span>"),t.disabled?n.addClass("search-choice-disabled"):(r=e("<a />",{"class":"search-choice-close","data-option-array-index":t.array_index}),r.bind("click.chosen",function(e){return i.choice_destroy_link_click(e)}),n.append(r)),this.search_container.before(n)},n.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),t.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(e(t.target))},n.prototype.choice_destroy=function(e){return this.result_deselect(e[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()):void 0},n.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},n.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},n.prototype.result_select=function(e){var t,n,r;return this.result_highlight?(t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):(this.result_single_selected&&(this.result_single_selected.removeClass("result-selected"),r=this.result_single_selected[0].getAttribute("data-option-array-index"),this.results_data[r].selected=!1),this.result_single_selected=t),t.addClass("result-selected"),n=this.results_data[t[0].getAttribute("data-option-array-index")],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(n):this.single_set_selected_text(n.text),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},n.prototype.single_set_selected_text=function(e){return null==e&&(e=this.default_text),e===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(e)},n.prototype.result_deselect=function(e){var t;return t=this.results_data[e],this.form_field.options[t.options_index].disabled?!1:(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},n.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html()},n.prototype.winnow_results_set_highlight=function(){var e,t;return t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first(),null!=e?this.result_do_highlight(e):void 0},n.prototype.no_results=function(t){var n;return n=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(t),this.search_results.append(n)},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var e;return this.results_showing&&this.result_highlight?(e=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(e):void 0:this.results_show()},n.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},n.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last(),e.length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(e){var t,n;switch(t=null!=(n=e.which)?n:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},n.prototype.search_field_scale=function(){var t,n,r,i,s,o,u,f,l;if(this.is_multiple){for(r=0,u=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],f=0,l=o.length;l>f;f++)i=o[f],s+=i+":"+this.search_field.css(i)+";";return t=e("<div />",{style:s}),t.text(this.search_field.val()),e("body").append(t),u=t.width()+25,t.remove(),n=this.container.outerWidth(),u>n-10&&(u=n-10),this.search_field.css({width:u+"px"})}},n}(t)}.call(this);(function(e,t,n){"use strict";var r=e.document,i=e.Modernizr,s=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},o="Moz Webkit O Ms".split(" "),u=function(e){var t=r.documentElement.style,n;if(typeof t[e]=="string")return e;e=s(e);for(var i=0,u=o.length;i<u;i++){n=o[i]+e;if(typeof t[n]=="string")return n}},a=u("transform"),f=u("transitionProperty"),l={csstransforms:function(){return!!a},csstransforms3d:function(){var e=!!u("perspective");if(e){var n=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),r="@media ("+n.join("transform-3d),(")+"modernizr)",i=t("<style>"+r+"{#modernizr{height:3px}}"+"</style>").appendTo("head"),s=t('<div id="modernizr" />').appendTo("html");e=s.height()===3,s.remove(),i.remove()}return e},csstransitions:function(){return!!f}},c;if(i)for(c in l)i.hasOwnProperty(c)||i.addTest(c,l[c]);else{i=e.Modernizr={_version:"1.6ish: miniModernizr for Isotope"};var h=" ",p;for(c in l)p=l[c](),i[c]=p,h+=" "+(p?"":"no-")+c;t("html").addClass(h)}if(i.csstransforms){var d=i.csstransforms3d?{translate:function(e){return"translate3d("+e[0]+"px, "+e[1]+"px, 0) "},scale:function(e){return"scale3d("+e+", "+e+", 1) "}}:{translate:function(e){return"translate("+e[0]+"px, "+e[1]+"px) "},scale:function(e){return"scale("+e+") "}},v=function(e,n,r){var i=t.data(e,"isoTransform")||{},s={},o,u={},f;s[n]=r,t.extend(i,s);for(o in i)f=i[o],u[o]=d[o](f);var l=u.translate||"",c=u.scale||"",h=l+c;t.data(e,"isoTransform",i),e.style[a]=h};t.cssNumber.scale=!0,t.cssHooks.scale={set:function(e,t){v(e,"scale",t)},get:function(e,n){var r=t.data(e,"isoTransform");return r&&r.scale?r.scale:1}},t.fx.step.scale=function(e){t.cssHooks.scale.set(e.elem,e.now+e.unit)},t.cssNumber.translate=!0,t.cssHooks.translate={set:function(e,t){v(e,"translate",t)},get:function(e,n){var r=t.data(e,"isoTransform");return r&&r.translate?r.translate:[0,0]}}}var m,g;i.csstransitions&&(m={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd otransitionend",transitionProperty:"transitionend"}[f],g=u("transitionDuration"));var y=t.event,b=t.event.handle?"handle":"dispatch",w;y.special.smartresize={setup:function(){t(this).bind("resize",y.special.smartresize.handler)},teardown:function(){t(this).unbind("resize",y.special.smartresize.handler)},handler:function(e,t){var n=this,r=arguments;e.type="smartresize",w&&clearTimeout(w),w=setTimeout(function(){y[b].apply(n,r)},t==="execAsap"?0:100)}},t.fn.smartresize=function(e){return e?this.bind("smartresize",e):this.trigger("smartresize",["execAsap"])},t.Isotope=function(e,n,r){this.element=t(n),this._create(e),this._init(r)};var E=["width","height"],S=t(e);t.Isotope.settings={resizable:!0,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:{opacity:0,scale:.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:"relative",overflow:"hidden"},animationEngine:"best-available",animationOptions:{queue:!1,duration:800},sortBy:"original-order",sortAscending:!0,resizesContainer:!0,transformsEnabled:!0,itemPositionDataEnabled:!1},t.Isotope.prototype={_create:function(e){this.options=t.extend({},t.Isotope.settings,e),this.styleQueue=[],this.elemCount=0;var n=this.element[0].style;this.originalStyle={};var r=E.slice(0);for(var i in this.options.containerStyle)r.push(i);for(var s=0,o=r.length;s<o;s++)i=r[s],this.originalStyle[i]=n[i]||"";this.element.css(this.options.containerStyle),this._updateAnimationEngine(),this._updateUsingTransforms();var u={"original-order":function(e,t){return t.elemCount++,t.elemCount},random:function(){return Math.random()}};this.options.getSortData=t.extend(this.options.getSortData,u),this.reloadItems(),this.offset={left:parseInt(this.element.css("padding-left")||0,10),top:parseInt(this.element.css("padding-top")||0,10)};var a=this;setTimeout(function(){a.element.addClass(a.options.containerClass)},0),this.options.resizable&&S.bind("smartresize.isotope",function(){a.resize()}),this.element.delegate("."+this.options.hiddenClass,"click",function(){return!1})},_getAtoms:function(e){var t=this.options.itemSelector,n=t?e.filter(t).add(e.find(t)):e,r={position:"absolute"};return n=n.filter(function(e,t){return t.nodeType===1}),this.usingTransforms&&(r.left=0,r.top=0),n.css(r).addClass(this.options.itemClass),this.updateSortData(n,!0),n},_init:function(e){this.$filteredAtoms=this._filter(this.$allAtoms),this._sort(),this.reLayout(e)},option:function(e){if(t.isPlainObject(e)){this.options=t.extend(!0,this.options,e);var n;for(var r in e)n="_update"+s(r),this[n]&&this[n]()}},_updateAnimationEngine:function(){var e=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,""),t;switch(e){case"css":case"none":t=!1;break;case"jquery":t=!0;break;default:t=!i.csstransitions}this.isUsingJQueryAnimation=t,this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){var e=this.usingTransforms=this.options.transformsEnabled&&i.csstransforms&&i.csstransitions&&!this.isUsingJQueryAnimation;e||(delete this.options.hiddenStyle.scale,delete this.options.visibleStyle.scale),this.getPositionStyles=e?this._translate:this._positionAbs},_filter:function(e){var t=this.options.filter===""?"*":this.options.filter;if(!t)return e;var n=this.options.hiddenClass,r="."+n,i=e.filter(r),s=i;if(t!=="*"){s=i.filter(t);var o=e.not(r).not(t).addClass(n);this.styleQueue.push({$el:o,style:this.options.hiddenStyle})}return this.styleQueue.push({$el:s,style:this.options.visibleStyle}),s.removeClass(n),e.filter(t)},updateSortData:function(e,n){var r=this,i=this.options.getSortData,s,o;e.each(function(){s=t(this),o={};for(var e in i)!n&&e==="original-order"?o[e]=t.data(this,"isotope-sort-data")[e]:o[e]=i[e](s,r);t.data(this,"isotope-sort-data",o)})},_sort:function(){var e=this.options.sortBy,t=this._getSorter,n=this.options.sortAscending?1:-1,r=function(r,i){var s=t(r,e),o=t(i,e);return s===o&&e!=="original-order"&&(s=t(r,"original-order"),o=t(i,"original-order")),(s>o?1:s<o?-1:0)*n};this.$filteredAtoms.sort(r)},_getSorter:function(e,n){return t.data(e,"isotope-sort-data")[n]},_translate:function(e,t){return{translate:[e,t]}},_positionAbs:function(e,t){return{left:e,top:t}},_pushPosition:function(e,t,n){t=Math.round(t+this.offset.left),n=Math.round(n+this.offset.top);var r=this.getPositionStyles(t,n);this.styleQueue.push({$el:e,style:r}),this.options.itemPositionDataEnabled&&e.data("isotope-item-position",{x:t,y:n})},layout:function(e,t){var n=this.options.layoutMode;this["_"+n+"Layout"](e);if(this.options.resizesContainer){var r=this["_"+n+"GetContainerSize"]();this.styleQueue.push({$el:this.element,style:r})}this._processStyleQueue(e,t),this.isLaidOut=!0},_processStyleQueue:function(e,n){var r=this.isLaidOut?this.isUsingJQueryAnimation?"animate":"css":"css",s=this.options.animationOptions,o=this.options.onLayout,u,a,f,l;a=function(e,t){t.$el[r](t.style,s)};if(this._isInserting&&this.isUsingJQueryAnimation)a=function(e,t){u=t.$el.hasClass("no-transition")?"css":r,t.$el[u](t.style,s)};else if(n||o||s.complete){var c=!1,h=[n,o,s.complete],p=this;f=!0,l=function(){if(c)return;var t;for(var n=0,r=h.length;n<r;n++)t=h[n],typeof t=="function"&&t.call(p.element,e,p);c=!0};if(this.isUsingJQueryAnimation&&r==="animate")s.complete=l,f=!1;else if(i.csstransitions){var d=0,v=this.styleQueue[0],y=v&&v.$el,b;while(!y||!y.length){b=this.styleQueue[d++];if(!b)return;y=b.$el}var w=parseFloat(getComputedStyle(y[0])[g]);w>0&&(a=function(e,t){t.$el[r](t.style,s).one(m,l)},f=!1)}}t.each(this.styleQueue,a),f&&l(),this.styleQueue=[]},resize:function(){this["_"+this.options.layoutMode+"ResizeChanged"]()&&this.reLayout()},reLayout:function(e){this["_"+this.options.layoutMode+"Reset"](),this.layout(this.$filteredAtoms,e)},addItems:function(e,t){var n=this._getAtoms(e);this.$allAtoms=this.$allAtoms.add(n),t&&t(n)},insert:function(e,t){this.element.append(e);var n=this;this.addItems(e,function(e){var r=n._filter(e);n._addHideAppended(r),n._sort(),n.reLayout(),n._revealAppended(r,t)})},appended:function(e,t){var n=this;this.addItems(e,function(e){n._addHideAppended(e),n.layout(e),n._revealAppended(e,t)})},_addHideAppended:function(e){this.$filteredAtoms=this.$filteredAtoms.add(e),e.addClass("no-transition"),this._isInserting=!0,this.styleQueue.push({$el:e,style:this.options.hiddenStyle})},_revealAppended:function(e,t){var n=this;setTimeout(function(){e.removeClass("no-transition"),n.styleQueue.push({$el:e,style:n.options.visibleStyle}),n._isInserting=!1,n._processStyleQueue(e,t)},10)},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function(e,t){this.$allAtoms=this.$allAtoms.not(e),this.$filteredAtoms=this.$filteredAtoms.not(e);var n=this,r=function(){e.remove(),t&&t.call(n.element)};e.filter(":not(."+this.options.hiddenClass+")").length?(this.styleQueue.push({$el:e,style:this.options.hiddenStyle}),this._sort(),this.reLayout(r)):r()},shuffle:function(e){this.updateSortData(this.$allAtoms),this.options.sortBy="random",this._sort(),this.reLayout(e)},destroy:function(){var e=this.usingTransforms,t=this.options;this.$allAtoms.removeClass(t.hiddenClass+" "+t.itemClass).each(function(){var t=this.style;t.position="",t.top="",t.left="",t.opacity="",e&&(t[a]="")});var n=this.element[0].style;for(var r in this.originalStyle)n[r]=this.originalStyle[r];this.element.unbind(".isotope").undelegate("."+t.hiddenClass,"click").removeClass(t.containerClass).removeData("isotope"),S.unbind(".isotope")},_getSegments:function(e){var t=this.options.layoutMode,n=e?"rowHeight":"columnWidth",r=e?"height":"width",i=e?"rows":"cols",o=this.element[r](),u,a=this.options[t]&&this.options[t][n]||this.$filteredAtoms["outer"+s(r)](!0)||o;u=Math.floor(o/a),u=Math.max(u,1),this[t][i]=u,this[t][n]=a},_checkIfSegmentsChanged:function(e){var t=this.options.layoutMode,n=e?"rows":"cols",r=this[t][n];return this._getSegments(e),this[t][n]!==r},_masonryReset:function(){this.masonry={},this._getSegments();var e=this.masonry.cols;this.masonry.colYs=[];while(e--)this.masonry.colYs.push(0)},_masonryLayout:function(e){var n=this,r=n.masonry;e.each(function(){var e=t(this),i=Math.ceil(e.outerWidth(!0)/r.columnWidth);i=Math.min(i,r.cols);if(i===1)n._masonryPlaceBrick(e,r.colYs);else{var s=r.cols+1-i,o=[],u,a;for(a=0;a<s;a++)u=r.colYs.slice(a,a+i),o[a]=Math.max.apply(Math,u);n._masonryPlaceBrick(e,o)}})},_masonryPlaceBrick:function(e,t){var n=Math.min.apply(Math,t),r=0;for(var i=0,s=t.length;i<s;i++)if(t[i]===n){r=i;break}var o=this.masonry.columnWidth*r,u=n;this._pushPosition(e,o,u);var a=n+e.outerHeight(!0),f=this.masonry.cols+1-s;for(i=0;i<f;i++)this.masonry.colYs[r+i]=a},_masonryGetContainerSize:function(){var e=Math.max.apply(Math,this.masonry.colYs);return{height:e}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}},_fitRowsLayout:function(e){var n=this,r=this.element.width(),i=this.fitRows;e.each(function(){var e=t(this),s=e.outerWidth(!0),o=e.outerHeight(!0);i.x!==0&&s+i.x>r&&(i.x=0,i.y=i.height),n._pushPosition(e,i.x,i.y),i.height=Math.max(i.y+o,i.height),i.x+=s})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return!0},_cellsByRowReset:function(){this.cellsByRow={index:0},this._getSegments(),this._getSegments(!0)},_cellsByRowLayout:function(e){var n=this,r=this.cellsByRow;e.each(function(){var e=t(this),i=r.index%r.cols,s=Math.floor(r.index/r.cols),o=(i+.5)*r.columnWidth-e.outerWidth(!0)/2,u=(s+.5)*r.rowHeight-e.outerHeight(!0)/2;n._pushPosition(e,o,u),r.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}},_straightDownLayout:function(e){var n=this;e.each(function(e){var r=t(this);n._pushPosition(r,0,n.straightDown.y),n.straightDown.y+=r.outerHeight(!0)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return!0},_masonryHorizontalReset:function(){this.masonryHorizontal={},this._getSegments(!0);var e=this.masonryHorizontal.rows;this.masonryHorizontal.rowXs=[];while(e--)this.masonryHorizontal.rowXs.push(0)},_masonryHorizontalLayout:function(e){var n=this,r=n.masonryHorizontal;e.each(function(){var e=t(this),i=Math.ceil(e.outerHeight(!0)/r.rowHeight);i=Math.min(i,r.rows);if(i===1)n._masonryHorizontalPlaceBrick(e,r.rowXs);else{var s=r.rows+1-i,o=[],u,a;for(a=0;a<s;a++)u=r.rowXs.slice(a,a+i),o[a]=Math.max.apply(Math,u);n._masonryHorizontalPlaceBrick(e,o)}})},_masonryHorizontalPlaceBrick:function(e,t){var n=Math.min.apply(Math,t),r=0;for(var i=0,s=t.length;i<s;i++)if(t[i]===n){r=i;break}var o=n,u=this.masonryHorizontal.rowHeight*r;this._pushPosition(e,o,u);var a=n+e.outerWidth(!0),f=this.masonryHorizontal.rows+1-s;for(i=0;i<f;i++)this.masonryHorizontal.rowXs[r+i]=a},_masonryHorizontalGetContainerSize:function(){var e=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:e}},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function(e){var n=this,r=this.element.height(),i=this.fitColumns;e.each(function(){var e=t(this),s=e.outerWidth(!0),o=e.outerHeight(!0);i.y!==0&&o+i.y>r&&(i.x=i.width,i.y=0),n._pushPosition(e,i.x,i.y),i.width=Math.max(i.x+s,i.width),i.y+=o})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return!0},_cellsByColumnReset:function(){this.cellsByColumn={index:0},this._getSegments(),this._getSegments(!0)},_cellsByColumnLayout:function(e){var n=this,r=this.cellsByColumn;e.each(function(){var e=t(this),i=Math.floor(r.index/r.rows),s=r.index%r.rows,o=(i+.5)*r.columnWidth-e.outerWidth(!0)/2,u=(s+.5)*r.rowHeight-e.outerHeight(!0)/2;n._pushPosition(e,o,u),r.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function(e){var n=this;e.each(function(e){var r=t(this);n._pushPosition(r,n.straightAcross.x,0),n.straightAcross.x+=r.outerWidth(!0)})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},_straightAcrossResizeChanged:function(){return!0}},t.fn.imagesLoaded=function(e){function n(){e.call(i,s)}function r(e){var i=e.target;i.src!==u&&t.inArray(i,a)===-1&&(a.push(i),--o<=0&&(setTimeout(n),s.unbind(".imagesLoaded",r)))}var i=this,s=i.find("img").add(i.filter("img")),o=s.length,u="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",a=[];return o||n(),s.bind("load.imagesLoaded error.imagesLoaded",r).each(function(){var e=this.src;this.src=u,this.src=e}),i};var x=function(t){e.console&&e.console.error(t)};t.fn.isotope=function(e,n){if(typeof e=="string"){var r=Array.prototype.slice.call(arguments,1);this.each(function(){var n=t.data(this,"isotope");if(!n){x("cannot call methods on isotope prior to initialization; attempted to call method '"+e+"'");return}if(!t.isFunction(n[e])||e.charAt(0)==="_"){x("no such method '"+e+"' for isotope instance");return}n[e].apply(n,r)})}else this.each(function(){var r=t.data(this,"isotope");r?(r.option(e),r._init(n)):t.data(this,"isotope",new t.Isotope(e,this,n))});return this}})(window,jQuery);(function(e){e.fn.uploadFile=function(t){var n=e.extend({url:"",method:"POST",enctype:"multipart/form-data",formData:null,returnType:null,allowedTypes:"*",fileName:"userpro_file",multiple:false,autoSubmit:true,showCancel:false,showAbort:false,showDone:false,showStatusAfterSuccess:true,buttonCss:false,buttonClass:false,onSubmit:function(e){},onSuccess:function(e,t){},onError:function(e,t){},uploadButtonClass:"ajax-file-upload"},t);var r="ajax-file-upload-"+e(this).attr("id");this.formGroup=r;e(this).click(function(){e.fn.uploadFile.createAjaxForm(this,r,n)});this.startUpload=function(){e("."+this.formGroup).each(function(t,n){e(this).submit()})};e(this).addClass(n.uploadButtonClass);return this};e.fn.uploadFile.createAjaxForm=function(t,n,r){var s=e("<form style='display:none;' class='"+n+"' method='"+r.method+"' action='"+r.url+"' enctype='"+r.enctype+"'></form>");var o="<input type='file' name='"+r.fileName+"'/>";if(r.multiple){if(r.fileName.indexOf("[]")!=r.fileName.length-2){r.fileName+="[]"}o="<input type='file' name='"+r.fileName+"' multiple/>"}var u=e(o).appendTo(s);var f=e("<div class='ajax-file-upload-statusbar'></div>");var l=e("").appendTo(f);var c=e("<div class='ajax-file-upload-progress'>").appendTo(f).hide();var h=e("<div class='ajax-file-upload-bar'></div>").appendTo(c);var p=e("").appendTo(f).hide();var d=e("<div class='ajax-file-upload-red'>Cancel</div>").appendTo(f).hide();var v=e("").appendTo(f).hide();e(u).change(function(){var n=r.allowedTypes.toLowerCase().split(",");var o="";var u=[];if(this.files){for(i=0;i<this.files.length;i++){var y=this.files[i].name;u.push(y);var w=y.split(".").pop().toLowerCase();if(r.allowedTypes!="*"&&jQuery.inArray(w,n)<0){alert("File type is not allowed. Allowed only: "+r.allowedTypes);e(s).remove();return}o+=y;if(this.files.length!=0){o+=""}}}else{var y=e(this).val();u.push(y);var w=y.split(".").pop().toLowerCase();if(r.allowedTypes!="*"&&jQuery.inArray(w,n)<0){alert("File type is not allowed. Allowed only: "+r.allowedTypes);e(s).remove();return}o=y}e("body").append(s);e(t).after(f);e(l).html(o);var E=null;var S={forceSync:false,data:r.formData,dataType:r.returnType,beforeSend:function(t,n){r.onSubmit.call(this,u);e(c).show();e(d).hide();e(v).hide();if(r.showAbort){e(p).show();e(p).click(function(){t.abort()})}},uploadProgress:function(t,n,r,i){var s=i+"%";e(h).width(s)},success:function(t,n,i){e(p).hide();r.onSuccess.call(this,u,t,i);if(r.showStatusAfterSuccess){if(r.showDone){e(v).show();e(v).click(function(){e(f).hide("slow")})}else{e(v).hide()}e(h).width("100%")}else{e(f).hide("slow")}e(s).remove()},error:function(t,n,i){if(t.statusText=="abort"){e(f).hide("slow")}else{r.onError.call(this,u,n,i);e(c).hide();e(f).append("<font color='red'>ERROR: "+i+"</font>")}e(p).hide();e(s).remove()}};if(r.autoSubmit){e(s).ajaxSubmit(S)}else{if(r.showCancel){e(d).show();e(d).click(function(){e(s).remove();e(f).remove()})}e(s).ajaxForm(S)}});e(u).click()};if(e.fn.ajaxForm==undefined){(function(e){function r(t){var n=t.data;if(!t.isDefaultPrevented()){t.preventDefault();e(this).ajaxSubmit(n)}}function i(t){var n=t.target;var r=e(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(i.length===0){return}n=i[0]}var s=this;s.clk=n;if(n.type=="image"){if(t.offsetX!==undefined){s.clk_x=t.offsetX;s.clk_y=t.offsetY}else{if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left;s.clk_y=t.pageY-o.top}else{s.clk_x=t.pageX-n.offsetLeft;s.clk_y=t.pageY-n.offsetTop}}}setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function s(){if(!e.fn.ajaxSubmit.debug){return}var t="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(t)}else{if(window.opera&&window.opera.postError){window.opera.postError(t)}}}var t={};t.fileapi=e("<input type='file'/>").get(0).files!==undefined;t.formdata=window.FormData!==undefined;var n=!!e.fn.prop;e.fn.attr2=function(){if(!n){return this.attr.apply(this,arguments)}var e=this.prop.apply(this,arguments);if(e&&e.jquery||typeof e==="string"){return e}return this.attr.apply(this,arguments)};e.fn.ajaxSubmit=function(r){function O(t){var n=e.param(t,r.traditional).split("&");var i=n.length;var s=[];var o,u;for(o=0;o<i;o++){n[o]=n[o].replace(/\+/g," ");u=n[o].split("=");s.push([decodeURIComponent(u[0]),decodeURIComponent(u[1])])}return s}function M(t){var n=new FormData;for(var s=0;s<t.length;s++){n.append(t[s].name,t[s].value)}if(r.extraData){var o=O(r.extraData);for(s=0;s<o.length;s++){if(o[s]){n.append(o[s][0],o[s][1])}}}r.data=null;var u=e.extend(true,{},e.ajaxSettings,r,{contentType:false,processData:false,cache:false,type:i||"POST"});if(r.uploadProgress){u.xhr=function(){var t=e.ajaxSettings.xhr();if(t.upload){t.upload.addEventListener("progress",function(e){var t=0;var n=e.loaded||e.position;var i=e.total;if(e.lengthComputable){t=Math.ceil(n/i*100)}r.uploadProgress(e,n,i,t)},false)}return t}}u.data=null;var a=u.beforeSend;u.beforeSend=function(e,t){t.data=n;if(a){a.call(this,e,t)}};return e.ajax(u)}function _(t){function C(e){var t=null;try{if(e.contentWindow){t=e.contentWindow.document}}catch(n){s("cannot get iframe.contentWindow document: "+n)}if(t){return t}try{t=e.contentDocument?e.contentDocument:e.document}catch(n){s("cannot get iframe.contentDocument: "+n);t=e.document}return t}function A(){function r(){try{var e=C(m).readyState;s("state = "+e);if(e&&e.toLowerCase()=="uninitialized"){setTimeout(r,50)}}catch(t){s("Server abort: ",t," (",t.name,")");P(N);if(S){clearTimeout(S)}S=undefined}}var t=a.attr2("target"),n=a.attr2("action");o.setAttribute("target",d);if(!i){o.setAttribute("method","POST")}if(n!=c.url){o.setAttribute("action",c.url)}if(!c.skipEncodingOverride&&(!i||/post/i.test(i))){a.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(c.timeout){S=setTimeout(function(){E=true;P(T)},c.timeout)}var u=[];try{if(c.extraData){for(var f in c.extraData){if(c.extraData.hasOwnProperty(f)){if(e.isPlainObject(c.extraData[f])&&c.extraData[f].hasOwnProperty("name")&&c.extraData[f].hasOwnProperty("value")){u.push(e('<input type="hidden" name="'+c.extraData[f].name+'">').val(c.extraData[f].value).appendTo(o)[0])}else{u.push(e('<input type="hidden" name="'+f+'">').val(c.extraData[f]).appendTo(o)[0])}}}}if(!c.iframeTarget){v.appendTo("body");if(m.attachEvent){m.attachEvent("onload",P)}else{m.addEventListener("load",P,false)}}setTimeout(r,15);try{o.submit()}catch(l){var h=document.createElement("form").submit;h.apply(o)}}finally{o.setAttribute("action",n);if(t){o.setAttribute("target",t)}else{a.removeAttr("target")}e(u).remove()}}function P(t){if(y.aborted||D){return}M=C(m);if(!M){s("cannot access response document");t=N}if(t===T&&y){y.abort("timeout");x.reject(y,"timeout");return}else{if(t==N&&y){y.abort("server abort");x.reject(y,"error","server abort");return}}if(!M||M.location.href==c.iframeSrc){if(!E){return}}if(m.detachEvent){m.detachEvent("onload",P)}else{m.removeEventListener("load",P,false)}var n="success",r;try{if(E){throw"timeout"}var i=c.dataType=="xml"||M.XMLDocument||e.isXMLDoc(M);s("isXml="+i);if(!i&&window.opera&&(M.body===null||!M.body.innerHTML)){if(--_){s("requeing onLoad callback, DOM not available");setTimeout(P,250);return}}var o=M.body?M.body:M.documentElement;y.responseText=o?o.innerHTML:null;y.responseXML=M.XMLDocument?M.XMLDocument:M;if(i){c.dataType="xml"}y.getResponseHeader=function(e){var t={"content-type":c.dataType};return t[e.toLowerCase()]};if(o){y.status=Number(o.getAttribute("status"))||y.status;y.statusText=o.getAttribute("statusText")||y.statusText}var u=(c.dataType||"").toLowerCase();var a=/(json|script|text)/.test(u);if(a||c.textarea){var f=M.getElementsByTagName("textarea")[0];if(f){y.responseText=f.value;y.status=Number(f.getAttribute("status"))||y.status;y.statusText=f.getAttribute("statusText")||y.statusText}else{if(a){var l=M.getElementsByTagName("pre")[0];var h=M.getElementsByTagName("body")[0];if(l){y.responseText=l.textContent?l.textContent:l.innerText}else{if(h){y.responseText=h.textContent?h.textContent:h.innerText}}}}}else{if(u=="xml"&&!y.responseXML&&y.responseText){y.responseXML=H(y.responseText)}}try{O=j(y,u,c)}catch(d){n="parsererror";y.error=r=d||n}}catch(d){s("error caught: ",d);n="error";y.error=r=d||n}if(y.aborted){s("upload aborted");n=null}if(y.status){n=y.status>=200&&y.status<300||y.status===304?"success":"error"}if(n==="success"){if(c.success){c.success.call(c.context,O,"success",y)}x.resolve(y.responseText,"success",y);if(p){e.event.trigger("ajaxSuccess",[y,c])}}else{if(n){if(r===undefined){r=y.statusText}if(c.error){c.error.call(c.context,y,n,r)}x.reject(y,"error",r);if(p){e.event.trigger("ajaxError",[y,c,r])}}}if(p){e.event.trigger("ajaxComplete",[y,c])}if(p&&!--e.active){e.event.trigger("ajaxStop")}if(c.complete){c.complete.call(c.context,y,n)}D=true;if(c.timeout){clearTimeout(S)}setTimeout(function(){if(!c.iframeTarget){v.remove()}y.responseXML=null},100)}var o=a[0],u,l,c,p,d,v,m,y,b,w,E,S;var x=e.Deferred();x.abort=function(e){y.abort(e)};if(t){for(l=0;l<h.length;l++){u=e(h[l]);if(n){u.prop("disabled",false)}else{u.removeAttr("disabled")}}}c=e.extend(true,{},e.ajaxSettings,r);c.context=c.context||c;d="jqFormIO"+(new Date).getTime();if(c.iframeTarget){v=e(c.iframeTarget);w=v.attr2("name");if(!w){v.attr2("name",d)}else{d=w}}else{v=e('<iframe name="'+d+'" src="'+c.iframeSrc+'" />');v.css({position:"absolute",top:"-1000px",left:"-1000px"})}m=v[0];y={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n=t==="timeout"?"timeout":"aborted";s("aborting upload... "+n);this.aborted=1;try{if(m.contentWindow.document.execCommand){m.contentWindow.document.execCommand("Stop")}}catch(r){}v.attr("src",c.iframeSrc);y.error=n;if(c.error){c.error.call(c.context,y,n,t)}if(p){e.event.trigger("ajaxError",[y,c,n])}if(c.complete){c.complete.call(c.context,y,n)}}};p=c.global;if(p&&0===e.active++){e.event.trigger("ajaxStart")}if(p){e.event.trigger("ajaxSend",[y,c])}if(c.beforeSend&&c.beforeSend.call(c.context,y,c)===false){if(c.global){e.active--}x.reject();return x}if(y.aborted){x.reject();return x}b=o.clk;if(b){w=b.name;if(w&&!b.disabled){c.extraData=c.extraData||{};c.extraData[w]=b.value;if(b.type=="image"){c.extraData[w+".x"]=o.clk_x;c.extraData[w+".y"]=o.clk_y}}}var T=1;var N=2;var k=e("meta[name=csrf-token]").attr("content");var L=e("meta[name=csrf-param]").attr("content");if(L&&k){c.extraData=c.extraData||{};c.extraData[L]=k}if(c.forceSync){A()}else{setTimeout(A,10)}var O,M,_=50,D;var H=e.parseXML||function(e,t){if(window.ActiveXObject){t=new ActiveXObject("Microsoft.XMLDOM");t.async="false";t.loadXML(e)}else{t=(new DOMParser).parseFromString(e,"text/xml")}return t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null};var B=e.parseJSON||function(e){return window["eval"]("("+e+")")};var j=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;if(s&&o.documentElement.nodeName==="parsererror"){if(e.error){e.error("parsererror")}}if(r&&r.dataFilter){o=r.dataFilter(o,n)}if(typeof o==="string"){if(n==="json"||!n&&i.indexOf("json")>=0){o=B(o)}else{if(n==="script"||!n&&i.indexOf("javascript")>=0){e.globalEval(o)}}}return o};return x}if(!this.length){s("ajaxSubmit: skipping submit process - no element selected");return this}var i,o,u,a=this;if(typeof r=="function"){r={success:r}}else{if(r===undefined){r={}}}i=r.type||this.attr2("method");o=r.url||this.attr2("action");u=typeof o==="string"?e.trim(o):"";u=u||window.location.href||"";if(u){u=(u.match(/^([^#]+)/)||[])[1]}r=e.extend(true,{url:u,success:e.ajaxSettings.success,type:i||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r);var l={};this.trigger("form-pre-serialize",[this,r,l]);if(l.veto){s("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(r.beforeSerialize&&r.beforeSerialize(this,r)===false){s("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var c=r.traditional;if(c===undefined){c=e.ajaxSettings.traditional}var h=[];var p,v=this.formToArray(r.semantic,h);if(r.data){r.extraData=r.data;p=e.param(r.data,c)}if(r.beforeSubmit&&r.beforeSubmit(v,this,r)===false){s("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[v,this,r,l]);if(l.veto){s("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var m=e.param(v,c);if(p){m=m?m+"&"+p:p}if(r.type.toUpperCase()=="GET"){r.url+=(r.url.indexOf("?")>=0?"&":"?")+m;r.data=null}else{r.data=m}var y=[];if(r.resetForm){y.push(function(){a.resetForm()})}if(r.clearForm){y.push(function(){a.clearForm(r.includeHidden)})}if(!r.dataType&&r.target){var b=r.success||function(){};y.push(function(t){var n=r.replaceTarget?"replaceWith":"html";e(r.target)[n](t).each(b,arguments)})}else{if(r.success){y.push(r.success)}}r.success=function(e,t,n){var i=r.context||this;for(var s=0,o=y.length;s<o;s++){y[s].apply(i,[e,t,n||a,a])}};if(r.error){var w=r.error;r.error=function(e,t,n){var i=r.context||this;w.apply(i,[e,t,n,a])}}if(r.complete){var E=r.complete;r.complete=function(e,t){var n=r.context||this;E.apply(n,[e,t,a])}}var S=e('input[type=file]:enabled:not([value=""])',this);var x=S.length>0;var T="multipart/form-data";var N=a.attr("enctype")==T||a.attr("encoding")==T;var C=t.fileapi&&t.formdata;s("fileAPI :"+C);var k=(x||N)&&!C;var L;if(r.iframe!==false&&(r.iframe||k)){if(r.closeKeepAlive){e.get(r.closeKeepAlive,function(){L=_(v)})}else{L=_(v)}}else{if((x||N)&&C){L=M(v)}else{L=e.ajax(r)}}a.removeData("jqxhr").data("jqxhr",L);for(var A=0;A<h.length;A++){h[A]=null}this.trigger("form-submit-notify",[this,r]);return this};e.fn.ajaxForm=function(t){t=t||{};t.delegation=t.delegation&&e.isFunction(e.fn.on);if(!t.delegation&&this.length===0){var n={s:this.selector,c:this.context};if(!e.isReady&&n.s){s("DOM not ready, queuing ajaxForm");e(function(){e(n.s,n.c).ajaxForm(t)});return this}s("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)"));return this}if(t.delegation){e(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,t,r).on("click.form-plugin",this.selector,t,i);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",t,r).bind("click.form-plugin",t,i)};e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};e.fn.formToArray=function(n,r){var i=[];if(this.length===0){return i}var s=this[0];var o=n?s.getElementsByTagName("*"):s.elements;if(!o){return i}var u,a,f,l,c,h,p;for(u=0,h=o.length;u<h;u++){c=o[u];f=c.name;if(!f||c.disabled){continue}if(n&&s.clk&&c.type=="image"){if(s.clk==c){i.push({name:f,value:e(c).val(),type:c.type});i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y})}continue}l=e.fieldValue(c,true);if(l&&l.constructor==Array){if(r){r.push(c)}for(a=0,p=l.length;a<p;a++){i.push({name:f,value:l[a]})}}else{if(t.fileapi&&c.type=="file"){if(r){r.push(c)}var v=c.files;if(v.length){for(a=0;a<v.length;a++){i.push({name:f,value:v[a],type:c.type})}}else{i.push({name:f,value:"",type:c.type})}}else{if(l!==null&&typeof l!="undefined"){if(r){r.push(c)}i.push({name:f,value:l,type:c.type,required:c.required})}}}}if(!n&&s.clk){var m=e(s.clk),y=m[0];f=y.name;if(f&&!y.disabled&&y.type=="image"){i.push({name:f,value:m.val()});i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y})}}return i};e.fn.formSerialize=function(t){return e.param(this.formToArray(t))};e.fn.fieldSerialize=function(t){var n=[];this.each(function(){var r=this.name;if(!r){return}var i=e.fieldValue(this,t);if(i&&i.constructor==Array){for(var s=0,o=i.length;s<o;s++){n.push({name:r,value:i[s]})}}else{if(i!==null&&typeof i!="undefined"){n.push({name:this.name,value:i})}}});return e.param(n)};e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r];var o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length){continue}if(o.constructor==Array){e.merge(n,o)}else{n.push(o)}}return n};e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();if(n===undefined){n=true}if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1)){return null}if(s=="select"){var o=t.selectedIndex;if(o<0){return null}var u=[],a=t.options;var f=i=="select-one";var l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;if(!p){p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value}if(f){return p}u.push(p)}}return u}return e(t).val()};e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})};e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();if(n.test(r)||i=="textarea"){this.value=""}else{if(r=="checkbox"||r=="radio"){this.checked=false}else{if(i=="select"){this.selectedIndex=-1}else{if(r=="file"){if(/MSIE/.test(navigator.userAgent)){e(this).replaceWith(e(this).clone(true))}else{e(this).val("")}}else{if(t){if(t===true&&/hidden/.test(r)||typeof t=="string"&&e(this).is(t)){this.value=""}}}}}}})};e.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType){this.reset()}})};e.fn.enable=function(e){if(e===undefined){e=true}return this.each(function(){this.disabled=!e})};e.fn.selected=function(t){if(t===undefined){t=true}return this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio"){this.checked=t}else{if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");if(t&&r[0]&&r[0].type=="select-one"){r.find("option").selected(false)}this.selected=t}}})};e.fn.ajaxSubmit.debug=false})(typeof jQuery!="undefined"?jQuery:window.Zepto)}})(jQuery);jQuery(document).ready(function(){jQuery(document).on("click",function(){if(jQuery(".userpro-modal-inner").length>0){jQuery(".userpro-modal-inner").remove()}});jQuery(document).on("click","div.userpro-modal-inner i.userpro-icon-remove",function(e){jQuery(".userpro-modal-inner").remove()});jQuery(document).on("click",".userpro-bar-success i, .userpro-bar-failed i",function(e){jQuery(this).parent().slideToggle("fast")});jQuery(document).on("mouseenter",".userpro-field",function(e){if(jQuery(this).find(".userpro-field-icon").length){jQuery(this).find(".userpro-field-icon").addClass("icon-active")}});jQuery(document).on("mouseleave",".userpro-field",function(e){if(jQuery(this).find(".userpro-field-icon").length){jQuery(this).find(".userpro-field-icon").removeClass("icon-active")}});jQuery(document).on("click","a.userpro-alert-close",function(e){jQuery(this).parents(".userpro-alert").slideUp(200)});jQuery(document).on("mouseenter",".userpro-online-i",function(e){jQuery(this).find(".userpro-online-i-thumb").fadeTo("fast",.7)});jQuery(document).on("mouseleave",".userpro-online-i",function(e){jQuery(this).find(".userpro-online-i-thumb").fadeTo("fast",1)});jQuery(document).on("mouseenter",".userpro-post:not(.userpro-post-compact)",function(e){jQuery(this).find("span.shadowed").stop().animate({height:"100%"},function(){jQuery(this).parent().find("span.iconed").fadeIn("slow")})});jQuery(document).on("mouseleave",".userpro-post:not(.userpro-post-compact)",function(e){jQuery(this).find("span.iconed").hide();jQuery(this).find("span.shadowed").stop().animate({height:"0"},200)});jQuery(document).on("click",".userpro-alert-edit",function(e){jQuery(".userpro-alert-input").fadeIn()});jQuery(document).on("click",".userpro-alert input[type=button]",function(e){var t=jQuery(this).parents(".userpro-alert");var n=jQuery(this).parents(".userpro-alert").find(".userpro-alert-content");var r=jQuery(this).parents(".userpro-alert").find("input[type=text]").val();var i=jQuery(this).parents(".userpro-alert").data("user_id");jQuery.ajax({url:userpro_ajax_url,data:"action=userpro_save_userdata&field=userpro_alert&value="+r+"&user_id="+i,dataType:"JSON",type:"POST",success:function(e){if(n.length==0){t.prepend('<div class="userpro-alert-content">'+e.res+"</div>")}else{n.html(e.res)}t.find(".userpro-alert-input").fadeOut()}})});jQuery(document).on("click",".userpro-social-facebook",function(e){Login(jQuery(this))});jQuery(document).on("click","*[class^='popup-'], a[href='#']",function(e){e.preventDefault();return false});jQuery(document).on("click",".userpro-overlay, a.userpro-close-popup",function(e){jQuery(".userpro-overlay").fadeOut(function(){jQuery(".userpro-overlay").remove()});jQuery(".userpro-overlay-inner").fadeOut(function(){jQuery(".userpro-overlay-inner").remove()})});jQuery(document).on("submit",".userpro form:not(.userpro-search-form)",function(e){e.preventDefault();return false});jQuery(document).on("mouseenter",".userpro-user",function(e){if(jQuery(this).data("pic_size")>100){jQuery(this).find("span").animate({top:0},200)}else{jQuery(this).find("a.userpro-user-img").fadeTo("fast",.7)}jQuery(this).find(".userpro-user-link").css({opacity:1})});jQuery(document).on("mouseleave",".userpro-user",function(e){if(jQuery(this).data("pic_size")>100){jQuery(this).find("span").animate({top:"-"+jQuery(this).parents(".userpro").data("memberlist_pic_size")+"px"},50)}else{jQuery(this).find("a.userpro-user-img").fadeTo(1,1)}jQuery(this).find(".userpro-user-link").css({opacity:0})});jQuery(document).on("click","a,input",function(e){if(jQuery(this).data("template")){form_data=jQuery(this).parents(".userpro").data();var t=jQuery(".userpro").length;shortcode="[userpro id="+t;jQuery.each(form_data,function(e,t){shortcode=shortcode+" "+e+"="+'"'+t+'"'});shortcode=shortcode+"]";shortcode=shortcode.replace(/(template=)"(.*?)"/,'template="'+jQuery(this).data("template")+'"');if(jQuery(this).data("up_username")){up_username=jQuery(this).data("up_username")}else{up_username=0}if(jQuery(this).data("force_redirect_uri")){force_redirect_uri=jQuery(this).data("force_redirect_uri")}else{force_redirect_uri=0}post_id=jQuery(this).parents(".userpro").data("post_id");userpro_shortcode_template("update",jQuery(this).parents(".userpro"),shortcode,up_username,force_redirect_uri,post_id)}});jQuery(".userpro-clear-search").click(function(){var e=jQuery(this).parents(".userpro-search-form");e.find("input[type=text]").val("");e.find("select").val("");e.trigger("submit")});jQuery(document).on("submit",".userpro form:not(.userpro-search-form)",function(e){var t=jQuery(this);if(t.data("action")!="login"&&t.data("action")!="reset"&&t.data("action")!="delete"){t.find("input,textarea").each(function(){jQuery(this).trigger("blur")});t.find("select").each(function(){jQuery(this).trigger("change")});t.find("select[data-required=1]").each(function(){if(!jQuery(this).val()){userpro_client_error_irregular(jQuery(this),jQuery(this).parents(".userpro-input"),jQuery(this).parents(".userpro").data("required_text"))}else{userpro_client_valid(jQuery(this).find("select"),jQuery(this).parents(".userpro-input"))}});t.find(".userpro-radio-wrap[data-required=1]").each(function(){if(!jQuery(this).find("input:radio").is(":checked")){userpro_client_error_irregular("",jQuery(this).parents(".userpro-input"),jQuery(this).parents(".userpro").data("required_text"))}else{userpro_client_valid(jQuery(this).find("input:radio"),jQuery(this).parents(".userpro-input"))}});t.find(".userpro-checkbox-wrap[data-required=1]").each(function(){if(!jQuery(this).find("input:checkbox").is(":checked")){userpro_client_error_irregular("",jQuery(this).parents(".userpro-input"),jQuery(this).parents(".userpro").data("required_text"))}else{userpro_client_valid(jQuery(this).find("input:checkbox"),jQuery(this).parents(".userpro-input"))}});t.find(".userpro-maxwidth[data-required=1]").each(function(){if(!jQuery(this).find("input:checkbox").is(":checked")){userpro_client_error_irregular("",jQuery(this).find(".userpro-input"),jQuery(this).data("required_msg"))}else{userpro_client_valid(jQuery(this).find("input:checkbox"),jQuery(this).find(".userpro-input"))}});if(t.find(".userpro-warning").length>0){t.find(".userpro-section").each(function(){jQuery(this).find(".userpro-section-warning").remove();if(jQuery(this).nextUntil("div.userpro-column").find(".userpro-warning").length>0){jQuery(this).css({display:"block"});jQuery(this).append('<ins class="userpro-section-warning">Please correct fields</ins>');jQuery(this).find(".userpro-section-warning").fadeIn()}});t.find(".userpro-warning:first").parents(".userpro-input").find("input").focus();return false}else{t.find(".userpro-section").each(function(){jQuery(this).find(".userpro-section-warning").remove()})}}else{userpro_clear_form(t)}userpro_init_load(t);form_data=jQuery(this).parents(".userpro").data();shortcode="[userpro";jQuery.each(form_data,function(e,t){shortcode=shortcode+" "+e+"="+'"'+t+'"'});shortcode=shortcode+"]";if(jQuery(this).parents(".userpro").find(".userpro-profile-img-btn a").data("up_username")){up_username=jQuery(this).parents(".userpro").find(".userpro-profile-img-btn a").data("up_username")}else{up_username=0}jQuery.ajax({url:userpro_ajax_url,data:t.serialize()+"&action=userpro_process_form&template="+form_data["template"]+"&group="+form_data[form_data["template"]+"_group"]+"&shortcode="+shortcode+"&up_username="+up_username,dataType:"JSON",type:"POST",error:function(e,n,r){userpro_end_load(t);alert(r)},success:function(e){userpro_end_load(t);if(e&&e.error){var n=0;jQuery.each(e.error,function(e,r){n++;element=t.find('.userpro-field[data-key="'+e+'"]').find("input");parent=element.parents(".userpro-input");if(element.attr("type")=="radio"||element.attr("type")=="checkbox"){userpro_client_error_irregular(element,parent,r)}else{if(n==1)element.focus();userpro_client_error(element,parent,r)}if(e=="userpro_editor"){if(t.find(".userpro-field-editor .userpro-input").find(".userpro-warning").length){t.find(".userpro-field-editor .userpro-input").find(".userpro-warning").html(r);t.find(".userpro-field-editor .userpro-input").find(".userpro-warning").css({top:"0px",opacity:"1"})}else{t.find(".userpro-field-editor .userpro-input").append('<div class="userpro-warning"><i class="userpro-icon-caret-up"></i>'+r+"</div>");t.find(".userpro-field-editor .userpro-input").find(".userpro-warning").css({top:"0px",opacity:"1"})}}})}if(e&&e.custom_message&&e.custom_message!=""){t.parents(".userpro").find(".userpro-body").find(".userpro-message").remove();t.parents(".userpro").find(".userpro-body").prepend(e.custom_message)}if(e&&e.redirect_uri&&e.redirect_uri!=""){if(e.redirect_uri=="refresh"){document.location.href=jQuery(location).attr("href")}else{document.location.href=e.redirect_uri}}if(form_data["template"]=="publish"&&e.modal_msg){userpro_overlay_confirmation(e.modal_msg)}if(e&&e.template&&e.template!=""){t.parents(".userpro").replaceWith(e.template);if(form_data["template"]=="edit"){userpro_overlay_confirmation(t.parents(".userpro").data("modal_profile_saved"))}}if(!e&&!e.error&&form_data["template"]=="publish"){t.find("input,textarea").not("input[type=submit],input[type=hidden],input[type=button]").val("");t.find("div.userpro-pic-post_featured_image img").addClass("no_feature");t.find(".userpro-button.red").remove();t.find(".icon-ok").remove()}userpro_responsive();userpro_chosen();userpro_fluid_videos();userpro_ajax_picupload();jQuery(".userpro form").each(function(){userpro_collapse(jQuery(this))});userpro_overlay_center(".userpro-overlay-inner")}})});jQuery(document).on("blur",".userpro[data-template=publish] textarea, .userpro[data-template=publish] input, .userpro[data-template=register] input, .userpro[data-template=edit] input, .userpro[data-template=change] input",function(e){var t=jQuery(this);var n=t.parents(".userpro-input");var r=t.data("required");var i=t.data("ajaxcheck");var s=t.parents(".userpro").find("input[type=password]:first");var o=t.parents(".userpro").find("input[type=password]:first").val();if(r==1){if(t.val().replace(/^\s+|\s+$/g,"").length==0){userpro_client_error(t,n,t.parents(".userpro").data("required_text"))}else if(i){userpro_side_validate(t,t.val(),i)}else{userpro_client_valid(t,n)}if(jQuery(this).attr("type")=="password"){if(t.val().replace(/^\s+|\s+$/g,"").length==0){userpro_client_error(t,n,t.parents(".userpro").data("required_text"))}else if(t.val().length<8){userpro_client_error(t,n,t.parents(".userpro").data("password_too_short"))}else if(userpro_password_strength_meter(t)<3){userpro_client_error(t,n,t.parents(".userpro").data("password_not_strong"))}else{userpro_client_valid(t,n)}}}else if(t.attr("type")=="password"&&s&&o&&s.parents(".userpro-input").find(".userpro-warning").length==0){if(t.val().replace(/^\s+|\s+$/g,"").length==0){userpro_client_error(t,n,t.parents(".userpro").data("required_text"))}else if(t.val().length<8){userpro_client_error(t,n,t.parents(".userpro").data("password_too_short"))}else if(userpro_password_strength_meter(t)<3){userpro_client_error(t,n,t.parents(".userpro").data("password_not_strong"))}else if(o!=t.val()){userpro_client_error(t,n,jQuery(this).parents(".userpro").data("passwords_do_not_match"))}else{userpro_client_valid(t,n)}}else if(t.attr("type")=="password"&&o||t.attr("type")=="password"&&t.parents(".userpro").data("template")=="change"){if(t.val().replace(/^\s+|\s+$/g,"").length==0){userpro_client_error(t,n,t.parents(".userpro").data("required_text"))}else if(t.val().length<8){userpro_client_error(t,n,t.parents(".userpro").data("password_too_short"))}else if(userpro_password_strength_meter(t)<3){userpro_client_error(t,n,t.parents(".userpro").data("password_not_strong"))}else if(o!=t.val()){userpro_client_error(t,n,jQuery(this).parents(".userpro").data("passwords_do_not_match"))}else{userpro_client_valid(t,n)}}else if(t.attr("type")=="password"&&o==""&&t.val()==""){userpro_clear_input(t)}else if(i&&t.val()){userpro_side_validate(t,t.val(),i)}else if(i&&!t.val()){userpro_clear_input(t)}else if(t.val()&&t.data("type")=="antispam"){userpro_clear_input(t)}else if(!i&&t.attr("type")=="text"){userpro_clear_input(t)}});jQuery(document).on("change",".userpro[data-template=register] select",function(e){var t=jQuery(this);var n=t.parents(".userpro-input");var r=t.data("required");if(r==1){if(t.val()==0){userpro_client_error(t,n,t.parents(".userpro").data("required_text"))}else{userpro_client_valid(t,n)}}});jQuery(document).on("keyup keydown",".userpro[data-template=register] input[type=password][data-required=1]",function(e){userpro_password_strength_meter(jQuery(this))});jQuery(document).on("keyup keydown",".userpro[data-template=edit] input[type=password]:first",function(e){userpro_password_strength_meter(jQuery(this))});jQuery(document).on("keyup keydown",".userpro[data-template=change] input[type=password]:first",function(e){userpro_password_strength_meter(jQuery(this))});jQuery(document).on("click",".userpro-collapsible-1",function(e){if(jQuery(this).nextUntil("div.userpro-column").is(":hidden")){jQuery(this).nextUntil("div.userpro-column").show();jQuery(this).removeClass("userpro-collapsed-1").addClass("userpro-collapsed-0");jQuery(this).find("span").html('<i class="userpro-icon-angle-down"></i>');if(jQuery(this).parents(".userpro").data("keep_one_section_open")==1){jQuery(".userpro-collapsible-1.userpro-collapsed-0").not(this).nextUntil("div.userpro-column").hide();jQuery(".userpro-collapsible-1.userpro-collapsed-0").not(this).find("span").html('<i class="userpro-icon-angle-right"></i>');jQuery(".userpro-collapsible-1.userpro-collapsed-0").not(this).removeClass("userpro-collapsed-0").addClass("userpro-collapsed-1")}}else{jQuery(this).nextUntil("div.userpro-column").hide();jQuery(this).find("span").html('<i class="userpro-icon-angle-right"></i>');jQuery(this).removeClass("userpro-collapsed-0").addClass("userpro-collapsed-1")}userpro_overlay_center(".userpro-overlay-inner")});jQuery(document).on("click","*[class^='popup-'],*[class^='popup-'] a",function(e){var t="";if(jQuery(this).data("up_username")){t=jQuery(this).data("up_username")}if(/popup/.test(jQuery(this).attr("class"))==false){var n=jQuery(this).parents("li").attr("class").split("-")[1].match(/\w*/)}else{var n=jQuery(this).attr("class").split("-")[1].match(/\w*/)}var r=jQuery(".userpro").length;shortcode="[userpro id="+r+" template="+n+"";jQuery.each(jQuery(this).data(),function(e,t){shortcode=shortcode+" "+e+"="+'"'+t+'"'});shortcode=shortcode+"]";if(jQuery("body").find(".userpro-overlay").length==0){jQuery("body").append('<div class="userpro-overlay"/><div class="userpro-overlay-inner"/>');jQuery("body").append('<div id="spinner" class="spinner"></div>')}userpro_shortcode_template("insert",jQuery(".userpro-overlay-inner"),shortcode,t);if(n=="request_verify"){jQuery(".popup-request_verify").remove()}});jQuery(document).on("change","input[name^='gender']",function(e){this_form=jQuery(this).parents(".userpro");if(this_form.find("*[data-key=profilepicture]").find("input:hidden").val()==""){this_form.find("*[data-key=profilepicture]").find("img").attr("src",jQuery(this).parents(".userpro").data("default_avatar_"+jQuery(this).val().toLowerCase()))}});jQuery(window).smartresize(function(){userpro_overlay_center(".userpro-overlay-inner");userpro_responsive();userpro_fluid_videos()});userpro_responsive();setTimeout(function(){userpro_fluid_videos()},3e3);userpro_chosen();userpro_ajax_picupload();jQuery(".userpro form").each(function(){userpro_collapse(jQuery(this))});jQuery(document).on("click",".userpro form:not(.userpro-search-form) .userpro-input .userpro-button.red",function(e){jQuery(this).parents(".userpro-input").find(".userpro-pic-none").show();if(jQuery(this).parents(".userpro-input").find("img.default").length){jQuery(this).parents(".userpro-input").find("img.default").show();jQuery(this).parents(".userpro-input").find("img.modified").remove()}else{if(jQuery(this).parents(".userpro").find("div.userpro-pic-post_featured_image").length){jQuery(this).parents(".userpro-input").find("img.modified").addClass("no_feature").attr("src",jQuery(this).parents(".userpro-input").data("placeholder"))}else{jQuery(this).parents(".userpro-input").find("img.modified").attr("src","")}}if(jQuery(this).parents(".userpro-input").find(".userpro-file-input").length){jQuery(this).parents(".userpro-input").find(".userpro-file-input").remove()}jQuery(this).parents(".userpro-input").find("input:hidden").val("");jQuery(this).fadeOut();jQuery(this).parents(".userpro-input").find("input:hidden").each(function(){jQuery(this).trigger("blur")})});jQuery(document).on("click",".userpro input[type=radio]",function(e){var t=jQuery(this).parents(".userpro-input");t.find("span").removeClass("checked");jQuery(this).parents("label").find("span").addClass("checked")});jQuery(document).on("change",".userpro input[type=checkbox]",function(e){if(jQuery(this).is(":checked")){jQuery(this).parents("label").find("span").addClass("checked")}else{jQuery(this).parents("label").find("span").removeClass("checked")}});jQuery(document).on("click",".userpro-warning",function(e){jQuery(this).parents(".userpro-input").find("input").focus()})});

// Userpro Social
jQuery(document).ready(function(){jQuery(document).on("click",".userpro-sc-refresh",function(e){var t=jQuery(this).parents(".userpro");var n=jQuery(this);var r=t.find("img.userpro-sc-refresh-loader");var i=t.data("activity_per_page");var s=t.data("activity_user");var o=0;if(t.find(".userpro-sc-load").data("user_id")){var u=t.find(".userpro-sc-load").data("user_id")}else{var u=0}n.hide();r.show();jQuery.ajax({url:userpro_ajax_url,data:"action=userpro_sc_refreshactivity&per_page="+i+"&offset="+o+"&user_id="+u+"&activity_user="+s,dataType:"JSON",type:"POST",success:function(e){if(e.res!=""){t.find(".userpro-sc").remove();t.find(".userpro-body-nopad").prepend(e.res);n.show();r.hide()}else{n.show();r.hide()}userpro_chosen()}})});jQuery(document).on("click",".userpro-sc-load a",function(e){var t=jQuery(this).parents(".userpro-body");var n=jQuery(this);var r=jQuery(this).parents(".userpro-sc-load").find("img");var i=jQuery(this).data("activity_per_page");var s=jQuery(this).data("activity_user");var o=jQuery(this).parents(".userpro").find(".userpro-sc").length;if(n.parents(".userpro-sc-load").data("user_id")){var u=n.parents(".userpro-sc-load").data("user_id")}else{var u=0}n.hide();r.show();jQuery.ajax({url:userpro_ajax_url,data:"action=userpro_sc_loadactivity&per_page="+i+"&offset="+o+"&user_id="+u+"&activity_user="+s,dataType:"JSON",type:"POST",success:function(e){if(e.res!=""){t.find(".userpro-sc:last").after(e.res);n.show();r.hide()}else{n.show();r.hide()}userpro_chosen()}})});jQuery(document).on("click",".userpro-follow.notfollowing:not(.processing)",function(e){jQuery(this).addClass("processing");var t=jQuery(this).data("follow-from");var n=jQuery(this).data("follow-to");jQuery(this).addClass("following").removeClass(".notfollowing").removeClass("secondary").html(jQuery(this).data("following-text"));jQuery(this).removeClass("processing");jQuery.ajax({url:userpro_ajax_url,data:"action=userpro_sc_follow&to="+n+"&from="+t,dataType:"JSON",type:"POST",success:function(e){},error:function(){}})});jQuery(document).on("mouseenter",".userpro-follow.following",function(e){jQuery(this).addClass("red").removeClass("secondary").html(jQuery(this).data("unfollow-text"))});jQuery(document).on("mouseleave",".userpro-follow.following",function(e){jQuery(this).removeClass("red").html(jQuery(this).data("following-text"))});jQuery(document).on("click",".userpro-follow.following:not(.processing)",function(e){jQuery(this).addClass("processing");var t=jQuery(this).data("follow-from");var n=jQuery(this).data("follow-to");jQuery(this).removeClass("following").addClass("notfollowing").removeClass("red").addClass("secondary").html('<i class="userpro-icon-share"></i>'+jQuery(this).data("follow-text"));jQuery(this).removeClass("processing");jQuery.ajax({url:userpro_ajax_url,data:"action=userpro_sc_unfollow&to="+n+"&from="+t,dataType:"JSON",type:"POST",success:function(e){},error:function(){}})})});

// Userpro ED
jQuery(document).ready(function(){jQuery(document).on("click",".emd-filters input[type=radio]",function(e){var t=jQuery(this).parents(".emd-filter");t.find("span").removeClass("checked");jQuery(this).parents("label").find("span").addClass("checked")});jQuery(document).on("change",".emd-filters input[type=checkbox]",function(e){if(jQuery(this).is(":checked")){jQuery(this).parents("label").find("span").addClass("checked")}else{jQuery(this).parents("label").find("span").removeClass("checked")}});jQuery(".emd-list").imagesLoaded(function(){jQuery(this).isotope({itemSelector:".emd-user",layoutMode:"masonry"})})});

/* <![CDATA[ */
var wpmudev_chat_localized = {"settings":{"ajax_url":"\/gv\/wp-admin\/admin-ajax.php","plugin_url":"http:\/\/localhost\/gv\/wp-content\/plugins\/wordpress-chat\/","google_plus_text_sign_out":"Sign out of Google+","facebook_text_sign_out":"Sign out of Facebook","twitter_text_sign_out":"Sign out of Twitter","please_wait":"Please wait...","row_delete_text":"hide","row_undelete_text":"unhide","user_entered_chat":"Entered Chat","user_exited_chat":"Exited Chat","user_pending_chat":"Pending","user_declined_chat":"Declined","wp_is_mobile":false,"twitter_active":false,"facebook_active":false,"google_plus_active":false,"session_poll_interval_messages":"1","session_poll_interval_invites":"3","session_poll_interval_meta":"5","session_poll_interval_users":5,"cookiepath":"\/gv\/","cookie_domain":false,"REQUEST_URI":"L2d2L2Jvb2ttYXJrbGlzdHMv","is_admin":false,"soundManager-js":"http:\/\/localhost\/gv\/wp-content\/plugins\/wordpress-chat\/js\/buzz.js","box_resizable":false},"sessions":{"bottom_corner":{"id":"bottom_corner","blog_id":1,"session_type":"site","session_status":"open","blocked_ip_addresses_active":"enabled","blocked_words_active":"disabled","session_status_message":"The Moderator has closed this chat session","session_cleared_message":"The Moderator has cleared the chat messages","box_title":"Chat","box_width":"250px","box_width_mobile_adjust":"window","box_height":"90%","box_height_mobile_adjust":"window","box_class":"","box_sound":"enabled","box_popout":"disabled","box_moderator_footer":"enabled","box_input_position":"bottom","box_send_button_enable":"disabled","box_send_button_position":"below","box_send_button_label":"Send","box_font_family":"","box_font_size":"","box_text_color":"#000000","box_background_color":"#CCCCCC","box_border_color":"#CCCCCC","box_border_width":"1px","box_emoticons":"enabled","row_name_avatar":"name-avatar","row_avatar_width":"40px","row_date":"disabled","row_date_format":"F j, Y","row_time":"disabled","row_time_format":"g:i a","row_area_background_color":"#FFFFFF","row_background_color":"#FFFFFF","row_border_color":"#CCCCCC","row_border_width":"0px","row_spacing":"0px","row_message_input_font_size":"","row_message_input_font_family":"","row_message_input_height":"45px","row_message_input_lock":"vertical","row_message_input_length":450,"row_message_input_background_color":"#FFFFFF","row_message_input_text_color":"#000000","row_date_text_color":"#444","row_date_color":"#FFFFFF","row_name_color":"#666666","row_moderator_name_color":"#6699CC","row_text_color":"#000000","row_code_color":"#FFFFCC","row_font_family":"","row_font_size":"","log_creation":"disabled","log_display":"disabled","log_display_label":"Chat Logs","log_display_limit":"10","log_display_hide_session":"show","log_display_role_level":"public","log_limit":100,"login_options":["subscriber","public_user"],"moderator_roles":["administrator"],"users_list_show":"avatar","users_list_position":"above","users_list_style":"combined","users_list_width":"15%","users_list_avatar_width":"30px","users_list_moderator_avatar_border_color":"#FFFFFF","users_list_user_avatar_border_color":"#FFFFFF","users_list_avatar_border_width":"1px","users_list_threshold_delete":300,"users_list_background_color":"#FFFFFF","users_list_name_color":"#000000","users_list_moderator_color":"#000000","users_list_header":"Current Active Users","users_list_font_size":"","users_list_header_color":"#000000","users_list_header_font_family":"","users_list_header_font_size":"","users_enter_exit_status":"enabled","users_enter_exit_delay":"5","tinymce_roles":[],"tinymce_post_types":[],"noauth_view":"default","noauth_login_message":"To get started just enter your email address and desired username:","noauth_login_prompt":"You must login to participate in chat","update_transient":"enabled","bottom_corner":"enabled","status_max_min":"min","poll_max_min":"disabled","bottom_corner_wpadmin":"disabled","box_position_h":"right","box_position_v":"bottom","box_position_adjust_mobile":"enabled","box_offset_h":"10px","box_offset_v":"0px","box_spacing_h":"10px","box_shadow_show":"disabled","box_shadow_v":"10px","box_shadow_h":"10px","box_shadow_blur":"5px","box_shadow_spread":"0px","box_shadow_color":"#888888","box_resizable":"disabled","invite-info":[],"blocked_on_shortcode":"disabled","private_reopen_after_exit":"disabled","users_list_font_family":"","blocked_urls_action":"include","blocked_urls":[],"last_row_id":"__EMPTY__","box_font_style":"","row_font_style":"","row_message_input_font_style":"","users_list_font_style":"","show_messages_position":"left","users_list_height":"15%","show_messages_width":"100%","ip_address":"127.0.0.1","moderator":"yes"}},"user":{"__global__":{"status_max_min":"max","sound_on_off":"on"},"bottom_corner":{"status_max_min":"min","sound_on_off":"on"}},"auth":{"type":"wordpress","name":"Felix","email":"felixnong1990@gmail.com","auth_hash":"c4ca4238a0b923820dcc509a6f75849b","profile_link":"","ip_address":"127.0.0.1","avatar":"http:\/\/localhost\/gv\/wp-content\/plugins\/userpro\/lib\/timthumb.php?src=%2Fwp-content%2Fuploads%2Fuserpro%2F1%2F53bfa57edac08.jpg&amp;w=96&amp;h=96&amp;a=t&amp;q=100","chat_status":"available"}};
/* ]]> */

// WPMU Chat
function WPMUDEVChatGooglePlusSigninCallback(e){if(e["access_token"]){jQuery.ajax({type:"GET",url:"https://www.googleapis.com/plus/v1/people/me?access_token="+e["access_token"],cache:false,dataType:"json",success:function(t){if(t.id!=undefined){var n={};n["access_token"]=e["access_token"];n["type"]="google_plus";n["id"]=t["id"];n["name"]=t["displayName"];n["profile_link"]=t["url"];n["avatar"]=t["image"]["url"];wpmudev_chat.chat_session_user_login(n,"")}}})}else if(e["error"]){}}var wpmudev_chat=jQuery.extend(wpmudev_chat||{},{settings:{},pids:{},errors:{},timers:{},send_data:{},popouts:{},bound:false,isPlaceholderSupported:true,Sounds:[],init:function(){if(wpmudev_chat_localized["settings"]["session_poll_interval_messages"]==undefined||wpmudev_chat_localized["settings"]["session_poll_interval_messages"]<1){wpmudev_chat_localized["settings"]["session_poll_interval_messages"]=1}if(wpmudev_chat_localized["settings"]["session_poll_interval_invites"]==undefined||wpmudev_chat_localized["settings"]["session_poll_interval_invites"]<1){wpmudev_chat_localized["settings"]["session_poll_interval_invites"]=3}if(wpmudev_chat_localized["settings"]["session_poll_interval_meta"]==undefined||wpmudev_chat_localized["settings"]["session_poll_interval_meta"]<1){wpmudev_chat_localized["settings"]["session_poll_interval_meta"]=5}if(wpmudev_chat_localized["settings"]["session_poll_interval_users"]==undefined||wpmudev_chat_localized["settings"]["session_poll_interval_users"]<1){wpmudev_chat_localized["settings"]["session_poll_interval_user"]=5}jQuery(window).resize(function(){wpmudev_chat.chat_session_size_box()});wpmudev_chat_localized["settings"]["screen_width"]=jQuery(window).width();wpmudev_chat_localized["settings"]["screen_height"]=jQuery(window).height();wpmudev_chat.isPlaceholderSupported="placeholder"in document.createElement("input");wpmudev_chat.settings["sessions"]={};if(wpmudev_chat_localized["sessions"]!=undefined){for(var e in wpmudev_chat_localized["sessions"]){if(!wpmudev_chat_localized["sessions"].hasOwnProperty(e))continue;wpmudev_chat.settings["sessions"][e]=wpmudev_chat_localized["sessions"][e];wpmudev_chat.settings["sessions"][e]["has_send_message"]=true}}wpmudev_chat.settings["user"]={};if(wpmudev_chat_localized["user"]!=undefined){for(var e in wpmudev_chat_localized["user"]){if(!wpmudev_chat_localized["user"].hasOwnProperty(e))continue;wpmudev_chat.settings["user"][e]=wpmudev_chat_localized["user"][e]}}wpmudev_chat.cookie("wpmudev-chat-user",JSON.stringify(wpmudev_chat.settings["user"]),{path:wpmudev_chat_localized["settings"]["cookiepath"],domain:wpmudev_chat_localized["settings"]["cookie_domain"]});wpmudev_chat.settings["auth"]={};if(wpmudev_chat_localized["auth"]!=undefined){if(wpmudev_chat_localized["auth"]["type"]!="invalid"){wpmudev_chat.settings["auth"]=wpmudev_chat_localized["auth"]}}else{var t=wpmudev_chat.cookie("wpmudev-chat-auth");if(t!=undefined&&!jQuery.isEmptyObject(t)){wpmudev_chat.settings["auth"]=JSON.parse(t)}}wpmudev_chat.cookie("wpmudev-chat-auth",JSON.stringify(wpmudev_chat.settings["auth"]),{path:wpmudev_chat_localized["settings"]["cookiepath"],domain:wpmudev_chat_localized["settings"]["cookie_domain"]});wpmudev_chat.timers["messages"]=0;wpmudev_chat.timers["invites"]=0;wpmudev_chat.timers["meta"]=0;wpmudev_chat.timers["users"]=0;wpmudev_chat.pids["chat_session_message_update"]="";wpmudev_chat.pids["chat_sessions_init"]="";wpmudev_chat.pids["chat_session_messages_send"]="";wpmudev_chat.errors["chat_session_message_update"]=0;wpmudev_chat.errors["chat_sessions_init"]=0;wpmudev_chat.errors["chat_session_messages_send"]=0;wpmudev_chat.chat_privite_invite_click();wpmudev_chat.chat_sessions_init()},chat_sessions_init:function(){var e={};if(wpmudev_chat.settings["sessions"]!=undefined&&Object.keys(wpmudev_chat.settings["sessions"]).length>0){for(var t in wpmudev_chat.settings["sessions"]){var n=wpmudev_chat.settings["sessions"][t];e[t]={};e[t]["id"]=n["id"];e[t]["blog_id"]=n["blog_id"];e[t]["session_type"]=n["session_type"]}}if(Object.keys(e).length>0){if(wpmudev_chat.pids["chat_sessions_init"]==""&&wpmudev_chat.errors["chat_sessions_init"]<10){wpmudev_chat.pids["chat_sessions_init"]=jQuery.ajax({type:"POST",url:wpmudev_chat_localized["settings"]["ajax_url"],dataType:"json",cache:false,data:{"function":"chat_init",action:"chatProcess","wpmudev-chat-sessions":e,"wpmudev-chat-settings-request-uri":wpmudev_chat_localized["settings"]["REQUEST_URI"]},error:function(e,t,n){wpmudev_chat.pids["chat_sessions_init"]="";wpmudev_chat.errors["chat_sessions_init"]=parseInt(wpmudev_chat.errors["chat_sessions_init"])+1;console.log("init: error HTTP Status["+e.status+"] "+n);var r=1;setTimeout(function(){wpmudev_chat.chat_sessions_init()},r*1e3)},success:function(e){wpmudev_chat.pids["chat_sessions_init"]="";if(e!=undefined){if(e["performance"]!=undefined){console.log("performance: chat_init: %o",e["performance"])}wpmudev_chat.errors["chat_sessions_init"]=0;if(e["sessions"]!=undefined){for(var t in e["sessions"]){var n=e["sessions"][t];if(n["html"]!=undefined){jQuery("div#wpmudev-chat-box-"+t).html(n["html"])}if(n["css"]!=undefined){jQuery("div#wpmudev-chat-box-"+t).after(n["css"])}wpmudev_chat.chat_session_box_actions(t);if(wpmudev_chat.isPlaceholderSupported==false){jQuery("div#wpmudev-chat-box-"+t+" div.wpmudev-chat-module-login div.chat-login-wrap label.wpmudev-chat-login-label").show()}jQuery("div#wpmudev-chat-box-"+t).show()}}wpmudev_chat.chat_session_set_auth_view();wpmudev_chat.chat_session_sound_setup(0);if(wpmudev_chat.settings["auth"]["type"]!="wordpress"){wpmudev_chat.chat_session_facebook_setup();wpmudev_chat.chat_session_google_plus_setup();wpmudev_chat.chat_session_twitter_setup()}wpmudev_chat.chat_session_size_box();wpmudev_chat.chat_session_size_message_list();wpmudev_chat.chat_session_message_update()}else{wpmudev_chat.errors["chat_sessions_init"]=parseInt(wpmudev_chat.errors["chat_sessions_init"])+1;var r=1;setTimeout(function(){wpmudev_chat.chat_sessions_init()},r*1e3)}},beforeSend:function(){}})}}else{wpmudev_chat.chat_session_message_update()}},chat_session_message_update:function(){var e={};if(wpmudev_chat.settings["sessions"]!=undefined){for(var t in wpmudev_chat.settings["sessions"]){var n=wpmudev_chat.settings["sessions"][t];if(jQuery("div#wpmudev-chat-box-"+t+" div.wpmudev-chat-module-messages-list").length){if(n["poll_max_min"]!=undefined&&n["poll_max_min"]=="disabled"&&jQuery("div#wpmudev-chat-box-"+n["id"]).hasClass("wpmudev-chat-box-min")){continue}if(jQuery("div#wpmudev-chat-box-"+t+".wpmudev-chat-box").hasClass("wpmudev-chat-dashboard-widget")){var r=jQuery("div#wpmudev-chat-box-"+t+".wpmudev-chat-box").parents("div.postbox");if(r!=undefined){if(jQuery(r).hasClass("closed")||!jQuery(r).is(":visible"))continue}}if(jQuery("div#wpmudev-chat-box-"+t+".wpmudev-chat-box").hasClass("wpmudev-chat-box-pop-out")){continue}e[t]={};e[t]["id"]=n["id"];e[t]["blog_id"]=n["blog_id"];e[t]["session_type"]=n["session_type"];if(jQuery("div#wpmudev-chat-box-"+t+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row").length){if(n["box_input_position"]=="top"){var i=jQuery("div#wpmudev-chat-box-"+t+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row").first().attr("id").replace("wpmudev-chat-row-","")}else{var i=jQuery("div#wpmudev-chat-box-"+t+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row").last().attr("id").replace("wpmudev-chat-row-","")}if(i!=undefined){var s=i.split("-");if(s[1]!=undefined)e[t]["last_row_id"]=s[1]}}else{e[t]["last_row_id"]="__EMPTY__"}if(jQuery("body").hasClass("wpmudev-chat-pop-out"))e[t]["template"]="wpmudev-chat-pop-out"}}}var o={};o["messages"]=0;o["users"]=0;o["invites"]=0;o["meta"]=0;var u=Math.round((new Date).getTime()/1e3);if(Object.keys(e).length){o["messages"]=1}if(u-wpmudev_chat_localized["settings"]["session_poll_interval_invites"]>wpmudev_chat.timers["invites"]){o["invites"]=1;wpmudev_chat.timers["invites"]=u}if(u-wpmudev_chat_localized["settings"]["session_poll_interval_meta"]>wpmudev_chat.timers["meta"]){o["meta"]=1;wpmudev_chat.timers["meta"]=u}if(u-wpmudev_chat_localized["settings"]["session_poll_interval_users"]>wpmudev_chat.timers["users"]){o["users"]=1;wpmudev_chat.timers["users"]=u}if(wpmudev_chat.pids["chat_session_message_update"]==""&&wpmudev_chat.errors["chat_session_message_update"]<10){if(o["users"]==0&&o["meta"]==0&&o["invites"]==0&&o["messages"]==0){if(wpmudev_chat.settings["auth"]["type"]!=undefined){var a=wpmudev_chat_localized["settings"]["session_poll_interval_messages"]}else{var a=wpmudev_chat_localized["settings"]["session_poll_interval_messages"]*3}a=5;setTimeout(function(){wpmudev_chat.chat_session_message_update()},a*1e3)}else{wpmudev_chat.pids["chat_session_message_update"]=jQuery.ajax({type:"POST",url:wpmudev_chat_localized["settings"]["ajax_url"],dataType:"json",cache:false,data:{"function":"chat_messages_update",action:"chatProcess",timers:o,"wpmudev-chat-sessions":e,"wpmudev-chat-settings-request-uri":wpmudev_chat_localized["settings"]["REQUEST_URI"]},error:function(e,t,n){wpmudev_chat.errors["chat_session_message_update"]=parseInt(wpmudev_chat.errors["chat_session_message_update"])+1;console.log("chat_session_message_update: error HTTP Status["+e.status+"] "+n)},success:function(e){var t={};if(e!=undefined){wpmudev_chat.errors["chat_session_message_update"]=0;if(e["performance"]!=undefined){console.log("performance: chat_messages_update: %o",e["performance"])}if(e["invites"]!=undefined){for(var n in e["invites"]){if(!e["invites"].hasOwnProperty(n))continue;if(wpmudev_chat.settings["sessions"][n]!=undefined){console.log("chat_session ["+n+"] already exists");continue}else{wpmudev_chat.chat_session_add_item(n,e["invites"][n]);wpmudev_chat.chat_session_box_actions(n)}}wpmudev_chat.chat_session_size_box()}if(e["sessions"]!=undefined){for(var n in e["sessions"]){var r=wpmudev_chat.chat_session_get_session_by_id(n);if(r==undefined)continue;var i=e["sessions"][n];if(i["last_row_id"]!=undefined){wpmudev_chat.settings["sessions"][n]["last_row_id"]=i["last_row_id"]}if(i["rows"]!=undefined){if(i["rows"]=="__EMPTY__"){if(wpmudev_chat.settings["sessions"][n]["last_row_id"]!="__EMPTY__"){wpmudev_chat.settings["sessions"][n]["last_row_id"]=i["rows"];jQuery("div#wpmudev-chat-box-"+n+" div.wpmudev-chat-module-messages-list").empty();jQuery("div#wpmudev-chat-box-"+n+" div.wpmudev-chat-module-session-generic-message p").html(r["session_cleared_message"]);jQuery("div#wpmudev-chat-box-"+n+" div.wpmudev-chat-module-session-generic-message").show().delay(5e3).fadeOut(wpmudev_chat.chat_session_size_message_list)}}else if(Object.keys(i["rows"]).length){var s=wpmudev_chat.chat_session_process_rows(r,i["rows"]);if(s==true){if(wpmudev_chat.settings["sessions"][n]["box_sound"]=="enabled"&&wpmudev_chat.settings["user"][n]["sound_on_off"]=="on"){if(!jQuery("div#wpmudev-chat-box-"+n+".wpmudev-chat-box").hasClass("wpmudev-chat-box-pop-out")){if(r["has_send_message"]==true){wpmudev_chat.settings["sessions"][n]["has_send_message"]=false}else{t[n]=true}}}}}wpmudev_chat.chat_session_click_avatar_row(n);wpmudev_chat.chat_session_admin_row_actions(n);if(r["moderator"]=="no"){jQuery("div#wpmudev-chat-box-"+n+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row ul.wpmudev-chat-row-footer").remove()}}if(i["meta"]!=undefined&&Object.keys(i["meta"]).length){if(i["meta"]["session-status"]!=undefined){if(r["session_type"]=="private"){if(i["meta"]["session-status"]=="yes"){wpmudev_chat.chat_session_remove_item(n);continue}}else{wpmudev_chat.chat_session_process_status_change(n,i["meta"]["session-status"])}}if(i["meta"]["users-active"]!=undefined){wpmudev_chat.chat_session_process_users_list(n,i["meta"]["users-active"])}if(i["meta"]["deleted-rows"]!=undefined){wpmudev_chat.chat_session_admin_process_row_delete_actions(n,i["meta"]["deleted-rows"])}}if(i["global"]!=undefined){if(i["global"]["blocked-ip-addresses"]!=undefined){wpmudev_chat.chat_session_admin_process_blocked_ip_addresses(n,i["global"]["blocked-ip-addresses"])}if(i["global"]["blocked-users"]!=undefined){wpmudev_chat.chat_session_admin_process_blocked_users(n,i["global"]["blocked-users"])}}}if(Object.keys(t).length>0){wpmudev_chat.chat_session_sound_play()}}wpmudev_chat.wp_admin_bar_setup();wpmudev_chat.chat_session_set_auth_view()}else{wpmudev_chat.errors["chat_session_message_update"]=parseInt(wpmudev_chat.errors["chat_session_message_update"])+1}wpmudev_chat.chat_session_messages_send()},complete:function(e,t,n){wpmudev_chat.pids["chat_session_message_update"]="";if(Object.keys(wpmudev_chat.settings["sessions"]).length>0){var r=wpmudev_chat_localized["settings"]["session_poll_interval_messages"]}else{if(wpmudev_chat_localized["settings"]["session_poll_interval_messages"]<5)r=5;else r=wpmudev_chat_localized["settings"]["session_poll_interval_messages"]}setTimeout(function(){wpmudev_chat.chat_session_message_update()},r*1e3)}})}}},chat_session_add_item:function(e,t){if(wpmudev_chat.chat_session_get_session_by_id(e)!=undefined)return;wpmudev_chat.settings["sessions"][e]=t["session"];wpmudev_chat.settings["user"][e]=t["user"];wpmudev_chat.cookie("wpmudev-chat-user",JSON.stringify(wpmudev_chat.settings["user"]),{path:wpmudev_chat_localized["settings"]["cookiepath"],domain:wpmudev_chat_localized["settings"]["cookie_domain"]});var n=t["session"];var r=0;var i=0;jQuery(".wpmudev-chat-box-site").each(function(){r+=1;i+=jQuery(this).outerWidth(true)});if(t["html"]!=undefined&&t["html"]!=undefined!=""){jQuery("body").append(t["html"])}if(t["css"]!=undefined&&t["css"]!=undefined!=""){jQuery("div#wpmudev-chat-box-"+e).after(t["css"])}if(r>0){i+=parseInt(n["box_offset_h"]);if(n["box_position_h"]=="left")jQuery("#wpmudev-chat-box-"+n["id"]).css("left",i+"px");else jQuery("#wpmudev-chat-box-"+n["id"]).css("right",i+"px")}jQuery("#wpmudev-chat-box-"+n["id"]).show()},chat_session_remove_item:function(e){var t={};var n=wpmudev_chat.settings["sessions"][e];t[e]={};t[e]["id"]=n["id"];t[e]["blog_id"]=n["blog_id"];t[e]["session_type"]=n["session_type"];jQuery.ajax({type:"POST",url:wpmudev_chat_localized["settings"]["ajax_url"],dataType:"json",cache:false,data:{"function":"chat_meta_leave_private_session",action:"chatProcess","wpmudev-chat-sessions":t,"wpmudev-chat-settings-request-uri":wpmudev_chat_localized["settings"]["REQUEST_URI"]},success:function(e){if(e!=undefined){if(e["errorStatus"]!=undefined){if(e["errorStatus"]==true){if(e["errorText"]!=undefined){}}else if(e["errorStatus"]==false){if(e["sessions"]!=undefined){for(var t in e["sessions"]){var n=jQuery("div#wpmudev-chat-box-"+t);if(!jQuery.isEmptyObject(n)){jQuery(n).remove()}var r=jQuery("style#wpmudev-chat-box-"+t+"-css");if(!jQuery.isEmptyObject(r)){jQuery(r).remove()}delete wpmudev_chat.settings["sessions"][t];delete wpmudev_chat.settings["user"][t];wpmudev_chat.cookie("wpmudev-chat-user",JSON.stringify(wpmudev_chat.settings["user"]),{path:wpmudev_chat_localized["settings"]["cookiepath"],domain:wpmudev_chat_localized["settings"]["cookie_domain"]})}}}}}}})},chat_session_update_user_invite_status:function(e,t){jQuery.ajax({type:"POST",url:wpmudev_chat_localized["settings"]["ajax_url"],dataType:"json",cache:false,data:{"function":"chat_invite_update_user_status",action:"chatProcess","chat-id":e,"invite-status":t,"wpmudev-chat-settings-request-uri":wpmudev_chat_localized["settings"]["REQUEST_URI"]},success:function(e){if(e!=undefined){if(e["errorStatus"]!=undefined){if(e["errorStatus"]==true){if(e["errorText"]!=undefined){}}}}}})},chat_session_size_box:function(){if(jQuery("body").hasClass("wpmudev-chat-pop-out")){return}wpmudev_chat_localized["settings"]["screen_width"]=jQuery(window).outerWidth(true);wpmudev_chat_localized["settings"]["screen_height"]=jQuery(window).outerHeight(true);for(var e in wpmudev_chat.settings["sessions"]){var t=wpmudev_chat.settings["sessions"][e];var n=parseInt(t["box_width"]);if(t["box_shadow_show"]=="enabled"){n=n+parseInt(t["box_shadow_h"])}var r=parseInt(t["box_height"]);if(t["box_shadow_show"]=="enabled"){r=r+parseInt(t["box_shadow_v"])}if(t["box_width_mobile_adjust"]=="window"){if(n>wpmudev_chat_localized["settings"]["screen_width"]){jQuery("#wpmudev-chat-box-"+e).css("width",parseInt(wpmudev_chat_localized["settings"]["screen_width"])-5);if(jQuery("div#wpmudev-chat-box-"+t["id"]).hasClass("wpmudev-chat-box-site")&&t["box_position_adjust_mobile"]=="enabled"){jQuery("#wpmudev-chat-box-"+e).css("position","relative");jQuery("#wpmudev-chat-box-"+e).css("margin","0");if(t["box_position_h"]=="right"){jQuery("#wpmudev-chat-box-"+e).css("right","0")}else if(t["box_position_h"]=="left"){jQuery("#wpmudev-chat-box-"+e).css("left","0")}if(t["box_shadow_show"]=="enabled"){jQuery("#wpmudev-chat-box-"+e).css("box-shadow","none")}}}else{jQuery("#wpmudev-chat-box-"+e).css("width",t["box_width"]);if(jQuery("div#wpmudev-chat-box-"+t["id"]).hasClass("wpmudev-chat-box-site")&&t["box_position_adjust_mobile"]=="enabled"){jQuery("#wpmudev-chat-box-"+e).css("position","fixed");if(t["box_position_h"]=="right"){jQuery("#wpmudev-chat-box-"+e).css("margin","0 0 0 "+t["box_offset_h"]);jQuery("#wpmudev-chat-box-"+e).css("right",t["box_offset_h"])}else if(t["box_position_h"]=="left"){jQuery("#wpmudev-chat-box-"+e).css("margin","0 "+t["box_offset_h"]+" 0 0");jQuery("#wpmudev-chat-box-"+e).css("left",t["box_offset_h"])}if(t["box_shadow_show"]=="enabled"){jQuery("#wpmudev-chat-box-"+e).css("box-shadow",t["box_shadow_v"]+" "+t["box_shadow_h"]+" "+t["box_shadow_blur"]+" "+t["box_shadow_spread"]+" "+t["box_shadow_color"])}}}}if(t["box_height_mobile_adjust"]=="window"){if(!jQuery("div#wpmudev-chat-box-"+t["id"]).hasClass("wpmudev-chat-box-min")){if(r>wpmudev_chat_localized["settings"]["screen_height"]){jQuery("#wpmudev-chat-box-"+e).css("height",wpmudev_chat_localized["settings"]["screen_height"]);if(t["box_shadow_show"]=="enabled"){jQuery("#wpmudev-chat-box-"+e).css("box-shadow","none")}if(t["box_position_v"]=="bottom"){jQuery("#wpmudev-chat-box-"+e).css("bottom","0")}else if(t["box_position_v"]=="top"){jQuery("#wpmudev-chat-box-"+e).css("top","0")}}else{jQuery("#wpmudev-chat-box-"+e).css("height",t["box_height"]);if(t["box_shadow_show"]=="enabled"){jQuery("#wpmudev-chat-box-"+e).css("box-shadow",t["box_shadow_v"]+" "+t["box_shadow_h"]+" "+t["box_shadow_blur"]+" "+t["box_shadow_spread"]+" "+t["box_shadow_color"])}if(t["box_position_v"]=="bottom"){jQuery("#wpmudev-chat-box-"+e).css("margin","0 0 "+t["box_offset_v"]+" 0");jQuery("#wpmudev-chat-box-"+e).css("bottom",t["box_offset_v"])}else if(t["box_position_v"]=="top"){jQuery("#wpmudev-chat-box-"+e).css("margin",t["box_offset_v"]+" 0 0 0");jQuery("#wpmudev-chat-box-"+e).css("top",t["box_offset_v"])}}}}}wpmudev_chat.chat_session_size_message_list()},chat_session_size_message_list:function(){for(var e in wpmudev_chat.settings["sessions"]){var t=wpmudev_chat.settings["sessions"][e];if(!jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list").is(":visible"))continue;var n=jQuery("#wpmudev-chat-box-"+e).height();var r=jQuery("#wpmudev-chat-box-"+e).width();var i=0;jQuery("#wpmudev-chat-box-"+e+" .wpmudev-chat-module").each(function(){if(!jQuery(this).hasClass("wpmudev-chat-module-messages-list")&&!jQuery(this).hasClass("wpmudev-chat-module-users-list")&&jQuery(this).is(":visible")){i+=jQuery(this).outerHeight(true)}});if(t["users_list_position"]=="none"){if(i<n){var s=n-i;jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list").height(s+1)}else if(i>n){var s=n-i;jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list").height(s+1)}}else if(t["users_list_position"]=="left"||t["users_list_position"]=="right"){if(jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list")&&jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list").is(":visible")){var o=jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list").outerHeight(true)}else{var o=0}if(jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list")&&jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list").is(":visible")){var u=jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list").outerHeight(true)}else{var u=0}if(o==u){i+=o}else if(o>u){i+=o;jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list").height(o)}else if(o<u){i+=u;jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list").height(u)}var a=jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list").outerHeight(true);if(i<n){var s=n-i;jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list").height(a+s);jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list").height(a+s)}else if(i>n){var s=n-i;jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list").height(a+s);jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list").height(a+s)}}else if(t["users_list_position"]=="above"||t["users_list_position"]=="below"){if(jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list")&&jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list").is(":visible")){i+=jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list").outerHeight(true)}if(jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list")&&jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list").is(":visible")){var o=jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list").outerHeight(true)}else{var o=0}i+=o;if(i<n){var s=n-i;jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list").height(o+s+1)}else if(i>n){var s=n-i;jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list").height(o+s+1)}}}},chat_session_set_auth_view:function(){jQuery("div.wpmudev-chat-box-site.wpmudev-chat-box-min div.wpmudev-chat-module-login").hide();jQuery("div.wpmudev-chat-box.wpmudev-chat-box-max.wpmudev-chat-session-closed div.wpmudev-chat-module-session-status").show();jQuery("div.wpmudev-chat-box.wpmudev-chat-box-max.wpmudev-chat-session-open div.wpmudev-chat-module-session-status").hide();jQuery("div.wpmudev-chat-box.wpmudev-chat-box-min.wpmudev-chat-session-closed div.wpmudev-chat-module-session-status").hide();if(wpmudev_chat.settings["auth"]["type"]!=undefined){jQuery("div.wpmudev-chat-box div.wpmudev-chat-module-login").hide();jQuery("div.wpmudev-chat-box div.wpmudev-chat-module-login-prompt").hide();if(jQuery("body").hasClass("wpmudev-chat-pop-out"))jQuery("body.wpmudev-chat-pop-out div.wpmudev-chat-box div.wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings-pop-out").hide();else jQuery("div.wpmudev-chat-box div.wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings-pop-out").show();if(wpmudev_chat.settings["auth"]["type"]=="wordpress"){jQuery("div.wpmudev-chat-box ul.wpmudev-chat-actions-menu li.wpmudev-chat-action-menu-item-login").hide();jQuery("div.wpmudev-chat-box ul.wpmudev-chat-actions-menu li.wpmudev-chat-action-menu-item-logout").hide()}else{jQuery("div.wpmudev-chat-box ul.wpmudev-chat-actions-menu li.wpmudev-chat-action-menu-item-login").hide();jQuery("div.wpmudev-chat-box ul.wpmudev-chat-actions-menu li.wpmudev-chat-action-menu-item-logout").show();jQuery("div.wpmudev-chat-box-private ul.wpmudev-chat-actions-menu li.wpmudev-chat-action-menu-item-logout").hide()}for(var e in wpmudev_chat.settings["sessions"]){if(!jQuery("div#wpmudev-chat-box-"+e).length)continue;var t=wpmudev_chat.settings["sessions"][e];if(t==undefined)continue;if(jQuery("div#wpmudev-chat-box-"+t["id"]).hasClass("wpmudev-chat-session-ip-blocked")){if(t["moderator"]=="no"){jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-ip-blocked div.wpmudev-chat-module-banned-status").show();jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-ip-blocked div.wpmudev-chat-module-messages-list").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-ip-blocked div.wpmudev-chat-module-users-list").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-ip-blocked div.wpmudev-chat-module-message-area").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-ip-blocked div.wpmudev-chat-module-login").hide()}}else if(jQuery("div#wpmudev-chat-box-"+t["id"]).hasClass("wpmudev-chat-session-user-blocked")){if(t["moderator"]=="no"){jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-user-blocked div.wpmudev-chat-module-banned-status").show();jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-user-blocked div.wpmudev-chat-module-messages-list").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-user-blocked div.wpmudev-chat-module-users-list").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-user-blocked div.wpmudev-chat-module-message-area").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-user-blocked div.wpmudev-chat-module-login").hide()}}else{if(t["moderator"]=="no"){jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-banned-status").hide();if(jQuery("div#wpmudev-chat-box-"+t["id"]).hasClass("wpmudev-chat-session-closed")){jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-message-area").hide()}else{jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-message-area").show()}}if(jQuery("div#wpmudev-chat-box-"+t["id"]).hasClass("wpmudev-chat-box-site")||jQuery("div#wpmudev-chat-box-"+t["id"]).hasClass("wpmudev-chat-box-private")){if(jQuery("div#wpmudev-chat-box-"+t["id"]).hasClass("wpmudev-chat-box-min")){jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-messages-list").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-users-list").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-message-area").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+" ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+" ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings-pop-out").hide()}else{jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-users-list").show();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-messages-list").show();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-message-area").show();if(t["moderator"]=="no"){if(jQuery("div#wpmudev-chat-box-"+t["id"]).hasClass("wpmudev-chat-session-closed")){jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-message-area").hide()}else{jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-message-area").show()}}jQuery("div#wpmudev-chat-box-"+t["id"]+" ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings").show();if(jQuery("body").hasClass("wpmudev-chat-pop-out"))jQuery("div#wpmudev-chat-box-"+t["id"]+" ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings-pop-out").hide();else jQuery("div#wpmudev-chat-box-"+t["id"]+" ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings-pop-out").show()}}else{jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings").show();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-users-list").show();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-messages-list").show()}}}}else{jQuery("div.wpmudev-chat-box div.wpmudev-chat-module-session-status").hide();jQuery("div.wpmudev-chat-box ul.wpmudev-chat-actions-menu li.wpmudev-chat-action-menu-item-login").show();jQuery("div.wpmudev-chat-box ul.wpmudev-chat-actions-menu li.wpmudev-chat-action-menu-item-logout").hide();jQuery("div.wpmudev-chat-box div.wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings-pop-out").hide();for(var e in wpmudev_chat.settings["sessions"]){if(!jQuery("div#wpmudev-chat-box-"+e).length)continue;var t=wpmudev_chat.settings["sessions"][e];if(t==undefined)continue;if(jQuery("div#wpmudev-chat-box-"+t["id"]).hasClass("wpmudev-chat-session-ip-blocked")&&t["moderator"]=="no"){jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-ip-blocked div.wpmudev-chat-module-banned-status").show();jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-ip-blocked div.wpmudev-chat-module-login-prompt").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-ip-blocked div.wpmudev-chat-module-messages-list").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-ip-blocked div.wpmudev-chat-module-users-list").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-ip-blocked div.wpmudev-chat-module-message-area").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-ip-blocked div.wpmudev-chat-module-login").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+".wpmudev-chat-session-ip-blocked ul.wpmudev-chat-actions-menu").hide()}else{jQuery("div#wpmudev-chat-box-"+t["id"]+" ul.wpmudev-chat-actions-menu").show();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-message-area").hide();if((t["session_type"]=="site"||t["session_type"]=="private")&&jQuery("div#wpmudev-chat-box-"+t["id"]).hasClass("wpmudev-chat-box-min")){jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-login-prompt").hide()}else{if(t["noauth_view"]=="default"){if(jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-login").is(":visible")){jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-login-prompt").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-message-list").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-users-list").hide()}else{jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-messages-list").show();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-users-list").show();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-login-prompt").show()}jQuery("div#wpmudev-chat-box-"+t["id"]+" ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings").show()}else if(t["noauth_view"]=="login-only"){jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-login").show();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-login button.wpmudev-chat-login-cancel").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-messages-list").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-users-list").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+" ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings").hide()}else if(t["noauth_view"]=="no-login"){jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-login-prompt").hide();jQuery("div#wpmudev-chat-box-"+t["id"]+" div.wpmudev-chat-module-login").hide();jQuery("div.wpmudev-chat-box ul.wpmudev-chat-actions-menu li.wpmudev-chat-action-menu-item-login").hide();jQuery("div.wpmudev-chat-box ul.wpmudev-chat-actions-menu li.wpmudev-chat-action-menu-item-logout").hide()}}}}}wpmudev_chat.chat_session_size_message_list();for(var e in wpmudev_chat.settings["sessions"]){if(!jQuery("div#wpmudev-chat-box-"+e).length)continue;var t=wpmudev_chat.settings["sessions"][e];if(t==undefined)continue;var n=jQuery("div#wpmudev-chat-box-"+e).width();var r=jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-header div.wpmudev-chat-module-header-actions").width();jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-header div.wpmudev-chat-module-header-title").width(n-r-5)}},chat_session_handle_keydown:function(e){var t=jQuery(this).parents("div.wpmudev-chat-box").attr("id");var n=t.replace("wpmudev-chat-box-","");var r=wpmudev_chat.chat_session_get_session_by_id(n);if(r!=undefined){var i=e.keyCode?e.keyCode:e.which;if(i.toString()!=13||i.toString()==13&&e.shiftKey){var s=jQuery(this).val();if(r["row_message_input_length"]>0){if(s.length>r["row_message_input_length"]){var o=s.substr(0,r["row_message_input_length"]);jQuery(this).val(o);jQuery("#"+t+" div.wpmudev-chat-module-message-area ul.wpmudev-chat-send-meta li.wpmudev-chat-send-input-length span.wpmudev-chat-character-count").html(o.length)}else{jQuery("#"+t+" div.wpmudev-chat-module-message-area ul.wpmudev-chat-send-meta li.wpmudev-chat-send-input-length span.wpmudev-chat-character-count").html(s.length)}}else{jQuery("#"+t+" div.wpmudev-chat-module-message-area ul.wpmudev-chat-send-meta li.wpmudev-chat-send-input-length span.wpmudev-chat-character-count").html(s.length)}}else{if(!jQuery("div#wpmudev-chat-box-"+n+".wpmudev-chat-box div.wpmudev-chat-module-message-area button.wpmudev-chat-send-button").length){e.preventDefault();var s=jQuery.trim(jQuery(this).val());if(s!=""){wpmudev_chat.chat_session_enqueue_message(s,r);jQuery(this).val("");jQuery("#"+t+" div.wpmudev-chat-module-message-area ul.wpmudev-chat-send-meta li.wpmudev-chat-send-input-length span.wpmudev-chat-character-count").html("0")}}else{}}}},chat_session_handle_send_button:function(e){var t=wpmudev_chat.chat_session_get_session_by_id(e);if(jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-message-area button.wpmudev-chat-send-button").length){jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-message-area button.wpmudev-chat-send-button").click(function(n){n.preventDefault();var r=jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-message-area textarea.wpmudev-chat-send");var i=jQuery.trim(jQuery(r).val());if(i!=""){wpmudev_chat.chat_session_enqueue_message(i,t);jQuery(r).val("");jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-message-area ul.wpmudev-chat-send-meta li.wpmudev-chat-send-input-length span.wpmudev-chat-character-count").html("0")}})}else{jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-message-area textarea.wpmudev-chat-send").on("keydown",wpmudev_chat.chat_session_handle_keydown)}},chat_session_get_session_by_id:function(e){if(wpmudev_chat.settings["sessions"][e]!=undefined)return wpmudev_chat.settings["sessions"][e]},chat_session_set_session_by_id:function(e,t){wpmudev_chat.settings["sessions"][e]=t},chat_session_get_auth_type:function(){if(wpmudev_chat.settings["auth"]["type"]==undefined)return"";else return wpmudev_chat.settings["auth"]["type"]},chat_session_enqueue_message:function(e,t){var n=t["id"];if(wpmudev_chat.send_data[n]==undefined)wpmudev_chat.send_data[n]={};if(e.length){var r=wpmudev_chat.microtime(true);wpmudev_chat.send_data[n][r]=e}wpmudev_chat.chat_session_messages_send()},chat_session_messages_send:function(){if(wpmudev_chat.pids["chat_session_messages_send"]!="")return;var e={};if(wpmudev_chat.settings["sessions"]!=undefined&&Object.keys(wpmudev_chat.settings["sessions"]).length>0){for(var t in wpmudev_chat.settings["sessions"]){if(wpmudev_chat.send_data[t]!=undefined&&Object.keys(wpmudev_chat.send_data[t]).length>0){var n=wpmudev_chat.settings["sessions"][t];e[t]={};e[t]["id"]=n["id"];e[t]["blog_id"]=n["blog_id"];e[t]["session_type"]=n["session_type"];wpmudev_chat.settings["sessions"][t]["has_send_message"]=true}}}if(Object.keys(e).length>0&&wpmudev_chat.pids["chat_session_messages_send"]==""&&wpmudev_chat.errors["chat_session_messages_send"]<10){wpmudev_chat.pids["chat_session_messages_send"]=jQuery.ajax({type:"POST",url:wpmudev_chat_localized["settings"]["ajax_url"],dataType:"json",cache:false,data:{"function":"chat_message_send",action:"chatProcess","wpmudev-chat-sessions":e,chat_messages:wpmudev_chat.send_data,"wpmudev-chat-settings-request-uri":wpmudev_chat_localized["settings"]["REQUEST_URI"]},error:function(e,t,n){wpmudev_chat.errors["chat_session_messages_send"]=parseInt(wpmudev_chat.errors["chat_session_messages_send"])+1;console.log("chat_message_send: error HTTP Status["+e.status+"] "+n)},success:function(e){wpmudev_chat.pids["chat_session_messages_send"]="";if(e!=undefined){wpmudev_chat.errors["chat_session_messages_send"]=0;if(e["errorStatus"]!=undefined){if(e["errorStatus"]==true){if(e["errorText"]!=undefined){console.log("Chat: chat_message_send: reply [%s]",e["errorText"])}}else if(e["chat_messages"]!=undefined){for(var t in e["chat_messages"]){if(!e["chat_messages"].hasOwnProperty(t))continue;var n=e["chat_messages"][t];for(var r in n){if(!n.hasOwnProperty(r))continue;if(n[r]==true&&wpmudev_chat.send_data[t][r]!=undefined){var i=wpmudev_chat.send_data[t][r];delete wpmudev_chat.send_data[t][r]}}}}}}else{wpmudev_chat.errors["chat_session_messages_send"]=parseInt(wpmudev_chat.errors["chat_session_messages_send"])+1}var s=1;setTimeout(function(){wpmudev_chat.chat_session_messages_send()},s*1e3)},complete:function(e,t,n){wpmudev_chat.pids["chat_session_messages_send"]="";var r=1;setTimeout(function(){wpmudev_chat.chat_session_messages_send()},r*1e3)}})}},chat_session_process_rows:function(e,t){var n="";var r=e["id"];var i=0;for(var s in t){if(t.hasOwnProperty(s)){if(!jQuery("#wpmudev-chat-box-"+r+" div.wpmudev-chat-module-messages-list div#wpmudev-chat-row-"+s).length){i+=1;if(e["box_input_position"]=="top"){n=t[s]+n}else{n=n+t[s]}}}}if(n!==""){var o=true;var u=jQuery("#wpmudev-chat-box-"+r+" div.wpmudev-chat-module-messages-list");var a=u.height();var f=jQuery("div.wpmudev-chat-row",u).last();if(jQuery(f).length){var l=jQuery(f).height();var c=f.offset();var h=u.offset();var p=c.top-h.top;if(p<a)o=true;else o=false}if(e["box_input_position"]=="top"){jQuery("#wpmudev-chat-box-"+r+" div.wpmudev-chat-module-messages-list").prepend(n)}else if(e["box_input_position"]=="bottom"){jQuery("#wpmudev-chat-box-"+r+" div.wpmudev-chat-module-messages-list").append(n);if(o==true){var f=jQuery("#wpmudev-chat-box-"+r+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row").last();if(f.length){var d=f.position();var v=u.scrollTop()+d.top;jQuery("#wpmudev-chat-box-"+r+" div.wpmudev-chat-module-messages-list").animate({scrollTop:v},1e3)}}}if(e["log_limit"]!=undefined){while(jQuery("#wpmudev-chat-box-"+r+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row").length>e["log_limit"]){if(e["box_input_position"]=="bottom"){jQuery("#wpmudev-chat-box-"+r+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row").eq(0).remove()}else if(e["box_input_position"]=="top"){jQuery("#wpmudev-chat-box-"+r+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row").last().remove()}}}if(i>0&&jQuery("#wpmudev-chat-box-"+r).hasClass("wpmudev-chat-box-min")){var m=jQuery("#wpmudev-chat-box-"+r+" div.wpmudev-chat-module-header span.wpmudev-chat-title-count").attr("last_row_count");if(m==""||m==undefined){m=0}else{m=parseInt(m)}var g=i+m;jQuery("#wpmudev-chat-box-"+r+" div.wpmudev-chat-module-header span.wpmudev-chat-title-count").html("("+g+")");jQuery("#wpmudev-chat-box-"+r+" div.wpmudev-chat-module-header span.wpmudev-chat-title-count").attr("last_row_count",g)}return true}},chat_session_admin_row_actions:function(e){if(wpmudev_chat.settings["auth"]["auth_hash"]!=undefined){jQuery("div#wpmudev-chat-box-"+e+'.wpmudev-chat-box-moderator div.wpmudev-chat-module-messages-list div.wpmudev-chat-row ul.wpmudev-chat-row-footer li.wpmudev-chat-admin-actions-item-invite a[rel="'+wpmudev_chat.settings["auth"]["auth_hash"]+'"]').each(function(){jQuery(this).parents("li.wpmudev-chat-admin-actions-item-invite").hide()})}var t="div#wpmudev-chat-box-"+e+".wpmudev-chat-box-moderator div.wpmudev-chat-module-messages-list div.wpmudev-chat-row ul.wpmudev-chat-row-footer li.wpmudev-chat-admin-actions-item a";jQuery(t).unbind("click");jQuery(t).click(function(t){t.preventDefault();var n=jQuery(this).parents(".wpmudev-chat-row").attr("id").replace("wpmudev-chat-row-","");var r=wpmudev_chat.chat_session_get_session_by_id(e);if(r==undefined)return false;if(jQuery(this).hasClass("wpmudev-chat-admin-actions-item-delete")){if(jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box-moderator div.wpmudev-chat-module-messages-list #wpmudev-chat-row-"+n).hasClass("wpmudev-chat-row-deleted"))var i="undelete";else var i="delete";jQuery.ajax({type:"POST",url:wpmudev_chat_localized["settings"]["ajax_url"],cache:false,dataType:"json",data:{action:"chatProcess","function":"chat_session_moderate_message",chat_id:e,chat_session:r,row_id:n,moderate_action:i,"wpmudev-chat-settings-request-uri":wpmudev_chat_localized["settings"]["REQUEST_URI"]},success:function(e){if(e!=undefined){if(e["errorStatus"]!=undefined){if(e["errorStatus"]==true){if(e["errorText"]!=undefined){}}}}}})}else if(jQuery(this).hasClass("wpmudev-chat-admin-actions-item-block-ip")){var s=jQuery(this).attr("rel");if(jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box-moderator div.wpmudev-chat-module-messages-list #wpmudev-chat-row-"+n).hasClass("wpmudev-chat-row-ip-blocked"))var i="unblock-ip";else var i="block-ip";jQuery.ajax({type:"POST",url:wpmudev_chat_localized["settings"]["ajax_url"],cache:false,dataType:"json",data:{action:"chatProcess","function":"chat_session_moderate_ipaddress",chat_id:e,chat_session:r,ip_address:s,moderate_action:i,"wpmudev-chat-settings-request-uri":wpmudev_chat_localized["settings"]["REQUEST_URI"]},success:function(e){if(e!=undefined){if(e["errorStatus"]!=undefined){if(e["errorStatus"]==true){if(e["errorText"]!=undefined){}}}}}})}else if(jQuery(this).hasClass("wpmudev-chat-admin-actions-item-block-user")){var o=jQuery(this).attr("rel");if(jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box-moderator div.wpmudev-chat-module-messages-list #wpmudev-chat-row-"+n).hasClass("wpmudev-chat-row-user-blocked"))var u="unblock-user";else var u="block-user";jQuery.ajax({type:"POST",url:wpmudev_chat_localized["settings"]["ajax_url"],cache:false,dataType:"json",data:{action:"chatProcess","function":"chat_session_moderate_user",chat_id:e,chat_session:r,moderate_item:o,moderate_action:u,"wpmudev-chat-settings-request-uri":wpmudev_chat_localized["settings"]["REQUEST_URI"]},success:function(e){if(e!=undefined){if(e["errorStatus"]!=undefined){if(e["errorStatus"]==true){if(e["errorText"]!=undefined){}}}}}})}else if(jQuery(this).hasClass("wpmudev-chat-user-invite")){var a=jQuery(this).attr("rel");if(a!=""){wpmudev_chat.chat_process_private_invite(a)}}return false})},chat_session_admin_process_row_delete_actions:function(e,t){var n="wpmudev-chat-row-deleted";jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row").each(function(){var r=jQuery(this).attr("id");var i=r.replace("wpmudev-chat-row-","");var s=jQuery.inArray(i,t);if(s==-1){jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list #"+r).removeClass(n);jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list #"+r+" ul.wpmudev-chat-row-footer li.wpmudev-chat-admin-actions-item a.wpmudev-chat-admin-actions-item-delete span").text(wpmudev_chat_localized["settings"]["row_delete_text"])}else{jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list #"+r).addClass(n);jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list #"+r+" ul.wpmudev-chat-row-footer li.wpmudev-chat-admin-actions-item a.wpmudev-chat-admin-actions-item-delete span").text(wpmudev_chat_localized["settings"]["row_undelete_text"])}})},chat_session_admin_process_blocked_ip_addresses:function(e,t){var n="wpmudev-chat-row-ip-blocked";jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row."+n).each(function(){var r=jQuery(this).attr("id");if(!jQuery("#wpmudev-chat-box-"+e).hasClass("wpmudev-chat-box-private")){var i=jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list #"+r+" ul.wpmudev-chat-row-footer li.wpmudev-chat-admin-actions-item a.wpmudev-chat-admin-actions-item-block-ip").attr("rel");if(i!=undefined){var s=jQuery.inArray(i,t);if(s==-1){jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list #"+r).removeClass(n)}else{jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list #"+r).addClass(n)}}}});for(var r in t){if(t.hasOwnProperty(r)){var i=t[r];i=i.replace(".","-");i=i.replace(".","-");i=i.replace(".","-");if(!jQuery("#wpmudev-chat-box-"+e).hasClass("wpmudev-chat-box-private")){jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row-ip-"+i).each(function(){var t=jQuery(this).attr("id");jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list #"+t).addClass(n)})}}}if(!jQuery("#wpmudev-chat-box-"+e).hasClass("wpmudev-chat-box-private")){if(wpmudev_chat.settings["auth"]["ip_address"]!=undefined&&wpmudev_chat.settings["sessions"][e]["moderator"]!="yes"){var s=wpmudev_chat.settings["auth"]["ip_address"];var o=jQuery.inArray(s,t);if(o==-1){jQuery("#wpmudev-chat-box-"+e).removeClass("wpmudev-chat-session-ip-blocked")}else{jQuery("#wpmudev-chat-box-"+e).addClass("wpmudev-chat-session-ip-blocked")}}}for(var e in wpmudev_chat.settings["sessions"]){if(jQuery("div#wpmudev-chat-box-"+e).length){if(!jQuery("#wpmudev-chat-box-"+e).hasClass("wpmudev-chat-box-private")){var o=jQuery.inArray(wpmudev_chat.settings["sessions"][e]["ip_address"],t);if(o==-1){jQuery("#wpmudev-chat-box-"+e).removeClass("wpmudev-chat-session-ip-blocked")}else{jQuery("#wpmudev-chat-box-"+e).addClass("wpmudev-chat-session-ip-blocked")}}}}},chat_session_admin_process_blocked_users:function(e,t){var n="wpmudev-chat-row-user-blocked";jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row."+n).each(function(){var r=jQuery(this).attr("id");var i=jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list #"+r+" ul.wpmudev-chat-row-footer li.wpmudev-chat-admin-actions-item a.wpmudev-chat-admin-actions-item-block-user").attr("rel");if(i!=undefined){var s=jQuery.inArray(i,t);if(s==-1){jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list #"+r).removeClass(n)}else{jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list #"+r).addClass(n)}}});for(var r in t){if(t.hasOwnProperty(r)){var i=t[r];i=i.replace("@","-");i=i.replace(".","-");jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row-user-"+i).each(function(){var t=jQuery(this).attr("id");var r;jQuery("#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list #"+t).addClass(n)})}}if(wpmudev_chat.settings["auth"]["email"]!=undefined&&wpmudev_chat.settings["sessions"][e]["moderator"]!="yes"){var s=wpmudev_chat.settings["auth"]["email"];var o=jQuery.inArray(s,t);if(o==-1){jQuery("#wpmudev-chat-box-"+e).removeClass("wpmudev-chat-session-user-blocked")}else{jQuery("#wpmudev-chat-box-"+e).addClass("wpmudev-chat-session-user-blocked")}}},chat_session_process_status_change:function(e,t){wpmudev_chat.settings["sessions"][e]["session_status"]=t;if(t=="open"){jQuery("div#wpmudev-chat-box-"+e).removeClass("wpmudev-chat-session-closed");jQuery("div#wpmudev-chat-box-"+e).addClass("wpmudev-chat-session-open")}else{jQuery("div#wpmudev-chat-box-"+e).removeClass("wpmudev-chat-session-open");jQuery("div#wpmudev-chat-box-"+e).addClass("wpmudev-chat-session-closed")}},chat_session_status_update:function(e,t){jQuery.ajax({type:"POST",url:wpmudev_chat_localized["settings"]["ajax_url"],cache:false,dataType:"json",data:{action:"chatProcess","function":"chat_session_moderate_status",chat_session:wpmudev_chat.chat_session_get_session_by_id(e),chat_session_status:t,"wpmudev-chat-settings-request-uri":wpmudev_chat_localized["settings"]["REQUEST_URI"]},success:function(e){if(e!=undefined){if(e["errorStatus"]!=undefined){if(e["errorStatus"]==true){if(e["errorText"]!=undefined){}}}}}})},chat_session_click_avatar_row:function(e){jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row p.wpmudev-chat-message a.wpmudev-chat-user").unbind("click");jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list div.wpmudev-chat-row p.wpmudev-chat-message a.wpmudev-chat-user").click(function(t){t.preventDefault();var n=jQuery(this).attr("title");if(n!=""){var r=jQuery("#wpmudev-chat-box-"+e+" textarea.wpmudev-chat-send");var i=jQuery(r).val();if(wpmudev_chat.isPlaceholderSupported==false){var s=jQuery(r).attr("placeholder");if(s==i){i=""}}if(i!="")i=i+" ";i=i+n+" ";jQuery(r).val(i).focus()}t.preventDefault();return false})},chat_session_add_user_to_list:function(e,t,n){var r=wpmudev_chat.chat_session_get_session_by_id(e);if(r==undefined)return;if(r["users_list_position"]=="none")return;if(t["auth_hash"]==wpmudev_chat.settings["auth"]["auth_hash"])return;var i=t.auth_hash;if(!jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list ul.wpmudev-chat-"+n).length){jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list").append('<ul class="wpmudev-chat-'+n+'"></ul>')}if(!jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list ul.wpmudev-chat-"+n+" li#wpmudev-chat-user-"+i).length){var s;if(r["users_list_show"]=="avatar"&&t["avatar"]!=undefined){s='<li id="wpmudev-chat-user-'+i+'" class="wpmudev-chat-user"><a title="@'+t["name"]+'" href="#">'+t["avatar"]+"</a></li>"}else{s='<li id="wpmudev-chat-user-'+i+'" class="wpmudev-chat-user"><a title="@'+t["name"]+'" href="#">'+t["name"]+"</a></li>"}if(s!=""){jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list ul.wpmudev-chat-"+n).append(s);jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list ul.wpmudev-chat-"+n+" li#wpmudev-chat-user-"+i+" a").click(function(t){t.preventDefault();var n=jQuery(this).attr("title");if(n!=""){var r=jQuery("#wpmudev-chat-box-"+e+" textarea.wpmudev-chat-send");var i=jQuery(r).val();if(wpmudev_chat.isPlaceholderSupported==false){var s=jQuery(r).attr("placeholder");if(s==i){i=""}}if(i!="")i=i+" ";i=i+n+" ";jQuery(r).val(i).focus()}})}}},chat_session_remove_user_from_list:function(e,t,n){var r=wpmudev_chat.chat_session_get_session_by_id(e);if(r==undefined)return;if(r["users_list_position"]=="none")return;jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list ul.wpmudev-chat-"+n+" li#wpmudev-chat-user-"+t).remove()},chat_session_private_update_title:function(e){if(e["session_type"]!="private")return;var t="";var n=e["id"];if(Object.keys(e["users"]).length>0){for(var r in e["users"]){if(!e["users"].hasOwnProperty(r))continue;if(Object.keys(e["users"][r]).length>0){for(var i in e["users"][r]){if(!e["users"][r].hasOwnProperty(i))continue;if(e["users"][r][i]["auth_hash"]!=wpmudev_chat.settings["auth"]["auth_hash"]){if(t!="")t=t+",";t=t+e["users"][r][i]["name"]}}}}}if(t!="")jQuery("div#wpmudev-chat-box-"+n+" div.wpmudev-chat-module-header span.wpmudev-chat-private-attendees").html(t);else jQuery("div#wpmudev-chat-box-"+n+" div.wpmudev-chat-module-header span.wpmudev-chat-private-attendees").html("")},chat_session_process_users_list:function(e,t){var n=wpmudev_chat.chat_session_get_session_by_id(e);if(n==undefined)return;var r="";var i="";var s="";var o="";if(n["users"]==undefined){n["users"]={}}if(Object.keys(n["users"]).length>0){for(var u in n["users"]){if(!n["users"].hasOwnProperty(u))continue;if(Object.keys(n["users"][u]).length>0){for(var a in n["users"][u]){if(!n["users"][u].hasOwnProperty(a))continue;if(t[u][a]==undefined){wpmudev_chat.chat_session_remove_user_from_list(e,a,u);if(n["users"][u][a]!=undefined){if(a!=wpmudev_chat.settings["auth"]["auth_hash"]){if(i!="")i+=", ";i+=n["users"][u][a]["name"]}delete n["users"][u][a]}}}}}}for(var u in t){if(!t.hasOwnProperty(u))continue;if(n["users"][u]==undefined){n["users"][u]={}}if(Object.keys(t[u]).length>0){for(var a in t[u]){if(!t[u].hasOwnProperty(a))continue;if(a!=wpmudev_chat.settings["auth"]["auth_hash"]){var f="";if(n["users"][u][a]==undefined){n["users"][u][a]=t[u][a];f=t[u][a]["connect_status"]}else{if(n["users"][u][a]["connect_status"]!=t[u][a]["connect_status"]){n["users"][u][a]=t[u][a];f=t[u][a]["connect_status"]}else if(t[u][a]["connect_status"]=="pending"||t[u][a]["connect_status"]=="declined"){f=t[u][a]["connect_status"]}else if(t[u][a]["connect_status"]=="exited"){f=t[u][a]["connect_status"]}}if(f=="accepted"){if(r!="")r+=", ";r+=t[u][a]["name"];wpmudev_chat.chat_session_add_user_to_list(e,t[u][a],u)}else if(f=="pending"){if(o!="")o+=", ";o+=t[u][a]["name"]}else if(f=="declined"){if(s!="")s+=", ";s+=t[u][a]["name"]}else if(f=="exited"){if(i!="")i+=", ";i+=t[u][a]["name"]}}}}else{}}if(n["users_enter_exit_status"]=="enabled"&&wpmudev_chat.settings["auth"]["type"]!=undefined){var l=n["users_enter_exit_delay"];l=1e3*l;if(r!=""){r=wpmudev_chat_localized["settings"]["user_entered_chat"]+": "+r;jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-session-user-status-message").empty();jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-session-user-status-message").html("<p>"+r+"</p>");if(n["session_type"]=="private"){jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-session-user-status-message").show().delay(l).fadeOut(wpmudev_chat.chat_session_size_message_list)}else{jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-session-user-status-message").show().delay(l).fadeOut(wpmudev_chat.chat_session_size_message_list)}}if(i!=""){i=wpmudev_chat_localized["settings"]["user_exited_chat"]+": "+i;jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-session-user-status-message").empty();jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-session-user-status-message").html("<p>"+i+"</p>");if(n["session_type"]=="private"){jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-session-user-status-message").show();wpmudev_chat.chat_session_size_message_list()}else{jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-session-user-status-message").show().delay(l).fadeOut(wpmudev_chat.chat_session_size_message_list)}}if(n["session_type"]=="private"){var c="";if(o!=""||s!=""){if(o!=""){c+=wpmudev_chat_localized["settings"]["user_pending_chat"]+": "+o}if(s!=""){c+=wpmudev_chat_localized["settings"]["user_declined_chat"]+": "+s}if(c!=""){jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-session-user-status-message").empty();jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-session-user-status-message").html("<p>"+c+"</p>");jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-session-user-status-message").show()}}else{}}}wpmudev_chat.chat_session_set_session_by_id(e,n);wpmudev_chat.chat_session_private_update_title(n)},chat_process_private_invite:function(e){if(e!=""){jQuery.ajax({type:"POST",url:wpmudev_chat_localized["settings"]["ajax_url"],cache:false,dataType:"json",data:{action:"chatProcess","function":"chat_session_invite_private","wpmudev-chat-to-user":e,"wpmudev-chat-settings-request-uri":wpmudev_chat_localized["settings"]["REQUEST_URI"]},success:function(e){if(e!=undefined){if(e["errorStatus"]!=undefined){if(e["errorStatus"]==true){if(e["errorText"]!=undefined){}}}}}})}},chat_process_user_status_change:function(e){if(e!=""){jQuery.ajax({type:"POST",url:wpmudev_chat_localized["settings"]["ajax_url"],cache:false,dataType:"json",data:{action:"chatProcess","function":"chat_update_user_status","wpmudev-chat-user-status":e,"wpmudev-chat-settings-request-uri":wpmudev_chat_localized["settings"]["REQUEST_URI"]},success:function(t){if(jQuery("#wp-toolbar li#wp-admin-bar-wpmudev-chat-container div.ab-item span.wpmudev-chat-user-status-current span.wpmudev-chat-ab-icon").length){jQuery("#wp-toolbar li#wp-admin-bar-wpmudev-chat-container div.ab-item span.wpmudev-chat-user-status-current span.wpmudev-chat-ab-icon").removeClass("wpmudev-chat-ab-icon-"+wpmudev_chat.settings["auth"]["chat_status"]);jQuery("#wp-toolbar li#wp-admin-bar-wpmudev-chat-container div.ab-item span.wpmudev-chat-user-status-current span.wpmudev-chat-ab-icon").addClass("wpmudev-chat-ab-icon-"+e);jQuery("#wp-toolbar li#wp-admin-bar-wpmudev-chat-container div.ab-sub-wrapper li#wp-admin-bar-wpmudev-chat-user-statuses div.ab-sub-wrapper li#wp-admin-bar-wpmudev-chat-user-status-change-"+wpmudev_chat.settings["auth"]["chat_status"]).removeClass("wpmudev-chat-user-status-current");jQuery("#wp-toolbar li#wp-admin-bar-wpmudev-chat-container div.ab-sub-wrapper li#wp-admin-bar-wpmudev-chat-user-statuses div.ab-sub-wrapper li#wp-admin-bar-wpmudev-chat-user-status-change-"+e).addClass("wpmudev-chat-user-status-current");var n=jQuery("#wp-toolbar li#wp-admin-bar-wpmudev-chat-container div.ab-sub-wrapper li#wp-admin-bar-wpmudev-chat-user-statuses div.ab-sub-wrapper li.wpmudev-chat-user-status-current span.wpmudev-chat-ab-label").html();if(n!=""){jQuery("#wp-toolbar li#wp-admin-bar-wpmudev-chat-container div.ab-sub-wrapper li#wp-admin-bar-wpmudev-chat-user-statuses div.ab-item span.wpmudev-chat-current-status-label").html(n)}}if(jQuery("select.wpmudev-chat-status-widget").length){jQuery("select.wpmudev-chat-status-widget").val(e);if(e=="available"){jQuery("select.wpmudev-chat-status-widget").addClass("wpmudev-chat-status-widget-available")}else{jQuery("select.wpmudev-chat-status-widget").removeClass("wpmudev-chat-status-widget-available")}}wpmudev_chat.settings["auth"]["chat_status"]=e;wpmudev_chat.cookie("wpmudev-chat-auth",JSON.stringify(wpmudev_chat.settings["auth"]),{path:wpmudev_chat_localized["settings"]["cookiepath"],domain:wpmudev_chat_localized["settings"]["cookie_domain"]})}})}},chat_session_sound_play:function(){if(wpmudev_chat.Sounds["ping"]){wpmudev_chat.Sounds["ping"].play()}},chat_session_sound_setup:function(e){try{wpmudev_chat.Sounds["ping"]=new buzz.sound(wpmudev_chat_localized["settings"]["plugin_url"]+"audio/ping",{formats:["mp3","wav","ogg"]})}catch(t){if(wpmudev_chat_localized["settings"]["soundManager-js"]!==undefined){jQuery.getScript(wpmudev_chat_localized["settings"]["soundManager-js"],function(t,n,r){if(e==0){wpmudev_chat.chat_session_sound_setup(e+1)}})}}},chat_session_box_actions:function(e){console.log("chat_session_box_actions: adding chat_id:"+e);var t=wpmudev_chat.chat_session_get_session_by_id(e);if(wpmudev_chat.settings["user"][e]["status_max_min"]=="max"){wpmudev_chat.chat_session_site_max(e)}else if(wpmudev_chat.settings["user"][e]["status_max_min"]=="min"){wpmudev_chat.chat_session_site_min(e)}jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings ul.wpmudev-chat-actions-settings-menu").css({display:"none"});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings a.wpmudev-chat-actions-settings-button").click(function(e){e.preventDefault();console.log("click event settings gear [%o]",e);jQuery(this).next().slideToggle(400)});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings ul.wpmudev-chat-actions-settings-menu li a").click(function(t){t.preventDefault();t.stopPropagation();jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings ul.wpmudev-chat-actions-settings-menu").css({display:"none"})});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-message-area ul.wpmudev-chat-send-meta li.wpmudev-chat-send-input-emoticons ul.wpmudev-chat-emoticons-list").css({display:"none"});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-message-area ul.wpmudev-chat-send-meta li.wpmudev-chat-send-input-emoticons").click(function(e){e.preventDefault();jQuery("ul.wpmudev-chat-emoticons-list",this).slideToggle(400)});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-message-area ul.wpmudev-chat-send-meta li.wpmudev-chat-send-input-emoticons ul.wpmudev-chat-emoticons-list li img").click(function(t){t.preventDefault();t.stopPropagation();jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-message-area ul.wpmudev-chat-send-meta li.wpmudev-chat-send-input-emoticons ul.wpmudev-chat-emoticons-list").css({display:"none"})});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings-pop-out a").click(function(t){t.preventDefault();var n=jQuery(this).attr("href");var r=wpmudev_chat.chat_session_get_session_by_id(e);var i=500;if(wpmudev_chat_localized["settings"]["screen_width"]<500){i=wpmudev_chat_localized["settings"]["screen_width"]}var s=500;if(wpmudev_chat_localized["settings"]["screen_height"]<500){s=wpmudev_chat_localized["settings"]["screen_height"]}var o=window.open(n,r["box_title"],"width="+i+",height="+s+",resizable=yes,scrollbars=yes");if(o==null||typeof o=="undefined"){alert("Your browser has blocked a popup window\n\nWhen try to open the following url:\n"+n);window.location.href=n}else{wpmudev_chat.popouts[e]=o;jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box").hide();jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box").addClass("wpmudev-chat-box-pop-out");var u=window.setInterval(function(){if(o.closed!==false){jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box").show();jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box").removeClass("wpmudev-chat-box-pop-out");wpmudev_chat.popouts[e]="";window.clearInterval(u)}else{}},1e3)}});if(jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box-private").hasClass("wpmudev-chat-box-invite-pending")){jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box-private.wpmudev-chat-box-invite-pending div.wpmudev-chat-module-invite-prompt button").click(function(t){t.preventDefault();if(jQuery(this).hasClass("wpmudev-chat-invite-accept")){console.log("Accepted");wpmudev_chat.chat_session_update_user_invite_status(e,"accepted");jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box-private").removeClass("wpmudev-chat-box-invite-pending");jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box-private").addClass("wpmudev-chat-box-invite-accepted")}else if(jQuery(this).hasClass("wpmudev-chat-invite-declined")){console.log("Declined");wpmudev_chat.chat_session_update_user_invite_status(e,"declined");wpmudev_chat.chat_session_remove_item(e)}})}else{jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box-private div.wpmudev-chat-module-invite-prompt").hide()}jQuery("body.wpmudev-chat-pop-out div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings-pop-in a").click(function(e){e.preventDefault();window.close()});wpmudev_chat.chat_session_handle_send_button(e);if(wpmudev_chat.isPlaceholderSupported==false){var n=jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-message-area textarea.wpmudev-chat-send").attr("placeholder");var r=jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-message-area textarea.wpmudev-chat-send").val();if(r=="")jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-message-area textarea.wpmudev-chat-send").val(n);jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-message-area textarea.wpmudev-chat-send").focus(function(){if(jQuery(this).val()==n){jQuery(this).val("")}});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-message-area textarea.wpmudev-chat-send").blur(function(){if(jQuery(this).val()==""){jQuery(this).val(n)}})}if(jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box").hasClass("wpmudev-chat-box-can-minmax")){jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box .wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-min-max a").click(function(t){t.preventDefault();wpmudev_chat.chat_session_site_change_minmax(e,t)});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box .wpmudev-chat-module-header div.wpmudev-chat-module-header-title").click(function(t){t.preventDefault();wpmudev_chat.chat_session_site_change_minmax(e,t)})}jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box ul.wpmudev-chat-actions-settings-menu li.wpmudev-chat-action-menu-item-login a.wpmudev-chat-action-login").click(function(t){t.preventDefault();var n=jQuery(this).parents(".wpmudev-chat-box").attr("id");jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-messages-list").hide();jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-users-list").hide();jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-login").show();jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-login-prompt").hide();jQuery("div#wpmudev-chat-box-"+e+" div.wpmudev-chat-module-login input.wpmudev-chat-login-name").focus();return false});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box ul.wpmudev-chat-actions-settings-menu li.wpmudev-chat-action-menu-item-logout a.wpmudev-chat-action-logout").click(function(e){e.preventDefault();if(wpmudev_chat.settings["auth"]["type"]=="wordpress"){return}else if(wpmudev_chat.settings["auth"]["type"]=="public_user"){wpmudev_chat.settings["auth"]={}}else if(wpmudev_chat.settings["auth"]["type"]=="facebook"){FB.logout();wpmudev_chat.settings["auth"]={}}else if(wpmudev_chat.settings["auth"]["type"]=="google_plus"){if(wpmudev_chat.settings["auth"]["access_token"]!=""&&wpmudev_chat.settings["auth"]["access_token"]!=undefined){wpmudev_chat.settings["auth"]={};var t="https://accounts.google.com/o/oauth2/revoke?token="+wpmudev_chat.settings["auth"]["access_token"];jQuery.ajax({type:"GET",url:t,async:false,contentType:"application/json",dataType:"jsonp",success:function(e){wpmudev_chat.settings["auth"]={}},error:function(e){}})}}else if(wpmudev_chat.settings["auth"]["type"]=="twitter"){wpmudev_chat.settings["auth"]={}}wpmudev_chat.cookie("wpmudev-chat-auth",JSON.stringify(wpmudev_chat.settings["auth"]),{path:wpmudev_chat_localized["settings"]["cookiepath"],domain:wpmudev_chat_localized["settings"]["cookie_domain"]});wpmudev_chat.chat_session_set_auth_view();return false});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box ul.wpmudev-chat-actions-settings-menu li.wpmudev-chat-action-menu-item-exit a.wpmudev-chat-action-exit").click(function(t){t.preventDefault();wpmudev_chat.chat_session_remove_item(e)});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box button.wpmudev-chat-login-cancel").click(function(){var e=jQuery(this).parents(".wpmudev-chat-box");jQuery("div.wpmudev-chat-module-login",e).hide();wpmudev_chat.chat_session_set_auth_view();return false});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box a.wpmudev-chat-action-sound").click(wpmudev_chat.chat_session_site_change_sound);jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box button.wpmudev-chat-login-submit").click(function(){var e=jQuery(this).parents(".wpmudev-chat-box").attr("id");var t=jQuery("#"+e+" input.wpmudev-chat-login-name").val();var n=jQuery("#"+e+" input.wpmudev-chat-login-email").val();var r={};r["type"]="public_user";r["id"]="";r["name"]=t;r["profile_link"]="";r["avatar"]=n;r["email"]=n;var i=wpmudev_chat.chat_session_user_login(r,e)});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-message-area ul.wpmudev-chat-send-meta ul.wpmudev-chat-emoticons-list img").click(function(e){var t=jQuery(this).parents(".wpmudev-chat-box").attr("id");jQuery("#"+t+".wpmudev-chat-box div.wpmudev-chat-module-message-area textarea.wpmudev-chat-send").val(jQuery("#"+t+".wpmudev-chat-box div.wpmudev-chat-module-message-area textarea.wpmudev-chat-send").val()+" "+jQuery(this).attr("alt"));jQuery("#"+t+".wpmudev-chat-box div.wpmudev-chat-module-message-area textarea.wpmudev-chat-send").focus();return false});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-header ul.wpmudev-chat-actions-settings-menu li.wpmudev-chat-action-menu-item-session-status-open a.wpmudev-chat-action-session-open").click(function(){var t="open";wpmudev_chat.chat_session_status_update(e,t);return false});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-header ul.wpmudev-chat-actions-settings-menu li.wpmudev-chat-action-menu-item-session-status-closed a.wpmudev-chat-action-session-closed").click(function(){var t="closed";wpmudev_chat.chat_session_status_update(e,t);return false});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-header ul.wpmudev-chat-actions-settings-menu li.wpmudev-chat-action-menu-item-session-clear a.wpmudev-chat-action-session-clear").click(function(){var t=jQuery(this).parents(".wpmudev-chat-box").attr("id");var n=wpmudev_chat.chat_session_get_session_by_id(e);if(n!=undefined){var r={};r[e]={};r[e]["id"]=n["id"];r[e]["blog_id"]=n["blog_id"];r[e]["session_type"]=n["session_type"];jQuery.ajax({type:"POST",url:wpmudev_chat_localized["settings"]["ajax_url"],cache:false,dataType:"json",data:{action:"chatProcess","function":"chat_messages_clear","wpmudev-chat-sessions":r,"wpmudev-chat-settings-request-uri":wpmudev_chat_localized["settings"]["REQUEST_URI"]},success:function(e){if(e!=undefined){if(e["errorStatus"]!=undefined){if(e["errorStatus"]==true){if(e["errorText"]!=undefined){}}}}}})}return false});jQuery("div#wpmudev-chat-box-"+e+".wpmudev-chat-box div.wpmudev-chat-module-header ul.wpmudev-chat-actions-settings-menu li.wpmudev-chat-action-menu-item-session-archive a.wpmudev-chat-action-session-archive").click(function(){var t=jQuery(this).parents(".wpmudev-chat-box").attr("id");var n=wpmudev_chat.chat_session_get_session_by_id(e);if(n!=undefined){var r={};r[e]={};r[e]["id"]=n["id"];r[e]["blog_id"]=n["blog_id"];r[e]["session_type"]=n["session_type"];jQuery.ajax({type:"POST",url:wpmudev_chat_localized["settings"]["ajax_url"],cache:false,dataType:"json",data:{action:"chatProcess","function":"chat_messages_archive","wpmudev-chat-sessions":r,"wpmudev-chat-settings-request-uri":wpmudev_chat_localized["settings"]["REQUEST_URI"]},success:function(e){if(e!=undefined){if(e["errorStatus"]!=undefined){if(e["errorStatus"]==true){if(e["errorText"]!=undefined){}}}}}})}return false})},chat_session_site_change_minmax:function(e,t){var n="";if(jQuery("div#wpmudev-chat-box-"+e).hasClass("wpmudev-chat-box-min")){wpmudev_chat.chat_session_site_max(e);n="max";jQuery("div#wpmudev-chat-box-"+e+" ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings").show()}else if(jQuery("div#wpmudev-chat-box-"+e).hasClass("wpmudev-chat-box-max")){wpmudev_chat.chat_session_site_min(e);n="min";jQuery("div#wpmudev-chat-box-"+e+" ul.wpmudev-chat-actions-menu li.wpmudev-chat-actions-settings").hide()}wpmudev_chat.settings["user"][e]["status_max_min"]=n;wpmudev_chat.cookie("wpmudev-chat-user",JSON.stringify(wpmudev_chat.settings["user"]),{path:wpmudev_chat_localized["settings"]["cookiepath"],domain:wpmudev_chat_localized["settings"]["cookie_domain"]})},chat_session_site_change_sound:function(e){e.preventDefault();var t=jQuery(this).parents(".wpmudev-chat-box");var n=jQuery(t).attr("id").replace("wpmudev-chat-box-","");if(jQuery(t).hasClass("wpmudev-chat-box-sound-on")){jQuery(t).removeClass("wpmudev-chat-box-sound-on");jQuery(t).addClass("wpmudev-chat-box-sound-off");wpmudev_chat.settings["user"][n]["sound_on_off"]="off"}else if(jQuery(t).hasClass("wpmudev-chat-box-sound-off")){jQuery(t).removeClass("wpmudev-chat-box-sound-off");jQuery(t).addClass("wpmudev-chat-box-sound-on");wpmudev_chat.settings["user"][n]["sound_on_off"]="on"}wpmudev_chat.cookie("wpmudev-chat-user",JSON.stringify(wpmudev_chat.settings["user"]),{path:wpmudev_chat_localized["settings"]["cookiepath"],domain:wpmudev_chat_localized["settings"]["cookie_domain"]})},chat_session_site_max:function(e){if(jQuery("body").hasClass("wpmudev-chat-pop-out"))return;var t=wpmudev_chat.chat_session_get_session_by_id(e);if(t==undefined)return;var n=jQuery("#wpmudev-chat-box-"+e);jQuery(n).removeClass("wpmudev-chat-box-min");jQuery(n).addClass("wpmudev-chat-box-max");if(t["box_height"]!=undefined){jQuery(n).height(t["box_height"])}jQuery(".wpmudev-chat-module",n).each(function(){if(jQuery(this).hasClass("wpmudev-chat-module-min-hidden")){jQuery(this).removeClass("wpmudev-chat-module-min-hidden");jQuery(this).show()}});jQuery(".wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-min-max img.wpmudev-chat-min",n).show();jQuery(".wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-min-max img.wpmudev-chat-max",n).hide();jQuery(".wpmudev-chat-module-header span.wpmudev-chat-title-count",n).html("");jQuery(".wpmudev-chat-module-header span.wpmudev-chat-title-count",n).attr("last_row_count","0");jQuery(".wpmudev-chat-module-header span.wpmudev-chat-title-count",n).hide();wpmudev_chat.chat_session_set_auth_view()},chat_session_site_min:function(e){var t=wpmudev_chat.chat_session_get_session_by_id(e);if(t==undefined)return;var n=jQuery("#wpmudev-chat-box-"+e);jQuery(n).removeClass("wpmudev-chat-box-max");jQuery(n).addClass("wpmudev-chat-box-min");var r=jQuery(n).outerHeight();var i=0;jQuery(".wpmudev-chat-module",n).each(function(){if(jQuery(this).hasClass("wpmudev-chat-module-header")){i+=jQuery(this).outerHeight(true)}else{if(jQuery(this).is(":visible")){jQuery(this).addClass("wpmudev-chat-module-min-hidden");jQuery(this).hide()}}});if(i>0){jQuery(n).height(i);if(t["box_position_v"]=="bottom"){var s=t["box_border_width"]?t["box_border_width"]:0;s=parseInt(s);s=s?s:0}}jQuery(".wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-min-max img.wpmudev-chat-max",n).show();jQuery(".wpmudev-chat-module-header ul.wpmudev-chat-actions-menu li.wpmudev-chat-min-max img.wpmudev-chat-min",n).hide();jQuery(".wpmudev-chat-module-header span.wpmudev-chat-title-count",n).show();return false},chat_session_user_login:function(e,t){jQuery.ajax({type:"POST",url:wpmudev_chat_localized["settings"]["ajax_url"],dataType:"json",cache:false,data:{"function":"chat_user_login",action:"chatProcess",user_info:e,"wpmudev-chat-settings-request-uri":wpmudev_chat_localized["settings"]["REQUEST_URI"]},success:function(e){if(e!=undefined){if(e["errorStatus"]!=undefined){if(e["errorStatus"]==false){if(e["user_info"]!=undefined){wpmudev_chat.settings["auth"]=e["user_info"];wpmudev_chat.cookie("wpmudev-chat-auth",JSON.stringify(wpmudev_chat.settings["auth"]),{path:wpmudev_chat_localized["settings"]["cookiepath"],domain:wpmudev_chat_localized["settings"]["cookie_domain"]});if(t!=""){jQuery("#"+t+" .wpmudev-chat-login-error").html("");jQuery("#"+t+" .wpmudev-chat-login-error").hide()}wpmudev_chat.chat_session_set_auth_view();return false}}else if(e["errorStatus"]==true){if(e["errorText"]!=undefined&&e["errorText"]!=""){if(t!=""){jQuery("#"+t+" .wpmudev-chat-login-error").html(e["errorText"]);jQuery("#"+t+" .wpmudev-chat-login-error").show()}}}}}}})},chat_session_facebook_setup:function(){if(wpmudev_chat_localized["settings"]["facebook_active"]=="1"){if(!jQuery("#fb-root").length){jQuery("body").append('<div id="fb-root"></div>')}FB.init({appId:wpmudev_chat_localized["settings"]["facebook_app_id"],status:true,cookie:true,xfbml:true});FB.XFBML.parse();FB.Event.subscribe("auth.statusChange",function(e){var t=wpmudev_chat.cookie("wpmudev-chat-auth");if(t==""){wpmudev_chat.settings["auth"]={}}else{wpmudev_chat.settings["auth"]=jQuery.parseJSON(t)}if(e.status==="connected"){FB.api("/me",function(e){if(e.id!=undefined){var t={};t["type"]="facebook";t["id"]=e.id;t["name"]=e.name;t["profile_link"]=e.link;t["avatar"]="http://graph.facebook.com/"+e.id+"/picture";t["email"]="";wpmudev_chat.chat_session_user_login(t,"")}else{if(wpmudev_chat.settings["auth"]["type"]!=undefined&&wpmudev_chat.settings["auth"]["type"]=="facebook"){wpmudev_chat.settings["auth"]={};wpmudev_chat.cookie("wpmudev-chat-auth",JSON.stringify(wpmudev_chat.settings["auth"]),{path:wpmudev_chat_localized["settings"]["cookiepath"],domain:wpmudev_chat_localized["settings"]["cookie_domain"]});wpmudev_chat.chat_session_set_auth_view()}}})}else if(e.status==="not_authorized"){if(wpmudev_chat.settings["auth"]["type"]!=undefined&&wpmudev_chat.settings["auth"]["type"]=="facebook"){wpmudev_chat.settings["auth"]={};wpmudev_chat.cookie("wpmudev-chat-auth",JSON.stringify(wpmudev_chat.settings["auth"]),{path:wpmudev_chat_localized["settings"]["cookiepath"],domain:wpmudev_chat_localized["settings"]["cookie_domain"]});wpmudev_chat.chat_session_set_auth_view()}}else{if(wpmudev_chat.settings["auth"]["type"]!=undefined&&wpmudev_chat.settings["auth"]["type"]=="facebook"){wpmudev_chat.settings["auth"]={};wpmudev_chat.cookie("wpmudev-chat-auth",JSON.stringify(wpmudev_chat.settings["auth"]),{path:wpmudev_chat_localized["settings"]["cookiepath"],domain:wpmudev_chat_localized["settings"]["cookie_domain"]});wpmudev_chat.chat_session_set_auth_view()}}})}else{jQuery("div.wpmudev-chat-box span.chat-facebook-signin-btn").hide()}return},chat_session_google_plus_setup:function(){if(wpmudev_chat_localized["settings"]["google_plus_active"]=="1"){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src="https://apis.google.com/js/client:plusone.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},chat_session_twitter_setup:function(){if(wpmudev_chat_localized["settings"]["twitter_active"]==1){jQuery(".wpmudev-chat-box .wpmudev-chat-module-login a.chat-twitter-signin-btn").click(function(e){e.preventDefault();if(window.location.search==""){var t=window.location.href+"?"+"&wpmudev-chat-action=pop-twitter";}else{var t=window.location.href+"&wpmudev-chat-action=pop-twitter"}window.location.href=t;return false})}},wp_admin_bar_setup:function(){if(jQuery("#wpadminbar #wp-toolbar li#wp-admin-bar-wpmudev-chat-container").length){if(wpmudev_chat.settings["auth"]["chat_status"]!=undefined){jQuery("#wp-toolbar li#wp-admin-bar-wpmudev-chat-container li#wp-admin-bar-wpmudev-chat-user-status-change-"+wpmudev_chat.settings["auth"]["chat_status"]).addClass("wpmudev-chat-user-status-current")}if(wpmudev_chat.bound!=true){wpmudev_chat.bound=true;jQuery("#wp-toolbar li#wp-admin-bar-wpmudev-chat-container li#wp-admin-bar-wpmudev-chat-user-statuses ul#wp-admin-bar-wpmudev-chat-user-statuses-default li a.ab-item").click(function(e){e.preventDefault();var t=jQuery(this).parents("li").attr("id").replace("wp-admin-bar-wpmudev-chat-user-status-change-","");if(wpmudev_chat.settings["auth"]["chat_status"]!=t){wpmudev_chat.chat_process_user_status_change(t)}return false});jQuery("#wp-toolbar li#wp-admin-bar-wpmudev-chat-container li#wp-admin-bar-wpmudev-chat-user-friends ul.ab-submenu li a.wpmudev-chat-user-invite").click(function(e){e.preventDefault();var t=jQuery(this).attr("rel");t=t?t:"";if(t!=""){wpmudev_chat.chat_process_private_invite(t)}return false})}else{}}},chat_privite_invite_click:function(){if(jQuery("div.friends-wrap").length){jQuery("div.friends-wrap a.wpmudev-chat-user-invite").click(function(e){e.preventDefault();var t=jQuery(this).attr("rel");t=t?t:"";if(t!=""){wpmudev_chat.chat_process_private_invite(t)}})}if(jQuery("body.users-php table.wp-list-table td.column-wpmudev-chat-status").length){jQuery("body.users-php table.wp-list-table td.column-wpmudev-chat-status a.wpmudev-chat-user-invite").click(function(e){e.preventDefault();var t=jQuery(this).attr("rel");t=t?t:"";if(t!=""){wpmudev_chat.chat_process_private_invite(t)}})}jQuery(document).on("click","body.buddypress ul#members-list div.wpmudev-chat-now-button a.wpmudev-chat-user-invite",function(e){e.preventDefault();var t=jQuery(this).attr("rel");t=t?t:"";if(t!=""){wpmudev_chat.chat_process_private_invite(t)}});jQuery(document).on("click","body.buddypress ul#member-list div.wpmudev-chat-now-button a.wpmudev-chat-user-invite",function(e){e.preventDefault();var t=jQuery(this).attr("rel");t=t?t:"";if(t!=""){wpmudev_chat.chat_process_private_invite(t)}});if(jQuery(".wpmudev-chat-friends-widget").length){jQuery(".wpmudev-chat-friends-widget a.wpmudev-chat-user-invite").click(function(e){e.preventDefault();var t=jQuery(this).attr("rel");t=t?t:"";if(t!=""){wpmudev_chat.chat_process_private_invite(t)}})}if(jQuery("select.wpmudev-chat-status-widget").length){jQuery("select.wpmudev-chat-status-widget").change(function(e){e.preventDefault();var t=jQuery(this).val();if(wpmudev_chat.settings["auth"]["chat_status"]!=t){wpmudev_chat.chat_process_user_status_change(t)}})}},microtime:function(e){var t=(new Date).getTime();var n=parseInt(t/1e3);return e?t/1e3:(t-n*1e3)/1e3+" "+n},cookie:function(e,t,n){if(typeof t!="undefined"){n=n||{};if(t===null){t="";n=$.extend({},n);n.expires=-1}var r="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var i;if(typeof n.expires=="number"){i=new Date;i.setTime(i.getTime()+n.expires*24*60*60*1e3)}else{i=n.expires}r="; expires="+i.toUTCString()}var s=n.path?"; path="+n.path:"";var o=n.domain?"; domain="+n.domain:"";var u=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),r,s,o,u].join("")}else{var a=null;if(document.cookie&&document.cookie!=""){var f=document.cookie.split(";");for(var l=0;l<f.length;l++){var c=jQuery.trim(f[l]);if(c.substring(0,e.length+1)==e+"="){a=decodeURIComponent(c.substring(e.length+1));break}}}return a}},moveCaretToEnd:function(e){if(typeof e.selectionStart=="number"){e.selectionStart=e.selectionEnd=e.value.length}else if(typeof e.createTextRange!="undefined"){e.focus();var t=e.createTextRange();t.collapse(false);t.select()}}});jQuery(document).ready(wpmudev_chat.init);

var sf_position = ajaxy.sf_position;
var sf_templates = jQuery.parseJSON(ajaxy.sf_templates);
var sf_input = ajaxy.sf_input;
var live_search_settings = jQuery.parseJSON(ajaxy.live_search_settings);
	
// Ajaxy Search
(function($){$.fn.extend({ajaxyLiveSearch:function(e,t){if(e&&typeof e=="object"){e=$.extend({},$.ajaxyLiveSearch.defaults,e)}else{e=$.ajaxyLiveSearch.defaults}if(this.is("input")){this.each(function(){new $.ajaxyLiveSearch.load(this,e,t)});return}}});$.ajaxyLiveSearch={element:null,timeout:null,options:null,load:function(e,t,n){this.element=e;this.timeout=null;this.options=t;if($(e).val()==""){$(e).val(t.text)}$(e).attr("autocomplete","off");if($("#sf_sb").length==0){$("body").append('<div id="sf_sb" class="sf_sb">'+'<div class="sf_sb_cont">'+'<div class="sf_sb_top"></div>'+'<div id="sf_results" style="width:100%">'+'<div id="sf_val" ></div>'+'<div id="sf_more"></div>'+"</div>"+'<div class="sf_sb_bottom"></div>'+"</div>"+"</div>")}$.ajaxyLiveSearch.loadEvents(this)},loadResults:function(object){options=object.options;elem=object.element;window.sf_lastElement=elem;if(jQuery(elem).val()!=""&&jQuery.trim(jQuery(elem).val()).length>1){jQuery("body").data("sf_results",null);var loading='<li class="sf_lnk sf_more sf_selected">'+'<a id="sf_loading" href="'+options.searchUrl.replace("%s",encodeURI(jQuery(elem).val()))+'">'+"</a>"+"</li>";jQuery("#sf_val").html("<ul>"+loading+"</ul>");var pos=this.bounds(elem,options);if(!pos){jQuery("#sf_sb").hide();return false}if(Math.ceil(pos.left)+parseInt(options.width,10)>jQuery(window).width()){jQuery("#sf_sb").css("width",jQuery(window).width()-pos.left-20)}if(options.rtl==1){jQuery("#sf_sb").css({top:pos.bottom,left:pos.right})}else{jQuery("#sf_sb").css({top:pos.bottom,left:pos.left})}jQuery("#sf_sb").show();var data={action:"ajaxy_sf",sf_value:jQuery(elem).val(),search:options.search};if(options.ajaxData){data=window[options.ajaxData](data)}if(options.search){var mresults=options.search.split(",");var results=[];var m="";var s=0;var c=[];for(var kindex in mresults){var dm=mresults[kindex].split(":");if(dm.length==2){if(dm[1].indexOf(jQuery(elem).val())==0){results[results.length]=mresults[kindex]}}else if(dm.length==1){if(mresults[kindex].indexOf(jQuery(elem).val())==0){results[results.length]=mresults[kindex]}}}c=$.ajaxyLiveSearch.htmlArrayResults(results);m+=c[0];s+=c[1];var sf_selected="";if(s==0){sf_selected=" sf_selected"}m+='<li class="sf_lnk sf_more'+sf_selected+'">{total} Results Found</li>';m=m.replace(/{search_value_escaped}/g,jQuery(elem).val());m=m.replace(/{search_url_escaped}/g,options.searchUrl.replace("%s",encodeURI(jQuery(elem).val())));m=m.replace(/{search_value}/g,jQuery(elem).val());m=m.replace(/{total}/g,s);jQuery("body").data("sf_results",results);if(s>0){jQuery("#sf_val").html("<ul>"+m+"</ul>")}else{jQuery("#sf_val").html("<ul>"+m+"</ul>")}$.ajaxyLiveSearch.loadLiveEvents(object);jQuery("#sf_sb").show()}else{if(cache[form_data]){jQuery("#sf_val").html('<ul class="sf_main">'+cache[form_data]+"</ul>");$.ajaxyLiveSearch.loadLiveEvents(object);jQuery("#sf_sb").show();jQuery("#sf_val li.sf_lnk").eq(0).addClass("sf_selected").focus()}else{jQuery.post(options.ajaxUrl,data,function(resp){var results=eval("("+resp+")");var m="";var s=0;for(var mindex in results){var c=[];for(var kindex in results[mindex]){c=$.ajaxyLiveSearch.htmlResults(results[mindex][kindex],mindex,kindex);m+=c[0];s+=c[1]}}var sf_selected="";if(s==0){sf_selected=" sf_selected"}if(!options.callback){m+='<li class="sf_lnk sf_more'+sf_selected+'">'+sf_templates+"</li>"}m=m.replace(/{search_value_escaped}/g,jQuery(elem).val());m=m.replace(/{search_url_escaped}/g,options.searchUrl.replace("%s",encodeURI(jQuery(elem).val())));m=m.replace(/{search_value}/g,jQuery(elem).val());m=m.replace(/{total}/g,s);jQuery("body").data("sf_results",results);if(s>0){jQuery("#sf_val").html('<ul class="sf_main">'+m+"</ul>")}else{jQuery("#sf_val").html('<ul class="sf_main">'+m+"</ul>")}$.ajaxyLiveSearch.loadLiveEvents(object);cache[form_data]=m;jQuery("#sf_sb").show();jQuery("#sf_val li.sf_lnk").eq(0).addClass("sf_selected").focus()})}}}else{jQuery("#sf_sb").hide()}},bounds:function(e,t){var n=jQuery(e).offset();if(n){return{top:n.top,left:n.left+t.leftOffset,bottom:n.top+jQuery(e).innerHeight()+t.topOffset-5,right:n.left-jQuery("#sf_sb").innerWidth()+jQuery(e).innerWidth()}}},htmlResults:function(e,t,n){var r="";var i=0;if(typeof e!="undefined"){if(e.all.length>0){r+='<li class="sf_header">'+e.title+'</li><li><div class="sf_result_container"><ul>';for(var s=0;s<e.all.length;s++){i++;r+="<li result-type='object' index-type='"+t+"' index-array='"+n+"' index='"+s+"' class=\"sf_lnk "+e.class_name+'">'+$.ajaxyLiveSearch.replaceResults(e.all[s],e.template)+"</li>"}r+="</ul></div></li>"}}return new Array(r,i)},htmlArrayResults:function(e){var t="";var n=0;if(typeof e!="undefined"){if(e.length>0){t+='<li><div class="sf_result_container"><ul>';for(var r=0;r<e.length;r++){var i=e[r].split(":");var s="";if(i.length==2){s=i[1]}else{s=e[r]}n++;t+="<li result-type='array' index='"+r+"' class=\"sf_lnk sf_category\"><a href='javascript:;'>"+s+"</a></li>"}t+="</ul></div></li>"}}return new Array(t,n)},replaceResults:function(e,t){for(var n in e){t=t.replace(new RegExp("{"+n+"}","g"),e[n])}return t},loadLiveEvents:function(e){var t={object:e};jQuery("#sf_val li.sf_lnk").mouseover(function(){start=jQuery(this).index(".sf_lnk");jQuery(".sf_lnk").each(function(){jQuery(this).attr("class",jQuery(this).attr("class").replace(" sf_selected",""))});jQuery(this).attr("class",jQuery(this).attr("class")+" sf_selected")});if(t.object.options.callback){jQuery("#sf_val li.sf_lnk").click(function(e){try{window[t.object.options.callback](t.object,this)}catch(n){alert(n)}return false})}},loadEvents:function(e){var t={object:e};cache={};jQuery(document).click(function(){jQuery("#sf_sb").hide()});jQuery(window).resize(function(){var e=$.ajaxyLiveSearch.bounds(window.sf_lastElement,t.object.options);if(e){jQuery("#sf_sb").css({top:e.bottom,left:e.left})}});jQuery(e.element).keyup(function(e){if(e.keyCode!="38"&&e.keyCode!="40"&&e.keyCode!="13"&&e.keyCode!="27"&&e.keyCode!="39"&&e.keyCode!="37"){var n=t.object;if(n.timeout!=null){clearTimeout(n.timeout)}jQuery(n.element).attr("class",jQuery(n.element).attr("class").replace(" sf_focused","")+" sf_focused");var r={object:t.object};form_data=$(".searchform").serialize();if(!cache[form_data]){n.timeout=setTimeout(function(){jQuery.ajaxyLiveSearch.loadResults(r.object)},t.object.options.delay)}else{jQuery.ajaxyLiveSearch.loadResults(r.object)}}});jQuery(window).keydown(function(e){if(jQuery("#sf_sb").css("display")!="none"&&jQuery("#sf_sb").css("display")!="undefined"&&jQuery("#sf_sb").length>0){if(e.keyCode=="38"||e.keyCode=="40"){}else if(e.keyCode==27){jQuery("#sf_sb").hide()}else if(e.keyCode==13){var n=jQuery("#sf_val li.sf_selected a").attr("href");if(typeof n!="undefined"&&n!=""){if(t.object.options.callback){t.object.options.callback(this)}else{window.location.href=n}return false}else{if(t.object.options.callback){t.object.options.callback(this)}else if(t.object.element!=null){window.location.href=sf_url.replace("%s",encodeURI(jQuery(t.object).val()))}return false}}}});jQuery(e.element).focus(function(){if(jQuery(this).val()==t.object.options.text){jQuery(this).val("");jQuery(this).attr("class",jQuery(this).attr("class")+" sf_focused")}if(t.object.options.expand>0){jQuery(t.object.element).animate({width:t.object.options.iwidth})}});jQuery(e.element).blur(function(){if(jQuery(this).val()==""){jQuery(this).val(t.object.options.text);jQuery(this).attr("class",jQuery(this).attr("class").replace(/ sf_focused/g,""))}if(t.object.options.expand>0){jQuery(t.object.element).animate({width:t.object.options.expand})}})}};$.ajaxyLiveSearch.defaults={delay:500,leftOffset:0,topOffset:5,text:"Search For",iwidth:180,width:315,ajaxUrl:"",ajaxData:false,searchUrl:"",expand:false,callback:false,rtl:true,search:false}})(jQuery);

// Ajaxy Search Selective
function sf_addItem(e,t,n,r,i){var s=jQuery(e).find(".sf_ajaxy-selective-item");var o=false;var u="";var a=i.split(":");if(a.length==2){u=a[0]}else{u=i}if(s.length>0){for(var f=0;f<s.length;f++){if(jQuery(s[f]).find("input.sf_ajaxy-selective-close-hidden").val()==u){o=true;break}}}if(o){jQuery(e).find(".sf_ajaxy-selective-input").val("");jQuery("#sf_sb").hide();return}var l=t.split(":");if(l.length==2){t=a[1]}var c=jQuery('<span class="sf_ajaxy-selective-item">'+t+'<a class="sf_ajaxy-selective-close">X</a><input class="sf_ajaxy-selective-close-hidden" type="hidden" name="'+n+'" value="'+u+'" /></span>');if(s.length<=0){jQuery(e).prepend(c)}else{c.insertAfter(s[s.length-1])}c.click(function(){jQuery(this).remove()});var h=jQuery(e).find(".sf_ajaxy-selective-input");if(h){h.val("");if(r!="array"){h.css("visibility","hidden")}else{h.focus()}}jQuery("#sf_sb").hide()};

// Modernizr
window.Modernizr=function(e,t,n){function r(e){g.cssText=e}function i(e,t){return r(E.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t){for(var r in e){var i=e[r];if(!o(i,"-")&&g[i]!==n)return t=="pfx"?i:!0}return!1}function a(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}function f(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+x.join(r+" ")+r).split(" ");if(s(t,"string")||s(t,"undefined"))return u(i,t);i=(e+" "+T.join(r+" ")+r).split(" ");return a(i,t,n)}function l(){h.input=function(n){for(var r=0,i=n.length;r<i;r++)L[n[r]]=n[r]in y;L.list&&(L.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement);return L}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));h.inputtypes=function(e){for(var r=0,i,s,o,u=e.length;r<u;r++){y.setAttribute("type",s=e[r]);i=y.type!=="text";if(i){y.value=b;y.style.cssText="position:absolute;visibility:hidden;";if(/^range$/.test(s)&&y.style.WebkitAppearance!==n){d.appendChild(y);o=t.defaultView;i=o.getComputedStyle&&o.getComputedStyle(y,null).WebkitAppearance!=="textfield"&&y.offsetHeight!==0;d.removeChild(y)}else/^(search|tel)$/.test(s)||(/^(url|email)$/.test(s)?i=y.checkValidity&&y.checkValidity()===!1:i=y.value!=b)}k[e[r]]=!!i}return k}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var c="2.6.2",h={},p=!0,d=t.documentElement,v="modernizr",m=t.createElement(v),g=m.style,y=t.createElement("input"),b=":)",w={}.toString,E=" -webkit- -moz- -o- -ms- ".split(" "),S="Webkit Moz O ms",x=S.split(" "),T=S.toLowerCase().split(" "),N={svg:"http://www.w3.org/2000/svg"},C={},k={},L={},A=[],O=A.slice,M,_=function(e,n,r,i){var s,o,u,a,f=t.createElement("div"),l=t.body,c=l||t.createElement("body");if(parseInt(r,10))while(r--){u=t.createElement("div");u.id=i?i[r]:v+(r+1);f.appendChild(u)}s=["&#173;",'<style id="s',v,'">',e,"</style>"].join("");f.id=v;(l?f:c).innerHTML+=s;c.appendChild(f);if(!l){c.style.background="";c.style.overflow="hidden";a=d.style.overflow;d.style.overflow="hidden";d.appendChild(c)}o=n(f,e);if(!l){c.parentNode.removeChild(c);d.style.overflow=a}else f.parentNode.removeChild(f);return!!o},D=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t).matches;var r;_("@media "+t+" { #"+v+" { position: absolute; } }",function(t){r=(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle)["position"]=="absolute"});return r},P=function(){function e(e,i){i=i||t.createElement(r[e]||"div");e="on"+e;var o=e in i;if(!o){i.setAttribute||(i=t.createElement("div"));if(i.setAttribute&&i.removeAttribute){i.setAttribute(e,"");o=s(i[e],"function");s(i[e],"undefined")||(i[e]=n);i.removeAttribute(e)}}i=null;return o}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),H={}.hasOwnProperty,B;!s(H,"undefined")&&!s(H.call,"undefined")?B=function(e,t){return H.call(e,t)}:B=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")};Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=O.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(O.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(O.call(arguments)))};return r});C.flexbox=function(){return f("flexWrap")};C.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")};C.canvastext=function(){return!!h.canvas&&!!s(t.createElement("canvas").getContext("2d").fillText,"function")};C.webgl=function(){return!!e.WebGLRenderingContext};C.touch=function(){var n;"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:_(["@media (",E.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9});return n};C.geolocation=function(){return"geolocation"in navigator};C.postmessage=function(){return!!e.postMessage};C.websqldatabase=function(){return!!e.openDatabase};C.indexedDB=function(){return!!f("indexedDB",e)};C.hashchange=function(){return P("hashchange",e)&&(t.documentMode===n||t.documentMode>7)};C.history=function(){return!!e.history&&!!history.pushState};C.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e};C.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e};C.rgba=function(){r("background-color:rgba(150,255,150,.5)");return o(g.backgroundColor,"rgba")};C.hsla=function(){r("background-color:hsla(120,40%,100%,.5)");return o(g.backgroundColor,"rgba")||o(g.backgroundColor,"hsla")};C.multiplebgs=function(){r("background:url(https://),url(https://),red url(https://)");return/(url\s*\(.*?){3}/.test(g.background)};C.backgroundsize=function(){return f("backgroundSize")};C.borderimage=function(){return f("borderImage")};C.borderradius=function(){return f("borderRadius")};C.boxshadow=function(){return f("boxShadow")};C.textshadow=function(){return t.createElement("div").style.textShadow===""};C.opacity=function(){i("opacity:.55");return/^0.55$/.test(g.opacity)};C.cssanimations=function(){return f("animationName")};C.csscolumns=function(){return f("columnCount")};C.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";r((e+"-webkit- ".split(" ").join(t+e)+E.join(n+e)).slice(0,-e.length));return o(g.backgroundImage,"gradient")};C.cssreflections=function(){return f("boxReflect")};C.csstransforms=function(){return!!f("transform")};C.csstransforms3d=function(){var e=!!f("perspective");e&&"webkitPerspective"in d.style&&_("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=t.offsetLeft===9&&t.offsetHeight===3});return e};C.csstransitions=function(){return f("transition")};C.fontface=function(){var e;_('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=t.getElementById("smodernizr"),s=i.sheet||i.styleSheet,o=s?s.cssRules&&s.cssRules[0]?s.cssRules[0].cssText:s.cssText||"":"";e=/src/i.test(o)&&o.indexOf(r.split(" ")[0])===0});return e};C.generatedcontent=function(){var e;_(["#",v,"{font:0/0 a}#",v,':after{content:"',b,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3});return e};C.video=function(){var e=t.createElement("video"),n=!1;try{if(n=!!e.canPlayType){n=new Boolean(n);n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"");n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"");n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}}catch(r){}return n};C.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType){n=new Boolean(n);n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"");n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,"");n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"");n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}}catch(r){}return n};C.localstorage=function(){try{localStorage.setItem(v,v);localStorage.removeItem(v);return!0}catch(e){return!1}};C.sessionstorage=function(){try{sessionStorage.setItem(v,v);sessionStorage.removeItem(v);return!0}catch(e){return!1}};C.webworkers=function(){return!!e.Worker};C.applicationcache=function(){return!!e.applicationCache};C.svg=function(){return!!t.createElementNS&&!!t.createElementNS(N.svg,"svg").createSVGRect};C.inlinesvg=function(){var e=t.createElement("div");e.innerHTML="<svg/>";return(e.firstChild&&e.firstChild.namespaceURI)==N.svg};C.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(w.call(t.createElementNS(N.svg,"animate")))};C.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(w.call(t.createElementNS(N.svg,"clipPath")))};for(var j in C)if(B(C,j)){M=j.toLowerCase();h[M]=C[j]();A.push((h[M]?"":"no-")+M)}h.input||l();h.addTest=function(e,t){if(typeof e=="object")for(var r in e)B(e,r)&&h.addTest(r,e[r]);else{e=e.toLowerCase();if(h[e]!==n)return h;t=typeof t=="function"?t():t;typeof p!="undefined"&&p&&(d.className+=" "+(t?"":"no-")+e);h[e]=t}return h};r("");m=y=null;h._version=c;h._prefixes=E;h._domPrefixes=T;h._cssomPrefixes=x;h.mq=D;h.hasEvent=P;h.testProp=function(e){return u([e])};h.testAllProps=f;h.testStyles=_;h.prefixed=function(e,t,n){return t?f(e,t,n):f(e,"pfx")};d.className=d.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(p?" js "+A.join(" "):"");return h}(this,this.document);(function(e,t,n){function r(e){return"[object Function]"==d.call(e)}function i(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function u(){var e=v.shift();m=1,e?e.t?h(function(){("c"==e.t?k.injectCss:k.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),u()):m=0}function a(e,n,r,i,s,a,f){function l(t){if(!d&&o(c.readyState)&&(w.r=d=1,!m&&u(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){b.removeChild(c)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var f=f||k.errorTimeout,c=t.createElement(e),d=0,g=0,w={t:r,s:n,e:s,a:a,x:f};1===T[n]&&(g=1,T[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=e&&(g||2===T[n]?(b.insertBefore(c,y?null:p),h(l,f)):T[n].push(c))}function f(e,t,n,r,s){return m=0,t=t||"j",i(e)?a("c"==t?E:w,e,t,this.i++,n,r,s):(v.splice(this.i++,0,e),1==v.length&&u()),this}function l(){var e=k;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=y?c:p.parentNode,c=e.opera&&"[object Opera]"==d.call(e.opera),c=!!t.attachEvent&&!c,w=g?"object":c?"script":"img",E=c?"script":w,S=Array.isArray||function(e){return"[object Array]"==d.call(e)},x=[],T={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},C,k;k=function(e){function t(e){var e=e.split("!"),t=x.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},i,s,o;for(s=0;s<r;s++)o=e[s].split("="),(i=N[o.shift()])&&(n=i(n,o));for(s=0;s<t;s++)n=x[s](n);return n}function o(e,i,s,o,u){var a=t(e),f=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(i&&(i=r(i)?i:i[e]||i[o]||i[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,i,s,o,u):(T[a.url]?a.noexec=!0:T[a.url]=1,s.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(i)||r(f))&&s.load(function(){l(),i&&i(a.origUrl,u,o),f&&f(a.origUrl,u,o),T[a.url]=2})))}function u(e,t){function n(e,n){if(e){if(i(e))n||(f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),o(e,f,t,0,u);else if(Object(e)===e)for(p in h=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--h&&(r(f)?f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:f[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[p])),o(e[p],f,t,p,u))}else!n&&c()}var u=!!e.test,a=e.load||e.both,f=e.callback||s,l=f,c=e.complete||s,h,p;n(u?e.yep:e.nope,!!a),a&&n(a)}var a,f,c=this.yepnope.loader;if(i(e))o(e,0,c,0);else if(S(e))for(a=0;a<e.length;a++)f=e[a],i(f)?o(f,0,c,0):S(f)?k(f):Object(f)===f&&u(f,c);else Object(e)===e&&u(e,c)},k.addPrefix=function(e,t){N[e]=t},k.addFilter=function(e){x.push(e)},k.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",C=function(){t.removeEventListener("DOMContentLoaded",C,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=u,e.yepnope.injectJs=function(e,n,r,i,a,f){var l=t.createElement("script"),c,d,i=i||k.errorTimeout;l.src=e;for(d in r)l.setAttribute(d,r[d]);n=f?u:n||s,l.onreadystatechange=l.onload=function(){!c&&o(l.readyState)&&(c=1,n(),l.onload=l.onreadystatechange=null)},h(function(){c||(c=1,n(1))},i),a?l.onload():p.parentNode.insertBefore(l,p)},e.yepnope.injectCss=function(e,n,r,i,o,a){var i=t.createElement("link"),f,n=a?u:n||s;i.href=e,i.rel="stylesheet",i.type="text/css";for(f in r)i.setAttribute(f,r[f]);o||(p.parentNode.insertBefore(i,p),h(n,0))}})(this,document);Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};

jQuery(document).ready(function($) {
	$(document.body).on('keydown','#main *',function(e) {
		e.stopPropagation();
	});
	
	start = 0;
	jQuery(window).on('keydown',function(e){	
		if(e.keyCode == 38){
			e.stopPropagation();
			e.preventDefault();
			if (start == 0){
				start = (jQuery("#sf_val li.sf_lnk").length - 1);
				//console.log(start);
			}else{
				start--;
				if (start < 0){
					start = (jQuery("#sf_val li.sf_lnk").length - 1);  
				}
				var selected = $('.sf_lnk.sf_selected');
				if(!selected.hasClass('sf_more')) {
					container = selected.closest('.sf_result_container'),
					positionTop = selected.offset().top - container.offset().top;  
					container.scrollTop(container.scrollTop() + positionTop
														- container.height()/2 + selected.height()/2);
				} else {
					var more = $('.sf_lnk.sf_selected.sf_more'),
						container = selected.prev().find('.sf_result_container'),
						last = container.find('.sf_lnk').last();
						positionTop = selected.offset().top;  
					container.scrollTop(container.scrollTop() + last.position().top);
					//console.log(positionTop);
				}	
			}
			jQuery("#sf_val li.sf_lnk").removeClass('sf_selected');
			jQuery("#sf_val li.sf_lnk").eq(start).addClass('sf_selected').focus();
		}

		else if(e.keyCode == 40){
			e.stopPropagation();
			e.preventDefault();
			if (start == 0){
				start = 1; 
			}else{
				start++;
				if (start > (jQuery("#sf_val li.sf_lnk").length - 1)){
					start = 0;
					jQuery("#sf_val li.sf_lnk").removeClass('sf_selected').focus();
					jQuery("#sf_val li.sf_lnk").eq(start).addClass('sf_selected').focus();
				}
				var selected = $('.sf_lnk.sf_selected');
				if(!selected.hasClass('sf_more')) {
					container = selected.closest('.sf_result_container'),
					positionTop = selected.offset().top - container.offset().top;  
					container.scrollTop(container.scrollTop() + positionTop
														- container.height()/2 + selected.height()/2);
				}
			}
			jQuery("#sf_val li.sf_lnk").removeClass('sf_selected');
			jQuery("#sf_val li.sf_lnk").eq(start).addClass('sf_selected').focus();
		} 
		else {
			setTimeout(function(){start = 0;}, 500);
		}
	});

	$('#txtSearch').click(function(e) {
		if(this.value.length > 1) {
			e.stopPropagation();
			$('#sf_sb').show();
		}	
	});
	
	$('#btnSearch').click(function(e) {
		if($.trim($('#txtSearch').val()).length < 2 || $('#txtSearch').val() === "Search") {
			e.stopPropagation;
			e.preventDefault();
		}
	});

	$('#un-button i').addClass('fa fa-edit').removeClass('icon-edit');
	
	
	
	//console.log(sf_position + ' ' + sf_templates + ' ' + sf_input + ' ')
	jQuery(sf_input).ajaxyLiveSearch(live_search_settings);
	jQuery(".sf_ajaxy-selective-input").keyup(function() {
		var width = jQuery(this).val().length * 8;
		if(width < 50) {
			width = 50;
		}
		jQuery(this).width(width);
	});
	jQuery(".sf_ajaxy-selective-search").click(function() {
		jQuery(this).find(".sf_ajaxy-selective-input").focus();
	});
	jQuery(".sf_ajaxy-selective-close").click(function() {
		jQuery(this).parent().remove();
	});

	
	// window['sf_custom_data_' + m] = function(data) {
		// data.show_category = show_category;
		// data.show_post_category = show_post_category;
		// data.post_types = post_types;
		// return data;
	// }
	// jQuery(document).ready(function(){
		// jQuery('#' + m + ' .sf_input').ajaxyLiveSearch(shortcode_live_search_settings);					
	// });

});

